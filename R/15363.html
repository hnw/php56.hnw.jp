<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>ZSMMG</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/863.html#L193'>ZSMMG</a>             193 ext/opcache/ZendAccelerator.c 	if ((((double) ZSMMG(wasted_shared_memory)) / ZCG(accel_directives).memory_consumption) &gt;= ZCG(accel_directives).max_wasted_percentage) {</span>
<span class='curline'><a href='../S/863.html#L1095'>ZSMMG</a>            1095 ext/opcache/ZendAccelerator.c 				ZSMMG(wasted_shared_memory) += persistent_script-&gt;dynamic_members.memory_consumption;</span>
<span class='curline'><a href='../S/863.html#L1096'>ZSMMG</a>            1096 ext/opcache/ZendAccelerator.c 				if (ZSMMG(memory_exhausted)) {</span>
<span class='curline'><a href='../S/863.html#L1119'>ZSMMG</a>            1119 ext/opcache/ZendAccelerator.c 			ZSMMG(memory_exhausted) = 1;</span>
<span class='curline'><a href='../S/863.html#L1158'>ZSMMG</a>            1158 ext/opcache/ZendAccelerator.c 		ZSMMG(memory_exhausted) = 1;</span>
<span class='curline'><a href='../S/863.html#L1227'>ZSMMG</a>            1227 ext/opcache/ZendAccelerator.c 				ZSMMG(memory_exhausted) = 1;</span>
<span class='curline'><a href='../S/863.html#L1584'>ZSMMG</a>            1584 ext/opcache/ZendAccelerator.c 				ZSMMG(wasted_shared_memory) += persistent_script-&gt;dynamic_members.memory_consumption;</span>
<span class='curline'><a href='../S/863.html#L1585'>ZSMMG</a>            1585 ext/opcache/ZendAccelerator.c 				if (ZSMMG(memory_exhausted)) {</span>
<span class='curline'><a href='../S/863.html#L1609'>ZSMMG</a>            1609 ext/opcache/ZendAccelerator.c 				ZSMMG(wasted_shared_memory) += persistent_script-&gt;dynamic_members.memory_consumption;</span>
<span class='curline'><a href='../S/863.html#L1610'>ZSMMG</a>            1610 ext/opcache/ZendAccelerator.c 				if (ZSMMG(memory_exhausted)) {</span>
<span class='curline'><a href='../S/863.html#L1629'>ZSMMG</a>            1629 ext/opcache/ZendAccelerator.c 		if (ZSMMG(memory_exhausted) || ZCSG(restart_pending)) {</span>
<span class='curline'><a href='../S/863.html#L2092'>ZSMMG</a>            2092 ext/opcache/ZendAccelerator.c 	ZSMMG(memory_exhausted) = 0;</span>
<span class='curline'><a href='../S/863.html#L2096'>ZSMMG</a>            2096 ext/opcache/ZendAccelerator.c 	ZSMMG(wasted_shared_memory) = 0;</span>
<span class='curline'><a href='../S/863.html#L2465'>ZSMMG</a>            2465 ext/opcache/ZendAccelerator.c 	ZSMMG(app_shared_globals) = accel_shared_globals;</span>
<span class='curline'><a href='../S/863.html#L2590'>ZSMMG</a>            2590 ext/opcache/ZendAccelerator.c 			accel_shared_globals = (zend_accel_shared_globals *) ZSMMG(app_shared_globals);</span>
<span class='curline'><a href='../S/854.html#L445'>ZSMMG</a>             445 ext/opcache/zend_accelerator_module.c 			snprintf(buf, sizeof(buf), "%ld", ZSMMG(memory_exhausted)?ZCSG(misses):ZCSG(misses)-ZCSG(blacklist_misses));</span>
<span class='curline'><a href='../S/854.html#L447'>ZSMMG</a>             447 ext/opcache/zend_accelerator_module.c 			snprintf(buf, sizeof(buf), "%ld", ZCG(accel_directives).memory_consumption-zend_shared_alloc_get_free_memory()-ZSMMG(wasted_shared_memory));</span>
<span class='curline'><a href='../S/854.html#L451'>ZSMMG</a>             451 ext/opcache/zend_accelerator_module.c 			snprintf(buf, sizeof(buf), "%ld", ZSMMG(wasted_shared_memory));</span>
<span class='curline'><a href='../S/854.html#L577'>ZSMMG</a>             577 ext/opcache/zend_accelerator_module.c 	add_assoc_bool(return_value, "cache_full", ZSMMG(memory_exhausted));</span>
<span class='curline'><a href='../S/854.html#L584'>ZSMMG</a>             584 ext/opcache/zend_accelerator_module.c 	add_assoc_long(memory_usage, "used_memory", ZCG(accel_directives).memory_consumption-zend_shared_alloc_get_free_memory()-ZSMMG(wasted_shared_memory));</span>
<span class='curline'><a href='../S/854.html#L586'>ZSMMG</a>             586 ext/opcache/zend_accelerator_module.c 	add_assoc_long(memory_usage, "wasted_memory", ZSMMG(wasted_shared_memory));</span>
<span class='curline'><a href='../S/854.html#L587'>ZSMMG</a>             587 ext/opcache/zend_accelerator_module.c 	add_assoc_double(memory_usage, "current_wasted_percentage", (((double) ZSMMG(wasted_shared_memory))/ZCG(accel_directives).memory_consumption)*100.0);</span>
<span class='curline'><a href='../S/854.html#L616'>ZSMMG</a>             616 ext/opcache/zend_accelerator_module.c 	add_assoc_long(statistics, "misses", ZSMMG(memory_exhausted)?ZCSG(misses):ZCSG(misses)-ZCSG(blacklist_misses));</span>
<span class='curline'><a href='../S/861.html#L127'>ZSMMG</a>             127 ext/opcache/zend_shared_alloc.c 	ZSMMG(shared_segments) = NULL;</span>
<span class='curline'><a href='../S/861.html#L128'>ZSMMG</a>             128 ext/opcache/zend_shared_alloc.c 	ZSMMG(shared_segments_count) = 0;</span>
<span class='curline'><a href='../S/861.html#L166'>ZSMMG</a>             166 ext/opcache/zend_shared_alloc.c 	ZSMMG(shared_free) = requested_size; /* goes to tmp_shared_globals.shared_free */</span>
<span class='curline'><a href='../S/861.html#L179'>ZSMMG</a>             179 ext/opcache/zend_shared_alloc.c 				res = zend_shared_alloc_try(he, requested_size, &amp;ZSMMG(shared_segments), &amp;ZSMMG(shared_segments_count), &amp;error_in);</span>
<span class='curline'><a href='../S/861.html#L196'>ZSMMG</a>             196 ext/opcache/zend_shared_alloc.c 			res = zend_shared_alloc_try(he, requested_size, &amp;ZSMMG(shared_segments), &amp;ZSMMG(shared_segments_count), &amp;error_in);</span>
<span class='curline'><a href='../S/861.html#L213'>ZSMMG</a>             213 ext/opcache/zend_shared_alloc.c 	shared_segments_array_size = ZSMMG(shared_segments_count) * S_H(segment_type_size)();</span>
<span class='curline'><a href='../S/861.html#L223'>ZSMMG</a>             223 ext/opcache/zend_shared_alloc.c 	tmp_shared_segments = zend_shared_alloc(shared_segments_array_size + ZSMMG(shared_segments_count) * sizeof(void *));</span>
<span class='curline'><a href='../S/861.html#L229'>ZSMMG</a>             229 ext/opcache/zend_shared_alloc.c 	copy_shared_segments(tmp_shared_segments, ZSMMG(shared_segments)[0], ZSMMG(shared_segments_count), S_H(segment_type_size)());</span>
<span class='curline'><a href='../S/861.html#L234'>ZSMMG</a>             234 ext/opcache/zend_shared_alloc.c 	free(ZSMMG(shared_segments));</span>
<span class='curline'><a href='../S/861.html#L235'>ZSMMG</a>             235 ext/opcache/zend_shared_alloc.c 	ZSMMG(shared_segments) = tmp_shared_segments;</span>
<span class='curline'><a href='../S/861.html#L237'>ZSMMG</a>             237 ext/opcache/zend_shared_alloc.c 	ZSMMG(shared_memory_state).positions = (int *)zend_shared_alloc(sizeof(int) * ZSMMG(shared_segments_count));</span>
<span class='curline'><a href='../S/861.html#L238'>ZSMMG</a>             238 ext/opcache/zend_shared_alloc.c 	if (!ZSMMG(shared_memory_state).positions) {</span>
<span class='curline'><a href='../S/861.html#L257'>ZSMMG</a>             257 ext/opcache/zend_shared_alloc.c 	shared_segments_array_size = ZSMMG(shared_segments_count) * (S_H(segment_type_size)() + sizeof(void *));</span>
<span class='curline'><a href='../S/861.html#L259'>ZSMMG</a>             259 ext/opcache/zend_shared_alloc.c 	copy_shared_segments(tmp_shared_segments, ZSMMG(shared_segments)[0], ZSMMG(shared_segments_count), S_H(segment_type_size)());</span>
<span class='curline'><a href='../S/861.html#L260'>ZSMMG</a>             260 ext/opcache/zend_shared_alloc.c 	ZSMMG(shared_segments) = tmp_shared_segments;</span>
<span class='curline'><a href='../S/861.html#L262'>ZSMMG</a>             262 ext/opcache/zend_shared_alloc.c 	for (i = 0; i &lt; ZSMMG(shared_segments_count); i++) {</span>
<span class='curline'><a href='../S/861.html#L263'>ZSMMG</a>             263 ext/opcache/zend_shared_alloc.c 		S_H(detach_segment)(ZSMMG(shared_segments)[i]);</span>
<span class='curline'><a href='../S/861.html#L265'>ZSMMG</a>             265 ext/opcache/zend_shared_alloc.c 	efree(ZSMMG(shared_segments));</span>
<span class='curline'><a href='../S/861.html#L266'>ZSMMG</a>             266 ext/opcache/zend_shared_alloc.c 	ZSMMG(shared_segments) = NULL;</span>
<span class='curline'><a href='../S/861.html#L278'>ZSMMG</a>             278 ext/opcache/zend_shared_alloc.c 	for (i = 0; i &lt; ZSMMG(shared_segments_count); i++) {</span>
<span class='curline'><a href='../S/861.html#L279'>ZSMMG</a>             279 ext/opcache/zend_shared_alloc.c 		size_t block_size = ZSMMG(shared_segments)[i]-&gt;size - ZSMMG(shared_segments)[i]-&gt;pos;</span>
<span class='curline'><a href='../S/861.html#L291'>ZSMMG</a>             291 ext/opcache/zend_shared_alloc.c 		zend_accel_error(ACCEL_LOG_WARNING, "Not enough free shared space to allocate %ld bytes (%ld bytes free)", (long)size, (long)ZSMMG(shared_free)); \</span>
<span class='curline'><a href='../S/861.html#L293'>ZSMMG</a>             293 ext/opcache/zend_shared_alloc.c 			ZSMMG(memory_exhausted) = 1; \</span>
<span class='curline'><a href='../S/861.html#L308'>ZSMMG</a>             308 ext/opcache/zend_shared_alloc.c 	if (block_size &gt; ZSMMG(shared_free)) { /* No hope to find a big-enough block */</span>
<span class='curline'><a href='../S/861.html#L312'>ZSMMG</a>             312 ext/opcache/zend_shared_alloc.c 	for (i = 0; i &lt; ZSMMG(shared_segments_count); i++) {</span>
<span class='curline'><a href='../S/861.html#L313'>ZSMMG</a>             313 ext/opcache/zend_shared_alloc.c 		if (ZSMMG(shared_segments)[i]-&gt;size - ZSMMG(shared_segments)[i]-&gt;pos &gt;= block_size) { /* found a valid block */</span>
<span class='curline'><a href='../S/861.html#L314'>ZSMMG</a>             314 ext/opcache/zend_shared_alloc.c 			void *retval = (void *) (((char *) ZSMMG(shared_segments)[i]-&gt;p) + ZSMMG(shared_segments)[i]-&gt;pos);</span>
<span class='curline'><a href='../S/861.html#L316'>ZSMMG</a>             316 ext/opcache/zend_shared_alloc.c 			ZSMMG(shared_segments)[i]-&gt;pos += block_size;</span>
<span class='curline'><a href='../S/861.html#L317'>ZSMMG</a>             317 ext/opcache/zend_shared_alloc.c 			ZSMMG(shared_free) -= block_size;</span>
<span class='curline'><a href='../S/861.html#L449'>ZSMMG</a>             449 ext/opcache/zend_shared_alloc.c 	return ZSMMG(shared_free);</span>
<span class='curline'><a href='../S/861.html#L456'>ZSMMG</a>             456 ext/opcache/zend_shared_alloc.c 	for (i = 0; i &lt; ZSMMG(shared_segments_count); i++) {</span>
<span class='curline'><a href='../S/861.html#L457'>ZSMMG</a>             457 ext/opcache/zend_shared_alloc.c 		ZSMMG(shared_memory_state).positions[i] = ZSMMG(shared_segments)[i]-&gt;pos;</span>
<span class='curline'><a href='../S/861.html#L459'>ZSMMG</a>             459 ext/opcache/zend_shared_alloc.c 	ZSMMG(shared_memory_state).shared_free = ZSMMG(shared_free);</span>
<span class='curline'><a href='../S/861.html#L466'>ZSMMG</a>             466 ext/opcache/zend_shared_alloc.c 	for (i = 0; i &lt; ZSMMG(shared_segments_count); i++) {</span>
<span class='curline'><a href='../S/861.html#L467'>ZSMMG</a>             467 ext/opcache/zend_shared_alloc.c 		ZSMMG(shared_segments)[i]-&gt;pos = ZSMMG(shared_memory_state).positions[i];</span>
<span class='curline'><a href='../S/861.html#L469'>ZSMMG</a>             469 ext/opcache/zend_shared_alloc.c 	ZSMMG(shared_free) = ZSMMG(shared_memory_state).shared_free;</span>
<span class='curline'><a href='../S/861.html#L470'>ZSMMG</a>             470 ext/opcache/zend_shared_alloc.c 	ZSMMG(memory_exhausted) = 0;</span>
<span class='curline'><a href='../S/861.html#L471'>ZSMMG</a>             471 ext/opcache/zend_shared_alloc.c 	ZSMMG(wasted_shared_memory) = 0;</span>
<span class='curline'><a href='../S/861.html#L490'>ZSMMG</a>             490 ext/opcache/zend_shared_alloc.c 	for (i = 0; i &lt; ZSMMG(shared_segments_count); i++) {</span>
<span class='curline'><a href='../S/861.html#L491'>ZSMMG</a>             491 ext/opcache/zend_shared_alloc.c 		mprotect(ZSMMG(shared_segments)[i]-&gt;p, ZSMMG(shared_segments)[i]-&gt;size, mode);</span>
</pre>
</body>
</html>
