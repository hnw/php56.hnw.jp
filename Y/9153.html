<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>archive</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/974.html#L487'>archive</a>           487 ext/phar/phar_internal.h 		phar_archive_data    *archive;</span>
<span class='curline'><a href='../S/974.html#L565'>archive</a>           565 ext/phar/phar_internal.h int phar_get_archive(phar_archive_data **archive, char *fname, int fname_len, char *alias, int alias_len, char **error TSRMLS_DC);</span>
<span class='curline'><a href='../S/974.html#L602'>archive</a>           602 ext/phar/phar_internal.h int phar_zip_flush(phar_archive_data *archive, char *user_stub, long len, int defaultstub, char **error TSRMLS_DC);</span>
<span class='curline'><a href='../S/974.html#L619'>archive</a>           619 ext/phar/phar_internal.h int phar_flush(phar_archive_data *archive, char *user_stub, long len, int convert, char **error TSRMLS_DC);</span>
<span class='curline'><a href='../S/975.html#L1166'>archive</a>          1166 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive) {</span>
<span class='curline'><a href='../S/975.html#L1240'>archive</a>          1240 ext/phar/phar_object.c 	phar_obj-&gt;arc.archive = phar_data;</span>
<span class='curline'><a href='../S/975.html#L1259'>archive</a>          1259 ext/phar/phar_object.c 		phar_obj-&gt;arc.archive-&gt;is_data = is_data;</span>
<span class='curline'><a href='../S/975.html#L1262'>archive</a>          1262 ext/phar/phar_object.c 		zend_hash_add(&amp;PHAR_GLOBALS-&gt;phar_persist_map, (const char *) phar_obj-&gt;arc.archive, sizeof(phar_obj-&gt;arc.archive), (void *) &amp;phar_obj, sizeof(phar_archive_object **), NULL);</span>
<span class='curline'><a href='../S/975.html#L1389'>archive</a>          1389 ext/phar/phar_object.c 	if (!phar_obj-&gt;arc.archive) { \</span>
<span class='curline'><a href='../S/975.html#L1402'>archive</a>          1402 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive &amp;&amp; phar_obj-&gt;arc.archive-&gt;is_persistent) {</span>
<span class='curline'><a href='../S/975.html#L1403'>archive</a>          1403 ext/phar/phar_object.c 		zend_hash_del(&amp;PHAR_GLOBALS-&gt;phar_persist_map, (const char *) phar_obj-&gt;arc.archive, sizeof(phar_obj-&gt;arc.archive));</span>
<span class='curline'><a href='../S/975.html#L1676'>archive</a>          1676 ext/phar/phar_object.c 	if (!(data = phar_get_or_create_entry_data(phar_obj-&gt;arc.archive-&gt;fname, phar_obj-&gt;arc.archive-&gt;fname_len, str_key, str_key_len, "w+b", 0, &amp;error, 1 TSRMLS_CC))) {</span>
<span class='curline'><a href='../S/975.html#L1753'>archive</a>          1753 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L1767'>archive</a>          1767 ext/phar/phar_object.c 		zend_throw_exception_ex(spl_ce_BadMethodCallException, 0 TSRMLS_CC, "Unable to instantiate directory iterator for %s", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L1789'>archive</a>          1789 ext/phar/phar_object.c 		zend_throw_exception_ex(spl_ce_BadMethodCallException, 0 TSRMLS_CC, "Unable to instantiate directory iterator for %s", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L1811'>archive</a>          1811 ext/phar/phar_object.c 			zend_throw_exception_ex(spl_ce_BadMethodCallException, 0 TSRMLS_CC, "Unable to instantiate regex iterator for %s", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L1832'>archive</a>          1832 ext/phar/phar_object.c 		zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\" unable to create temporary file", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L1836'>archive</a>          1836 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;arc.archive) TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L1842'>archive</a>          1842 ext/phar/phar_object.c 		zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L1853'>archive</a>          1853 ext/phar/phar_object.c 		phar_obj-&gt;arc.archive-&gt;ufp = pass.fp;</span>
<span class='curline'><a href='../S/975.html#L1854'>archive</a>          1854 ext/phar/phar_object.c 		phar_flush(phar_obj-&gt;arc.archive, 0, 0, 0, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L1891'>archive</a>          1891 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L1901'>archive</a>          1901 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;arc.archive) TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L1902'>archive</a>          1902 ext/phar/phar_object.c 		zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L1916'>archive</a>          1916 ext/phar/phar_object.c 		zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\": unable to create temporary file", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L1921'>archive</a>          1921 ext/phar/phar_object.c 		phar_obj-&gt;arc.archive-&gt;ufp = pass.fp;</span>
<span class='curline'><a href='../S/975.html#L1922'>archive</a>          1922 ext/phar/phar_object.c 		phar_flush(phar_obj-&gt;arc.archive, 0, 0, 0, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L1946'>archive</a>          1946 ext/phar/phar_object.c 	RETURN_LONG(zend_hash_num_elements(&amp;phar_obj-&gt;arc.archive-&gt;manifest));</span>
<span class='curline'><a href='../S/975.html#L1965'>archive</a>          1965 ext/phar/phar_object.c 			RETURN_BOOL(phar_obj-&gt;arc.archive-&gt;is_tar);</span>
<span class='curline'><a href='../S/975.html#L1967'>archive</a>          1967 ext/phar/phar_object.c 			RETURN_BOOL(phar_obj-&gt;arc.archive-&gt;is_zip);</span>
<span class='curline'><a href='../S/975.html#L1969'>archive</a>          1969 ext/phar/phar_object.c 			RETURN_BOOL(!phar_obj-&gt;arc.archive-&gt;is_tar &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_zip);</span>
<span class='curline'><a href='../S/975.html#L2388'>archive</a>          2388 ext/phar/phar_object.c 			if (phar_obj-&gt;arc.archive-&gt;is_tar) {</span>
<span class='curline'><a href='../S/975.html#L2390'>archive</a>          2390 ext/phar/phar_object.c 			} else if (phar_obj-&gt;arc.archive-&gt;is_zip) {</span>
<span class='curline'><a href='../S/975.html#L2408'>archive</a>          2408 ext/phar/phar_object.c 			flags = phar_obj-&gt;arc.archive-&gt;flags &amp; PHAR_FILE_COMPRESSION_MASK;</span>
<span class='curline'><a href='../S/975.html#L2449'>archive</a>          2449 ext/phar/phar_object.c 	is_data = phar_obj-&gt;arc.archive-&gt;is_data;</span>
<span class='curline'><a href='../S/975.html#L2450'>archive</a>          2450 ext/phar/phar_object.c 	phar_obj-&gt;arc.archive-&gt;is_data = 0;</span>
<span class='curline'><a href='../S/975.html#L2451'>archive</a>          2451 ext/phar/phar_object.c 	ret = phar_convert_to_other(phar_obj-&gt;arc.archive, format, ext, flags TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L2452'>archive</a>          2452 ext/phar/phar_object.c 	phar_obj-&gt;arc.archive-&gt;is_data = is_data;</span>
<span class='curline'><a href='../S/975.html#L2485'>archive</a>          2485 ext/phar/phar_object.c 			if (phar_obj-&gt;arc.archive-&gt;is_tar) {</span>
<span class='curline'><a href='../S/975.html#L2487'>archive</a>          2487 ext/phar/phar_object.c 			} else if (phar_obj-&gt;arc.archive-&gt;is_zip) {</span>
<span class='curline'><a href='../S/975.html#L2510'>archive</a>          2510 ext/phar/phar_object.c 			flags = phar_obj-&gt;arc.archive-&gt;flags &amp; PHAR_FILE_COMPRESSION_MASK;</span>
<span class='curline'><a href='../S/975.html#L2551'>archive</a>          2551 ext/phar/phar_object.c 	is_data = phar_obj-&gt;arc.archive-&gt;is_data;</span>
<span class='curline'><a href='../S/975.html#L2552'>archive</a>          2552 ext/phar/phar_object.c 	phar_obj-&gt;arc.archive-&gt;is_data = 1;</span>
<span class='curline'><a href='../S/975.html#L2553'>archive</a>          2553 ext/phar/phar_object.c 	ret = phar_convert_to_other(phar_obj-&gt;arc.archive, format, ext, flags TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L2554'>archive</a>          2554 ext/phar/phar_object.c 	phar_obj-&gt;arc.archive-&gt;is_data = is_data;</span>
<span class='curline'><a href='../S/975.html#L2576'>archive</a>          2576 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;flags &amp; PHAR_FILE_COMPRESSED_GZ) {</span>
<span class='curline'><a href='../S/975.html#L2580'>archive</a>          2580 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;flags &amp; PHAR_FILE_COMPRESSED_BZ2) {</span>
<span class='curline'><a href='../S/975.html#L2600'>archive</a>          2600 ext/phar/phar_object.c 	if (!phar_obj-&gt;arc.archive-&gt;is_writeable) {</span>
<span class='curline'><a href='../S/975.html#L2604'>archive</a>          2604 ext/phar/phar_object.c 	if (SUCCESS != php_stream_stat_path(phar_obj-&gt;arc.archive-&gt;fname, &amp;ssb)) {</span>
<span class='curline'><a href='../S/975.html#L2605'>archive</a>          2605 ext/phar/phar_object.c 		if (phar_obj-&gt;arc.archive-&gt;is_brandnew) {</span>
<span class='curline'><a href='../S/975.html#L2627'>archive</a>          2627 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L2637'>archive</a>          2637 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;arc.archive) TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L2638'>archive</a>          2638 ext/phar/phar_object.c 		zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L2641'>archive</a>          2641 ext/phar/phar_object.c 	if (zend_hash_exists(&amp;phar_obj-&gt;arc.archive-&gt;manifest, fname, (uint) fname_len)) {</span>
<span class='curline'><a href='../S/975.html#L2642'>archive</a>          2642 ext/phar/phar_object.c 		if (SUCCESS == zend_hash_find(&amp;phar_obj-&gt;arc.archive-&gt;manifest, fname, (uint) fname_len, (void**)&amp;entry)) {</span>
<span class='curline'><a href='../S/975.html#L2649'>archive</a>          2649 ext/phar/phar_object.c 				phar_obj-&gt;arc.archive-&gt;is_modified = 1;</span>
<span class='curline'><a href='../S/975.html#L2657'>archive</a>          2657 ext/phar/phar_object.c 	phar_flush(phar_obj-&gt;arc.archive, NULL, 0, 0, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L2678'>archive</a>          2678 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;alias &amp;&amp; phar_obj-&gt;arc.archive-&gt;alias != phar_obj-&gt;arc.archive-&gt;fname) {</span>
<span class='curline'><a href='../S/975.html#L2679'>archive</a>          2679 ext/phar/phar_object.c 		RETURN_STRINGL(phar_obj-&gt;arc.archive-&gt;alias, phar_obj-&gt;arc.archive-&gt;alias_len, 1);</span>
<span class='curline'><a href='../S/975.html#L2695'>archive</a>          2695 ext/phar/phar_object.c 	RETURN_STRINGL(phar_obj-&gt;arc.archive-&gt;fname, phar_obj-&gt;arc.archive-&gt;fname_len, 1);</span>
<span class='curline'><a href='../S/975.html#L2711'>archive</a>          2711 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L2721'>archive</a>          2721 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L2722'>archive</a>          2722 ext/phar/phar_object.c 		if (phar_obj-&gt;arc.archive-&gt;is_tar) {</span>
<span class='curline'><a href='../S/975.html#L2733'>archive</a>          2733 ext/phar/phar_object.c 		if (alias_len == phar_obj-&gt;arc.archive-&gt;alias_len &amp;&amp; memcmp(phar_obj-&gt;arc.archive-&gt;alias, alias, alias_len) == 0) {</span>
<span class='curline'><a href='../S/975.html#L2748'>archive</a>          2748 ext/phar/phar_object.c 				"Invalid alias \"%s\" specified for phar \"%s\"", alias, phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L2752'>archive</a>          2752 ext/phar/phar_object.c 		if (phar_obj-&gt;arc.archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;arc.archive) TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L2753'>archive</a>          2753 ext/phar/phar_object.c 			zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L2756'>archive</a>          2756 ext/phar/phar_object.c 		if (phar_obj-&gt;arc.archive-&gt;alias_len &amp;&amp; SUCCESS == zend_hash_find(&amp;(PHAR_GLOBALS-&gt;phar_alias_map), phar_obj-&gt;arc.archive-&gt;alias, phar_obj-&gt;arc.archive-&gt;alias_len, (void**)&amp;fd_ptr)) {</span>
<span class='curline'><a href='../S/975.html#L2757'>archive</a>          2757 ext/phar/phar_object.c 			zend_hash_del(&amp;(PHAR_GLOBALS-&gt;phar_alias_map), phar_obj-&gt;arc.archive-&gt;alias, phar_obj-&gt;arc.archive-&gt;alias_len);</span>
<span class='curline'><a href='../S/975.html#L2761'>archive</a>          2761 ext/phar/phar_object.c 		oldalias = phar_obj-&gt;arc.archive-&gt;alias;</span>
<span class='curline'><a href='../S/975.html#L2762'>archive</a>          2762 ext/phar/phar_object.c 		oldalias_len = phar_obj-&gt;arc.archive-&gt;alias_len;</span>
<span class='curline'><a href='../S/975.html#L2763'>archive</a>          2763 ext/phar/phar_object.c 		old_temp = phar_obj-&gt;arc.archive-&gt;is_temporary_alias;</span>
<span class='curline'><a href='../S/975.html#L2766'>archive</a>          2766 ext/phar/phar_object.c 			phar_obj-&gt;arc.archive-&gt;alias = estrndup(alias, alias_len);</span>
<span class='curline'><a href='../S/975.html#L2768'>archive</a>          2768 ext/phar/phar_object.c 			phar_obj-&gt;arc.archive-&gt;alias = NULL;</span>
<span class='curline'><a href='../S/975.html#L2771'>archive</a>          2771 ext/phar/phar_object.c 		phar_obj-&gt;arc.archive-&gt;alias_len = alias_len;</span>
<span class='curline'><a href='../S/975.html#L2772'>archive</a>          2772 ext/phar/phar_object.c 		phar_obj-&gt;arc.archive-&gt;is_temporary_alias = 0;</span>
<span class='curline'><a href='../S/975.html#L2773'>archive</a>          2773 ext/phar/phar_object.c 		phar_flush(phar_obj-&gt;arc.archive, NULL, 0, 0, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L2776'>archive</a>          2776 ext/phar/phar_object.c 			phar_obj-&gt;arc.archive-&gt;alias = oldalias;</span>
<span class='curline'><a href='../S/975.html#L2777'>archive</a>          2777 ext/phar/phar_object.c 			phar_obj-&gt;arc.archive-&gt;alias_len = oldalias_len;</span>
<span class='curline'><a href='../S/975.html#L2778'>archive</a>          2778 ext/phar/phar_object.c 			phar_obj-&gt;arc.archive-&gt;is_temporary_alias = old_temp;</span>
<span class='curline'><a href='../S/975.html#L2781'>archive</a>          2781 ext/phar/phar_object.c 				zend_hash_add(&amp;(PHAR_GLOBALS-&gt;phar_alias_map), oldalias, oldalias_len, (void*)&amp;(phar_obj-&gt;arc.archive), sizeof(phar_archive_data*), NULL);</span>
<span class='curline'><a href='../S/975.html#L2787'>archive</a>          2787 ext/phar/phar_object.c 		zend_hash_add(&amp;(PHAR_GLOBALS-&gt;phar_alias_map), alias, alias_len, (void*)&amp;(phar_obj-&gt;arc.archive), sizeof(phar_archive_data*), NULL);</span>
<span class='curline'><a href='../S/975.html#L2811'>archive</a>          2811 ext/phar/phar_object.c 	RETURN_STRING(phar_obj-&gt;arc.archive-&gt;version, 1);</span>
<span class='curline'><a href='../S/975.html#L2826'>archive</a>          2826 ext/phar/phar_object.c 	phar_obj-&gt;arc.archive-&gt;donotflush = 1;</span>
<span class='curline'><a href='../S/975.html#L2841'>archive</a>          2841 ext/phar/phar_object.c 	RETURN_BOOL(phar_obj-&gt;arc.archive-&gt;donotflush);</span>
<span class='curline'><a href='../S/975.html#L2858'>archive</a>          2858 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L2864'>archive</a>          2864 ext/phar/phar_object.c 	phar_obj-&gt;arc.archive-&gt;donotflush = 0;</span>
<span class='curline'><a href='../S/975.html#L2865'>archive</a>          2865 ext/phar/phar_object.c 	phar_flush(phar_obj-&gt;arc.archive, 0, 0, 0, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L2887'>archive</a>          2887 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L2893'>archive</a>          2893 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L2894'>archive</a>          2894 ext/phar/phar_object.c 		if (phar_obj-&gt;arc.archive-&gt;is_tar) {</span>
<span class='curline'><a href='../S/975.html#L2911'>archive</a>          2911 ext/phar/phar_object.c 			if (phar_obj-&gt;arc.archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;arc.archive) TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L2912'>archive</a>          2912 ext/phar/phar_object.c 				zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L2915'>archive</a>          2915 ext/phar/phar_object.c 			phar_flush(phar_obj-&gt;arc.archive, (char *) &amp;zstub, len, 0, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L2926'>archive</a>          2926 ext/phar/phar_object.c 		if (phar_obj-&gt;arc.archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;arc.archive) TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L2927'>archive</a>          2927 ext/phar/phar_object.c 			zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L2930'>archive</a>          2930 ext/phar/phar_object.c 		phar_flush(phar_obj-&gt;arc.archive, stub, stub_len, 0, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L2964'>archive</a>          2964 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L2965'>archive</a>          2965 ext/phar/phar_object.c 		if (phar_obj-&gt;arc.archive-&gt;is_tar) {</span>
<span class='curline'><a href='../S/975.html#L2979'>archive</a>          2979 ext/phar/phar_object.c 	if (ZEND_NUM_ARGS() &gt; 0 &amp;&amp; (phar_obj-&gt;arc.archive-&gt;is_tar || phar_obj-&gt;arc.archive-&gt;is_zip)) {</span>
<span class='curline'><a href='../S/975.html#L2990'>archive</a>          2990 ext/phar/phar_object.c 	if (!phar_obj-&gt;arc.archive-&gt;is_tar &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_zip) {</span>
<span class='curline'><a href='../S/975.html#L3005'>archive</a>          3005 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;arc.archive) TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L3006'>archive</a>          3006 ext/phar/phar_object.c 		zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3009'>archive</a>          3009 ext/phar/phar_object.c 	phar_flush(phar_obj-&gt;arc.archive, stub, stub_len, 1, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3039'>archive</a>          3039 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L3060'>archive</a>          3060 ext/phar/phar_object.c 			if (phar_obj-&gt;arc.archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;arc.archive) TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L3061'>archive</a>          3061 ext/phar/phar_object.c 				zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3064'>archive</a>          3064 ext/phar/phar_object.c 			phar_obj-&gt;arc.archive-&gt;sig_flags = algo;</span>
<span class='curline'><a href='../S/975.html#L3065'>archive</a>          3065 ext/phar/phar_object.c 			phar_obj-&gt;arc.archive-&gt;is_modified = 1;</span>
<span class='curline'><a href='../S/975.html#L3069'>archive</a>          3069 ext/phar/phar_object.c 			phar_flush(phar_obj-&gt;arc.archive, 0, 0, 0, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3093'>archive</a>          3093 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;signature) {</span>
<span class='curline'><a href='../S/975.html#L3098'>archive</a>          3098 ext/phar/phar_object.c 		add_assoc_stringl(return_value, "hash", phar_obj-&gt;arc.archive-&gt;signature, phar_obj-&gt;arc.archive-&gt;sig_len, 1);</span>
<span class='curline'><a href='../S/975.html#L3099'>archive</a>          3099 ext/phar/phar_object.c 		switch(phar_obj-&gt;arc.archive-&gt;sig_flags) {</span>
<span class='curline'><a href='../S/975.html#L3116'>archive</a>          3116 ext/phar/phar_object.c 				unknown_len = spprintf(&amp;unknown, 0, "Unknown (%u)", phar_obj-&gt;arc.archive-&gt;sig_flags);</span>
<span class='curline'><a href='../S/975.html#L3137'>archive</a>          3137 ext/phar/phar_object.c 	RETURN_BOOL(phar_obj-&gt;arc.archive-&gt;is_modified);</span>
<span class='curline'><a href='../S/975.html#L3216'>archive</a>          3216 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L3222'>archive</a>          3222 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_zip) {</span>
<span class='curline'><a href='../S/975.html#L3255'>archive</a>          3255 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_tar) {</span>
<span class='curline'><a href='../S/975.html#L3256'>archive</a>          3256 ext/phar/phar_object.c 		ret = phar_convert_to_other(phar_obj-&gt;arc.archive, PHAR_FORMAT_TAR, ext, flags TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3258'>archive</a>          3258 ext/phar/phar_object.c 		ret = phar_convert_to_other(phar_obj-&gt;arc.archive, PHAR_FORMAT_PHAR, ext, flags TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3283'>archive</a>          3283 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L3289'>archive</a>          3289 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_zip) {</span>
<span class='curline'><a href='../S/975.html#L3295'>archive</a>          3295 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_tar) {</span>
<span class='curline'><a href='../S/975.html#L3296'>archive</a>          3296 ext/phar/phar_object.c 		ret = phar_convert_to_other(phar_obj-&gt;arc.archive, PHAR_FORMAT_TAR, ext, PHAR_FILE_COMPRESSED_NONE TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3298'>archive</a>          3298 ext/phar/phar_object.c 		ret = phar_convert_to_other(phar_obj-&gt;arc.archive, PHAR_FORMAT_PHAR, ext, PHAR_FILE_COMPRESSED_NONE TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3325'>archive</a>          3325 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L3355'>archive</a>          3355 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_tar) {</span>
<span class='curline'><a href='../S/975.html#L3361'>archive</a>          3361 ext/phar/phar_object.c 	if (!pharobj_cancompress(&amp;phar_obj-&gt;arc.archive-&gt;manifest TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L3372'>archive</a>          3372 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;arc.archive) TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L3373'>archive</a>          3373 ext/phar/phar_object.c 		zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3376'>archive</a>          3376 ext/phar/phar_object.c 	pharobj_set_compression(&amp;phar_obj-&gt;arc.archive-&gt;manifest, flags TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3377'>archive</a>          3377 ext/phar/phar_object.c 	phar_obj-&gt;arc.archive-&gt;is_modified = 1;</span>
<span class='curline'><a href='../S/975.html#L3378'>archive</a>          3378 ext/phar/phar_object.c 	phar_flush(phar_obj-&gt;arc.archive, 0, 0, 0, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3399'>archive</a>          3399 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L3405'>archive</a>          3405 ext/phar/phar_object.c 	if (!pharobj_cancompress(&amp;phar_obj-&gt;arc.archive-&gt;manifest TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L3411'>archive</a>          3411 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_tar) {</span>
<span class='curline'><a href='../S/975.html#L3414'>archive</a>          3414 ext/phar/phar_object.c 		if (phar_obj-&gt;arc.archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;arc.archive) TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L3415'>archive</a>          3415 ext/phar/phar_object.c 			zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3418'>archive</a>          3418 ext/phar/phar_object.c 		pharobj_set_compression(&amp;phar_obj-&gt;arc.archive-&gt;manifest, PHAR_ENT_COMPRESSED_NONE TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3421'>archive</a>          3421 ext/phar/phar_object.c 	phar_obj-&gt;arc.archive-&gt;is_modified = 1;</span>
<span class='curline'><a href='../S/975.html#L3422'>archive</a>          3422 ext/phar/phar_object.c 	phar_flush(phar_obj-&gt;arc.archive, 0, 0, 0, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3449'>archive</a>          3449 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L3458'>archive</a>          3458 ext/phar/phar_object.c 			"file \"%s\" cannot be copied to file \"%s\", cannot copy Phar meta-file in %s", oldfile, newfile, phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3465'>archive</a>          3465 ext/phar/phar_object.c 			"file \"%s\" cannot be copied to file \"%s\", cannot copy to Phar meta-file in %s", oldfile, newfile, phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3469'>archive</a>          3469 ext/phar/phar_object.c 	if (!zend_hash_exists(&amp;phar_obj-&gt;arc.archive-&gt;manifest, oldfile, (uint) oldfile_len) || SUCCESS != zend_hash_find(&amp;phar_obj-&gt;arc.archive-&gt;manifest, oldfile, (uint) oldfile_len, (void**)&amp;oldentry) || oldentry-&gt;is_deleted) {</span>
<span class='curline'><a href='../S/975.html#L3471'>archive</a>          3471 ext/phar/phar_object.c 			"file \"%s\" cannot be copied to file \"%s\", file does not exist in %s", oldfile, newfile, phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3475'>archive</a>          3475 ext/phar/phar_object.c 	if (zend_hash_exists(&amp;phar_obj-&gt;arc.archive-&gt;manifest, newfile, (uint) newfile_len)) {</span>
<span class='curline'><a href='../S/975.html#L3476'>archive</a>          3476 ext/phar/phar_object.c 		if (SUCCESS == zend_hash_find(&amp;phar_obj-&gt;arc.archive-&gt;manifest, newfile, (uint) newfile_len, (void**)&amp;temp) || !temp-&gt;is_deleted) {</span>
<span class='curline'><a href='../S/975.html#L3478'>archive</a>          3478 ext/phar/phar_object.c 				"file \"%s\" cannot be copied to file \"%s\", file must not already exist in phar %s", oldfile, newfile, phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3485'>archive</a>          3485 ext/phar/phar_object.c 				"file \"%s\" contains invalid characters %s, cannot be copied from \"%s\" in phar %s", newfile, pcr_error, oldfile, phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3489'>archive</a>          3489 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_persistent) {</span>
<span class='curline'><a href='../S/975.html#L3490'>archive</a>          3490 ext/phar/phar_object.c 		if (FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;arc.archive) TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L3491'>archive</a>          3491 ext/phar/phar_object.c 			zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3495'>archive</a>          3495 ext/phar/phar_object.c 		zend_hash_find(&amp;phar_obj-&gt;arc.archive-&gt;manifest, oldfile, (uint) oldfile_len, (void**)&amp;oldentry);</span>
<span class='curline'><a href='../S/975.html#L3528'>archive</a>          3528 ext/phar/phar_object.c 	phar_obj-&gt;arc.archive-&gt;is_modified = 1;</span>
<span class='curline'><a href='../S/975.html#L3529'>archive</a>          3529 ext/phar/phar_object.c 	phar_flush(phar_obj-&gt;arc.archive, 0, 0, 0, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3555'>archive</a>          3555 ext/phar/phar_object.c 	if (zend_hash_exists(&amp;phar_obj-&gt;arc.archive-&gt;manifest, fname, (uint) fname_len)) {</span>
<span class='curline'><a href='../S/975.html#L3556'>archive</a>          3556 ext/phar/phar_object.c 		if (SUCCESS == zend_hash_find(&amp;phar_obj-&gt;arc.archive-&gt;manifest, fname, (uint) fname_len, (void**)&amp;entry)) {</span>
<span class='curline'><a href='../S/975.html#L3569'>archive</a>          3569 ext/phar/phar_object.c 		if (zend_hash_exists(&amp;phar_obj-&gt;arc.archive-&gt;virtual_dirs, fname, (uint) fname_len)) {</span>
<span class='curline'><a href='../S/975.html#L3593'>archive</a>          3593 ext/phar/phar_object.c 	if (!(entry = phar_get_entry_info_dir(phar_obj-&gt;arc.archive, fname, fname_len, 1, &amp;error, 0 TSRMLS_CC))) {</span>
<span class='curline'><a href='../S/975.html#L3597'>archive</a>          3597 ext/phar/phar_object.c 			zend_throw_exception_ex(spl_ce_BadMethodCallException, 0 TSRMLS_CC, "Cannot get stub \".phar/stub.php\" directly in phar \"%s\", use getStub", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3602'>archive</a>          3602 ext/phar/phar_object.c 			zend_throw_exception_ex(spl_ce_BadMethodCallException, 0 TSRMLS_CC, "Cannot get alias \".phar/alias.txt\" directly in phar \"%s\", use getAlias", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3607'>archive</a>          3607 ext/phar/phar_object.c 			zend_throw_exception_ex(spl_ce_BadMethodCallException, 0 TSRMLS_CC, "Cannot directly get any files or directories in magic \".phar\" directory", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3616'>archive</a>          3616 ext/phar/phar_object.c 		fname_len = spprintf(&amp;fname, 0, "phar://%s/%s", phar_obj-&gt;arc.archive-&gt;fname, fname);</span>
<span class='curline'><a href='../S/975.html#L3731'>archive</a>          3731 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L3742'>archive</a>          3742 ext/phar/phar_object.c 		zend_throw_exception_ex(spl_ce_BadMethodCallException, 0 TSRMLS_CC, "Cannot set stub \".phar/stub.php\" directly in phar \"%s\", use setStub", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3747'>archive</a>          3747 ext/phar/phar_object.c 		zend_throw_exception_ex(spl_ce_BadMethodCallException, 0 TSRMLS_CC, "Cannot set alias \".phar/alias.txt\" directly in phar \"%s\", use setAlias", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3752'>archive</a>          3752 ext/phar/phar_object.c 		zend_throw_exception_ex(spl_ce_BadMethodCallException, 0 TSRMLS_CC, "Cannot set any files or directories in magic \".phar\" directory", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3756'>archive</a>          3756 ext/phar/phar_object.c 	phar_add_file(&amp;(phar_obj-&gt;arc.archive), fname, fname_len, cont_str, cont_len, zresource TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3770'>archive</a>          3770 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L3779'>archive</a>          3779 ext/phar/phar_object.c 	if (zend_hash_exists(&amp;phar_obj-&gt;arc.archive-&gt;manifest, fname, (uint) fname_len)) {</span>
<span class='curline'><a href='../S/975.html#L3780'>archive</a>          3780 ext/phar/phar_object.c 		if (SUCCESS == zend_hash_find(&amp;phar_obj-&gt;arc.archive-&gt;manifest, fname, (uint) fname_len, (void**)&amp;entry)) {</span>
<span class='curline'><a href='../S/975.html#L3786'>archive</a>          3786 ext/phar/phar_object.c 			if (phar_obj-&gt;arc.archive-&gt;is_persistent) {</span>
<span class='curline'><a href='../S/975.html#L3787'>archive</a>          3787 ext/phar/phar_object.c 				if (FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;arc.archive) TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L3788'>archive</a>          3788 ext/phar/phar_object.c 					zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3792'>archive</a>          3792 ext/phar/phar_object.c 				zend_hash_find(&amp;phar_obj-&gt;arc.archive-&gt;manifest, fname, (uint) fname_len, (void **)&amp;entry);</span>
<span class='curline'><a href='../S/975.html#L3797'>archive</a>          3797 ext/phar/phar_object.c 			phar_flush(phar_obj-&gt;arc.archive, 0, 0, 0, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3831'>archive</a>          3831 ext/phar/phar_object.c 	phar_mkdir(&amp;phar_obj-&gt;arc.archive, dirname, dirname_len TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3875'>archive</a>          3875 ext/phar/phar_object.c 	phar_add_file(&amp;(phar_obj-&gt;arc.archive), fname, fname_len, NULL, 0, zresource TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3895'>archive</a>          3895 ext/phar/phar_object.c 	phar_add_file(&amp;(phar_obj-&gt;arc.archive), localname, localname_len, cont_str, cont_len, NULL TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3916'>archive</a>          3916 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_tar || phar_obj-&gt;arc.archive-&gt;is_zip) {</span>
<span class='curline'><a href='../S/975.html#L3918'>archive</a>          3918 ext/phar/phar_object.c 		if (SUCCESS == zend_hash_find(&amp;(phar_obj-&gt;arc.archive-&gt;manifest), ".phar/stub.php", sizeof(".phar/stub.php")-1, (void **)&amp;stub)) {</span>
<span class='curline'><a href='../S/975.html#L3919'>archive</a>          3919 ext/phar/phar_object.c 			if (phar_obj-&gt;arc.archive-&gt;fp &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_brandnew &amp;&amp; !(stub-&gt;flags &amp; PHAR_ENT_COMPRESSION_MASK)) {</span>
<span class='curline'><a href='../S/975.html#L3920'>archive</a>          3920 ext/phar/phar_object.c 				fp = phar_obj-&gt;arc.archive-&gt;fp;</span>
<span class='curline'><a href='../S/975.html#L3922'>archive</a>          3922 ext/phar/phar_object.c 				if (!(fp = php_stream_open_wrapper(phar_obj-&gt;arc.archive-&gt;fname, "rb", 0, NULL))) {</span>
<span class='curline'><a href='../S/975.html#L3923'>archive</a>          3923 ext/phar/phar_object.c 					zend_throw_exception_ex(spl_ce_UnexpectedValueException, 0 TSRMLS_CC, "phar error: unable to open phar \"%s\"", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3935'>archive</a>          3935 ext/phar/phar_object.c 						zend_throw_exception_ex(spl_ce_UnexpectedValueException, 0 TSRMLS_CC, "phar error: unable to read stub of phar \"%s\" (cannot create %s filter)", phar_obj-&gt;arc.archive-&gt;fname, phar_decompress_filter(stub, 1));</span>
<span class='curline'><a href='../S/975.html#L3955'>archive</a>          3955 ext/phar/phar_object.c 	len = phar_obj-&gt;arc.archive-&gt;halt_offset;</span>
<span class='curline'><a href='../S/975.html#L3957'>archive</a>          3957 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;fp &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_brandnew) {</span>
<span class='curline'><a href='../S/975.html#L3958'>archive</a>          3958 ext/phar/phar_object.c 		fp = phar_obj-&gt;arc.archive-&gt;fp;</span>
<span class='curline'><a href='../S/975.html#L3960'>archive</a>          3960 ext/phar/phar_object.c 		fp = php_stream_open_wrapper(phar_obj-&gt;arc.archive-&gt;fname, "rb", 0, NULL);</span>
<span class='curline'><a href='../S/975.html#L3974'>archive</a>          3974 ext/phar/phar_object.c 		if (fp != phar_obj-&gt;arc.archive-&gt;fp) {</span>
<span class='curline'><a href='../S/975.html#L3988'>archive</a>          3988 ext/phar/phar_object.c 	if (fp != phar_obj-&gt;arc.archive-&gt;fp) {</span>
<span class='curline'><a href='../S/975.html#L4004'>archive</a>          4004 ext/phar/phar_object.c 	RETURN_BOOL(phar_obj-&gt;arc.archive-&gt;metadata != NULL);</span>
<span class='curline'><a href='../S/975.html#L4019'>archive</a>          4019 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;metadata) {</span>
<span class='curline'><a href='../S/975.html#L4020'>archive</a>          4020 ext/phar/phar_object.c 		if (phar_obj-&gt;arc.archive-&gt;is_persistent) {</span>
<span class='curline'><a href='../S/975.html#L4022'>archive</a>          4022 ext/phar/phar_object.c 			char *buf = estrndup((char *) phar_obj-&gt;arc.archive-&gt;metadata, phar_obj-&gt;arc.archive-&gt;metadata_len);</span>
<span class='curline'><a href='../S/975.html#L4024'>archive</a>          4024 ext/phar/phar_object.c 			phar_parse_metadata(&amp;buf, &amp;ret, phar_obj-&gt;arc.archive-&gt;metadata_len TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L4028'>archive</a>          4028 ext/phar/phar_object.c 		RETURN_ZVAL(phar_obj-&gt;arc.archive-&gt;metadata, 1, 0);</span>
<span class='curline'><a href='../S/975.html#L4043'>archive</a>          4043 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L4052'>archive</a>          4052 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;arc.archive) TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L4053'>archive</a>          4053 ext/phar/phar_object.c 		zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L4056'>archive</a>          4056 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;metadata) {</span>
<span class='curline'><a href='../S/975.html#L4057'>archive</a>          4057 ext/phar/phar_object.c 		zval_ptr_dtor(&amp;phar_obj-&gt;arc.archive-&gt;metadata);</span>
<span class='curline'><a href='../S/975.html#L4058'>archive</a>          4058 ext/phar/phar_object.c 		phar_obj-&gt;arc.archive-&gt;metadata = NULL;</span>
<span class='curline'><a href='../S/975.html#L4061'>archive</a>          4061 ext/phar/phar_object.c 	MAKE_STD_ZVAL(phar_obj-&gt;arc.archive-&gt;metadata);</span>
<span class='curline'><a href='../S/975.html#L4062'>archive</a>          4062 ext/phar/phar_object.c 	ZVAL_ZVAL(phar_obj-&gt;arc.archive-&gt;metadata, metadata, 1, 0);</span>
<span class='curline'><a href='../S/975.html#L4063'>archive</a>          4063 ext/phar/phar_object.c 	phar_obj-&gt;arc.archive-&gt;is_modified = 1;</span>
<span class='curline'><a href='../S/975.html#L4064'>archive</a>          4064 ext/phar/phar_object.c 	phar_flush(phar_obj-&gt;arc.archive, 0, 0, 0, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L4082'>archive</a>          4082 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L4087'>archive</a>          4087 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;metadata) {</span>
<span class='curline'><a href='../S/975.html#L4088'>archive</a>          4088 ext/phar/phar_object.c 		zval_ptr_dtor(&amp;phar_obj-&gt;arc.archive-&gt;metadata);</span>
<span class='curline'><a href='../S/975.html#L4089'>archive</a>          4089 ext/phar/phar_object.c 		phar_obj-&gt;arc.archive-&gt;metadata = NULL;</span>
<span class='curline'><a href='../S/975.html#L4090'>archive</a>          4090 ext/phar/phar_object.c 		phar_obj-&gt;arc.archive-&gt;is_modified = 1;</span>
<span class='curline'><a href='../S/975.html#L4091'>archive</a>          4091 ext/phar/phar_object.c 		phar_flush(phar_obj-&gt;arc.archive, 0, 0, 0, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L4322'>archive</a>          4322 ext/phar/phar_object.c 	fp = php_stream_open_wrapper(phar_obj-&gt;arc.archive-&gt;fname, "rb", IGNORE_URL|STREAM_MUST_SEEK, &amp;actual);</span>
<span class='curline'><a href='../S/975.html#L4326'>archive</a>          4326 ext/phar/phar_object.c 			"Invalid argument, %s cannot be found", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L4384'>archive</a>          4384 ext/phar/phar_object.c 						if (FAILURE == zend_hash_find(&amp;phar_obj-&gt;arc.archive-&gt;manifest, Z_STRVAL_PP(zval_file), Z_STRLEN_PP(zval_file), (void **)&amp;entry)) {</span>
<span class='curline'><a href='../S/975.html#L4386'>archive</a>          4386 ext/phar/phar_object.c 								"Phar Error: attempted to extract non-existent file \"%s\" from phar \"%s\"", Z_STRVAL_PP(zval_file), phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L4390'>archive</a>          4390 ext/phar/phar_object.c 								"Extraction from phar \"%s\" failed: %s", phar_obj-&gt;arc.archive-&gt;fname, error);</span>
<span class='curline'><a href='../S/975.html#L4403'>archive</a>          4403 ext/phar/phar_object.c 		if (FAILURE == zend_hash_find(&amp;phar_obj-&gt;arc.archive-&gt;manifest, filename, filename_len, (void **)&amp;entry)) {</span>
<span class='curline'><a href='../S/975.html#L4405'>archive</a>          4405 ext/phar/phar_object.c 				"Phar Error: attempted to extract non-existent file \"%s\" from phar \"%s\"", filename, phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L4411'>archive</a>          4411 ext/phar/phar_object.c 				"Extraction from phar \"%s\" failed: %s", phar_obj-&gt;arc.archive-&gt;fname, error);</span>
<span class='curline'><a href='../S/975.html#L4418'>archive</a>          4418 ext/phar/phar_object.c 		phar = phar_obj-&gt;arc.archive;</span>
<span class='curline'><a href='../S/975.html#L5170'>archive</a>          5170 ext/phar/phar_object.c 	ZEND_ARG_INFO(0, archive)</span>
<span class='curline'><a href='../S/984.html#L966'>archive</a>           966 ext/phar/util.c int phar_get_archive(phar_archive_data **archive, char *fname, int fname_len, char *alias, int alias_len, char **error TSRMLS_DC) /* {{{ */</span>
<span class='curline'><a href='../S/984.html#L979'>archive</a>           979 ext/phar/util.c 	*archive = NULL;</span>
<span class='curline'><a href='../S/984.html#L982'>archive</a>           982 ext/phar/util.c 		*archive = PHAR_G(last_phar);</span>
<span class='curline'><a href='../S/984.html#L989'>archive</a>           989 ext/phar/util.c 				*archive = NULL;</span>
<span class='curline'><a href='../S/984.html#L997'>archive</a>           997 ext/phar/util.c 			zend_hash_add(&amp;(PHAR_GLOBALS-&gt;phar_alias_map), alias, alias_len, (void*)&amp;(*archive), sizeof(phar_archive_data*), NULL);</span>
<span class='curline'><a href='../S/984.html#L1028'>archive</a>          1028 ext/phar/util.c 			*archive = *fd_ptr;</span>
<span class='curline'><a href='../S/984.html#L1051'>archive</a>          1051 ext/phar/util.c 			*archive = *fd_ptr;</span>
<span class='curline'><a href='../S/984.html#L1079'>archive</a>          1079 ext/phar/util.c 			*archive = *fd_ptr;</span>
<span class='curline'><a href='../S/984.html#L1103'>archive</a>          1103 ext/phar/util.c 			fd = *archive = *fd_ptr;</span>
<span class='curline'><a href='../S/984.html#L1115'>archive</a>          1115 ext/phar/util.c 			fd = *archive = *fd_ptr;</span>
<span class='curline'><a href='../S/984.html#L1142'>archive</a>          1142 ext/phar/util.c 			*archive = *fd_ptr;</span>
<span class='curline'><a href='../S/984.html#L2076'>archive</a>          2076 ext/phar/util.c 		if (objphar[0]-&gt;arc.archive-&gt;fname_len == phar-&gt;fname_len &amp;&amp; !memcmp(objphar[0]-&gt;arc.archive-&gt;fname, phar-&gt;fname, phar-&gt;fname_len)) {</span>
<span class='curline'><a href='../S/984.html#L2077'>archive</a>          2077 ext/phar/util.c 			objphar[0]-&gt;arc.archive = phar;</span>
</pre>
</body>
</html>
