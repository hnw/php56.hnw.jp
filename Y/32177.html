<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>phar_obj</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/975.html#L1148'>phar_obj</a>         1148 ext/phar/phar_object.c 	phar_archive_object *phar_obj;</span>
<span class='curline'><a href='../S/975.html#L1152'>phar_obj</a>         1152 ext/phar/phar_object.c 	phar_obj = (phar_archive_object*)zend_object_store_get_object(getThis() TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L1166'>phar_obj</a>         1166 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive) {</span>
<span class='curline'><a href='../S/975.html#L1240'>phar_obj</a>         1240 ext/phar/phar_object.c 	phar_obj-&gt;arc.archive = phar_data;</span>
<span class='curline'><a href='../S/975.html#L1241'>phar_obj</a>         1241 ext/phar/phar_object.c 	phar_obj-&gt;spl.oth_handler = &amp;phar_spl_foreign_handler;</span>
<span class='curline'><a href='../S/975.html#L1259'>phar_obj</a>         1259 ext/phar/phar_object.c 		phar_obj-&gt;arc.archive-&gt;is_data = is_data;</span>
<span class='curline'><a href='../S/975.html#L1262'>phar_obj</a>         1262 ext/phar/phar_object.c 		zend_hash_add(&amp;PHAR_GLOBALS-&gt;phar_persist_map, (const char *) phar_obj-&gt;arc.archive, sizeof(phar_obj-&gt;arc.archive), (void *) &amp;phar_obj, sizeof(phar_archive_object **), NULL);</span>
<span class='curline'><a href='../S/975.html#L1265'>phar_obj</a>         1265 ext/phar/phar_object.c 	phar_obj-&gt;spl.info_class = phar_ce_entry;</span>
<span class='curline'><a href='../S/975.html#L1388'>phar_obj</a>         1388 ext/phar/phar_object.c 	phar_archive_object *phar_obj = (phar_archive_object*)zend_object_store_get_object(getThis() TSRMLS_CC); \</span>
<span class='curline'><a href='../S/975.html#L1389'>phar_obj</a>         1389 ext/phar/phar_object.c 	if (!phar_obj-&gt;arc.archive) { \</span>
<span class='curline'><a href='../S/975.html#L1400'>phar_obj</a>         1400 ext/phar/phar_object.c 	phar_archive_object *phar_obj = (phar_archive_object*)zend_object_store_get_object(getThis() TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L1402'>phar_obj</a>         1402 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive &amp;&amp; phar_obj-&gt;arc.archive-&gt;is_persistent) {</span>
<span class='curline'><a href='../S/975.html#L1403'>phar_obj</a>         1403 ext/phar/phar_object.c 		zend_hash_del(&amp;PHAR_GLOBALS-&gt;phar_persist_map, (const char *) phar_obj-&gt;arc.archive, sizeof(phar_obj-&gt;arc.archive));</span>
<span class='curline'><a href='../S/975.html#L1430'>phar_obj</a>         1430 ext/phar/phar_object.c 	phar_archive_object *phar_obj = p_obj-&gt;p;</span>
<span class='curline'><a href='../S/975.html#L1676'>phar_obj</a>         1676 ext/phar/phar_object.c 	if (!(data = phar_get_or_create_entry_data(phar_obj-&gt;arc.archive-&gt;fname, phar_obj-&gt;arc.archive-&gt;fname_len, str_key, str_key_len, "w+b", 0, &amp;error, 1 TSRMLS_CC))) {</span>
<span class='curline'><a href='../S/975.html#L1753'>phar_obj</a>         1753 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L1767'>phar_obj</a>         1767 ext/phar/phar_object.c 		zend_throw_exception_ex(spl_ce_BadMethodCallException, 0 TSRMLS_CC, "Unable to instantiate directory iterator for %s", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L1789'>phar_obj</a>         1789 ext/phar/phar_object.c 		zend_throw_exception_ex(spl_ce_BadMethodCallException, 0 TSRMLS_CC, "Unable to instantiate directory iterator for %s", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L1811'>phar_obj</a>         1811 ext/phar/phar_object.c 			zend_throw_exception_ex(spl_ce_BadMethodCallException, 0 TSRMLS_CC, "Unable to instantiate regex iterator for %s", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L1825'>phar_obj</a>         1825 ext/phar/phar_object.c 	pass.p = phar_obj;</span>
<span class='curline'><a href='../S/975.html#L1832'>phar_obj</a>         1832 ext/phar/phar_object.c 		zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\" unable to create temporary file", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L1836'>phar_obj</a>         1836 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;arc.archive) TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L1842'>phar_obj</a>         1842 ext/phar/phar_object.c 		zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L1853'>phar_obj</a>         1853 ext/phar/phar_object.c 		phar_obj-&gt;arc.archive-&gt;ufp = pass.fp;</span>
<span class='curline'><a href='../S/975.html#L1854'>phar_obj</a>         1854 ext/phar/phar_object.c 		phar_flush(phar_obj-&gt;arc.archive, 0, 0, 0, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L1891'>phar_obj</a>         1891 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L1901'>phar_obj</a>         1901 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;arc.archive) TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L1902'>phar_obj</a>         1902 ext/phar/phar_object.c 		zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L1909'>phar_obj</a>         1909 ext/phar/phar_object.c 	pass.p = phar_obj;</span>
<span class='curline'><a href='../S/975.html#L1916'>phar_obj</a>         1916 ext/phar/phar_object.c 		zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\": unable to create temporary file", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L1921'>phar_obj</a>         1921 ext/phar/phar_object.c 		phar_obj-&gt;arc.archive-&gt;ufp = pass.fp;</span>
<span class='curline'><a href='../S/975.html#L1922'>phar_obj</a>         1922 ext/phar/phar_object.c 		phar_flush(phar_obj-&gt;arc.archive, 0, 0, 0, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L1946'>phar_obj</a>         1946 ext/phar/phar_object.c 	RETURN_LONG(zend_hash_num_elements(&amp;phar_obj-&gt;arc.archive-&gt;manifest));</span>
<span class='curline'><a href='../S/975.html#L1965'>phar_obj</a>         1965 ext/phar/phar_object.c 			RETURN_BOOL(phar_obj-&gt;arc.archive-&gt;is_tar);</span>
<span class='curline'><a href='../S/975.html#L1967'>phar_obj</a>         1967 ext/phar/phar_object.c 			RETURN_BOOL(phar_obj-&gt;arc.archive-&gt;is_zip);</span>
<span class='curline'><a href='../S/975.html#L1969'>phar_obj</a>         1969 ext/phar/phar_object.c 			RETURN_BOOL(!phar_obj-&gt;arc.archive-&gt;is_tar &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_zip);</span>
<span class='curline'><a href='../S/975.html#L2388'>phar_obj</a>         2388 ext/phar/phar_object.c 			if (phar_obj-&gt;arc.archive-&gt;is_tar) {</span>
<span class='curline'><a href='../S/975.html#L2390'>phar_obj</a>         2390 ext/phar/phar_object.c 			} else if (phar_obj-&gt;arc.archive-&gt;is_zip) {</span>
<span class='curline'><a href='../S/975.html#L2408'>phar_obj</a>         2408 ext/phar/phar_object.c 			flags = phar_obj-&gt;arc.archive-&gt;flags &amp; PHAR_FILE_COMPRESSION_MASK;</span>
<span class='curline'><a href='../S/975.html#L2449'>phar_obj</a>         2449 ext/phar/phar_object.c 	is_data = phar_obj-&gt;arc.archive-&gt;is_data;</span>
<span class='curline'><a href='../S/975.html#L2450'>phar_obj</a>         2450 ext/phar/phar_object.c 	phar_obj-&gt;arc.archive-&gt;is_data = 0;</span>
<span class='curline'><a href='../S/975.html#L2451'>phar_obj</a>         2451 ext/phar/phar_object.c 	ret = phar_convert_to_other(phar_obj-&gt;arc.archive, format, ext, flags TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L2452'>phar_obj</a>         2452 ext/phar/phar_object.c 	phar_obj-&gt;arc.archive-&gt;is_data = is_data;</span>
<span class='curline'><a href='../S/975.html#L2485'>phar_obj</a>         2485 ext/phar/phar_object.c 			if (phar_obj-&gt;arc.archive-&gt;is_tar) {</span>
<span class='curline'><a href='../S/975.html#L2487'>phar_obj</a>         2487 ext/phar/phar_object.c 			} else if (phar_obj-&gt;arc.archive-&gt;is_zip) {</span>
<span class='curline'><a href='../S/975.html#L2510'>phar_obj</a>         2510 ext/phar/phar_object.c 			flags = phar_obj-&gt;arc.archive-&gt;flags &amp; PHAR_FILE_COMPRESSION_MASK;</span>
<span class='curline'><a href='../S/975.html#L2551'>phar_obj</a>         2551 ext/phar/phar_object.c 	is_data = phar_obj-&gt;arc.archive-&gt;is_data;</span>
<span class='curline'><a href='../S/975.html#L2552'>phar_obj</a>         2552 ext/phar/phar_object.c 	phar_obj-&gt;arc.archive-&gt;is_data = 1;</span>
<span class='curline'><a href='../S/975.html#L2553'>phar_obj</a>         2553 ext/phar/phar_object.c 	ret = phar_convert_to_other(phar_obj-&gt;arc.archive, format, ext, flags TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L2554'>phar_obj</a>         2554 ext/phar/phar_object.c 	phar_obj-&gt;arc.archive-&gt;is_data = is_data;</span>
<span class='curline'><a href='../S/975.html#L2576'>phar_obj</a>         2576 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;flags &amp; PHAR_FILE_COMPRESSED_GZ) {</span>
<span class='curline'><a href='../S/975.html#L2580'>phar_obj</a>         2580 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;flags &amp; PHAR_FILE_COMPRESSED_BZ2) {</span>
<span class='curline'><a href='../S/975.html#L2600'>phar_obj</a>         2600 ext/phar/phar_object.c 	if (!phar_obj-&gt;arc.archive-&gt;is_writeable) {</span>
<span class='curline'><a href='../S/975.html#L2604'>phar_obj</a>         2604 ext/phar/phar_object.c 	if (SUCCESS != php_stream_stat_path(phar_obj-&gt;arc.archive-&gt;fname, &amp;ssb)) {</span>
<span class='curline'><a href='../S/975.html#L2605'>phar_obj</a>         2605 ext/phar/phar_object.c 		if (phar_obj-&gt;arc.archive-&gt;is_brandnew) {</span>
<span class='curline'><a href='../S/975.html#L2627'>phar_obj</a>         2627 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L2637'>phar_obj</a>         2637 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;arc.archive) TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L2638'>phar_obj</a>         2638 ext/phar/phar_object.c 		zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L2641'>phar_obj</a>         2641 ext/phar/phar_object.c 	if (zend_hash_exists(&amp;phar_obj-&gt;arc.archive-&gt;manifest, fname, (uint) fname_len)) {</span>
<span class='curline'><a href='../S/975.html#L2642'>phar_obj</a>         2642 ext/phar/phar_object.c 		if (SUCCESS == zend_hash_find(&amp;phar_obj-&gt;arc.archive-&gt;manifest, fname, (uint) fname_len, (void**)&amp;entry)) {</span>
<span class='curline'><a href='../S/975.html#L2649'>phar_obj</a>         2649 ext/phar/phar_object.c 				phar_obj-&gt;arc.archive-&gt;is_modified = 1;</span>
<span class='curline'><a href='../S/975.html#L2657'>phar_obj</a>         2657 ext/phar/phar_object.c 	phar_flush(phar_obj-&gt;arc.archive, NULL, 0, 0, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L2678'>phar_obj</a>         2678 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;alias &amp;&amp; phar_obj-&gt;arc.archive-&gt;alias != phar_obj-&gt;arc.archive-&gt;fname) {</span>
<span class='curline'><a href='../S/975.html#L2679'>phar_obj</a>         2679 ext/phar/phar_object.c 		RETURN_STRINGL(phar_obj-&gt;arc.archive-&gt;alias, phar_obj-&gt;arc.archive-&gt;alias_len, 1);</span>
<span class='curline'><a href='../S/975.html#L2695'>phar_obj</a>         2695 ext/phar/phar_object.c 	RETURN_STRINGL(phar_obj-&gt;arc.archive-&gt;fname, phar_obj-&gt;arc.archive-&gt;fname_len, 1);</span>
<span class='curline'><a href='../S/975.html#L2711'>phar_obj</a>         2711 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L2721'>phar_obj</a>         2721 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L2722'>phar_obj</a>         2722 ext/phar/phar_object.c 		if (phar_obj-&gt;arc.archive-&gt;is_tar) {</span>
<span class='curline'><a href='../S/975.html#L2733'>phar_obj</a>         2733 ext/phar/phar_object.c 		if (alias_len == phar_obj-&gt;arc.archive-&gt;alias_len &amp;&amp; memcmp(phar_obj-&gt;arc.archive-&gt;alias, alias, alias_len) == 0) {</span>
<span class='curline'><a href='../S/975.html#L2748'>phar_obj</a>         2748 ext/phar/phar_object.c 				"Invalid alias \"%s\" specified for phar \"%s\"", alias, phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L2752'>phar_obj</a>         2752 ext/phar/phar_object.c 		if (phar_obj-&gt;arc.archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;arc.archive) TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L2753'>phar_obj</a>         2753 ext/phar/phar_object.c 			zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L2756'>phar_obj</a>         2756 ext/phar/phar_object.c 		if (phar_obj-&gt;arc.archive-&gt;alias_len &amp;&amp; SUCCESS == zend_hash_find(&amp;(PHAR_GLOBALS-&gt;phar_alias_map), phar_obj-&gt;arc.archive-&gt;alias, phar_obj-&gt;arc.archive-&gt;alias_len, (void**)&amp;fd_ptr)) {</span>
<span class='curline'><a href='../S/975.html#L2757'>phar_obj</a>         2757 ext/phar/phar_object.c 			zend_hash_del(&amp;(PHAR_GLOBALS-&gt;phar_alias_map), phar_obj-&gt;arc.archive-&gt;alias, phar_obj-&gt;arc.archive-&gt;alias_len);</span>
<span class='curline'><a href='../S/975.html#L2761'>phar_obj</a>         2761 ext/phar/phar_object.c 		oldalias = phar_obj-&gt;arc.archive-&gt;alias;</span>
<span class='curline'><a href='../S/975.html#L2762'>phar_obj</a>         2762 ext/phar/phar_object.c 		oldalias_len = phar_obj-&gt;arc.archive-&gt;alias_len;</span>
<span class='curline'><a href='../S/975.html#L2763'>phar_obj</a>         2763 ext/phar/phar_object.c 		old_temp = phar_obj-&gt;arc.archive-&gt;is_temporary_alias;</span>
<span class='curline'><a href='../S/975.html#L2766'>phar_obj</a>         2766 ext/phar/phar_object.c 			phar_obj-&gt;arc.archive-&gt;alias = estrndup(alias, alias_len);</span>
<span class='curline'><a href='../S/975.html#L2768'>phar_obj</a>         2768 ext/phar/phar_object.c 			phar_obj-&gt;arc.archive-&gt;alias = NULL;</span>
<span class='curline'><a href='../S/975.html#L2771'>phar_obj</a>         2771 ext/phar/phar_object.c 		phar_obj-&gt;arc.archive-&gt;alias_len = alias_len;</span>
<span class='curline'><a href='../S/975.html#L2772'>phar_obj</a>         2772 ext/phar/phar_object.c 		phar_obj-&gt;arc.archive-&gt;is_temporary_alias = 0;</span>
<span class='curline'><a href='../S/975.html#L2773'>phar_obj</a>         2773 ext/phar/phar_object.c 		phar_flush(phar_obj-&gt;arc.archive, NULL, 0, 0, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L2776'>phar_obj</a>         2776 ext/phar/phar_object.c 			phar_obj-&gt;arc.archive-&gt;alias = oldalias;</span>
<span class='curline'><a href='../S/975.html#L2777'>phar_obj</a>         2777 ext/phar/phar_object.c 			phar_obj-&gt;arc.archive-&gt;alias_len = oldalias_len;</span>
<span class='curline'><a href='../S/975.html#L2778'>phar_obj</a>         2778 ext/phar/phar_object.c 			phar_obj-&gt;arc.archive-&gt;is_temporary_alias = old_temp;</span>
<span class='curline'><a href='../S/975.html#L2781'>phar_obj</a>         2781 ext/phar/phar_object.c 				zend_hash_add(&amp;(PHAR_GLOBALS-&gt;phar_alias_map), oldalias, oldalias_len, (void*)&amp;(phar_obj-&gt;arc.archive), sizeof(phar_archive_data*), NULL);</span>
<span class='curline'><a href='../S/975.html#L2787'>phar_obj</a>         2787 ext/phar/phar_object.c 		zend_hash_add(&amp;(PHAR_GLOBALS-&gt;phar_alias_map), alias, alias_len, (void*)&amp;(phar_obj-&gt;arc.archive), sizeof(phar_archive_data*), NULL);</span>
<span class='curline'><a href='../S/975.html#L2811'>phar_obj</a>         2811 ext/phar/phar_object.c 	RETURN_STRING(phar_obj-&gt;arc.archive-&gt;version, 1);</span>
<span class='curline'><a href='../S/975.html#L2826'>phar_obj</a>         2826 ext/phar/phar_object.c 	phar_obj-&gt;arc.archive-&gt;donotflush = 1;</span>
<span class='curline'><a href='../S/975.html#L2841'>phar_obj</a>         2841 ext/phar/phar_object.c 	RETURN_BOOL(phar_obj-&gt;arc.archive-&gt;donotflush);</span>
<span class='curline'><a href='../S/975.html#L2858'>phar_obj</a>         2858 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L2864'>phar_obj</a>         2864 ext/phar/phar_object.c 	phar_obj-&gt;arc.archive-&gt;donotflush = 0;</span>
<span class='curline'><a href='../S/975.html#L2865'>phar_obj</a>         2865 ext/phar/phar_object.c 	phar_flush(phar_obj-&gt;arc.archive, 0, 0, 0, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L2887'>phar_obj</a>         2887 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L2893'>phar_obj</a>         2893 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L2894'>phar_obj</a>         2894 ext/phar/phar_object.c 		if (phar_obj-&gt;arc.archive-&gt;is_tar) {</span>
<span class='curline'><a href='../S/975.html#L2911'>phar_obj</a>         2911 ext/phar/phar_object.c 			if (phar_obj-&gt;arc.archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;arc.archive) TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L2912'>phar_obj</a>         2912 ext/phar/phar_object.c 				zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L2915'>phar_obj</a>         2915 ext/phar/phar_object.c 			phar_flush(phar_obj-&gt;arc.archive, (char *) &amp;zstub, len, 0, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L2926'>phar_obj</a>         2926 ext/phar/phar_object.c 		if (phar_obj-&gt;arc.archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;arc.archive) TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L2927'>phar_obj</a>         2927 ext/phar/phar_object.c 			zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L2930'>phar_obj</a>         2930 ext/phar/phar_object.c 		phar_flush(phar_obj-&gt;arc.archive, stub, stub_len, 0, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L2964'>phar_obj</a>         2964 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L2965'>phar_obj</a>         2965 ext/phar/phar_object.c 		if (phar_obj-&gt;arc.archive-&gt;is_tar) {</span>
<span class='curline'><a href='../S/975.html#L2979'>phar_obj</a>         2979 ext/phar/phar_object.c 	if (ZEND_NUM_ARGS() &gt; 0 &amp;&amp; (phar_obj-&gt;arc.archive-&gt;is_tar || phar_obj-&gt;arc.archive-&gt;is_zip)) {</span>
<span class='curline'><a href='../S/975.html#L2990'>phar_obj</a>         2990 ext/phar/phar_object.c 	if (!phar_obj-&gt;arc.archive-&gt;is_tar &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_zip) {</span>
<span class='curline'><a href='../S/975.html#L3005'>phar_obj</a>         3005 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;arc.archive) TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L3006'>phar_obj</a>         3006 ext/phar/phar_object.c 		zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3009'>phar_obj</a>         3009 ext/phar/phar_object.c 	phar_flush(phar_obj-&gt;arc.archive, stub, stub_len, 1, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3039'>phar_obj</a>         3039 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L3060'>phar_obj</a>         3060 ext/phar/phar_object.c 			if (phar_obj-&gt;arc.archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;arc.archive) TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L3061'>phar_obj</a>         3061 ext/phar/phar_object.c 				zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3064'>phar_obj</a>         3064 ext/phar/phar_object.c 			phar_obj-&gt;arc.archive-&gt;sig_flags = algo;</span>
<span class='curline'><a href='../S/975.html#L3065'>phar_obj</a>         3065 ext/phar/phar_object.c 			phar_obj-&gt;arc.archive-&gt;is_modified = 1;</span>
<span class='curline'><a href='../S/975.html#L3069'>phar_obj</a>         3069 ext/phar/phar_object.c 			phar_flush(phar_obj-&gt;arc.archive, 0, 0, 0, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3093'>phar_obj</a>         3093 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;signature) {</span>
<span class='curline'><a href='../S/975.html#L3098'>phar_obj</a>         3098 ext/phar/phar_object.c 		add_assoc_stringl(return_value, "hash", phar_obj-&gt;arc.archive-&gt;signature, phar_obj-&gt;arc.archive-&gt;sig_len, 1);</span>
<span class='curline'><a href='../S/975.html#L3099'>phar_obj</a>         3099 ext/phar/phar_object.c 		switch(phar_obj-&gt;arc.archive-&gt;sig_flags) {</span>
<span class='curline'><a href='../S/975.html#L3116'>phar_obj</a>         3116 ext/phar/phar_object.c 				unknown_len = spprintf(&amp;unknown, 0, "Unknown (%u)", phar_obj-&gt;arc.archive-&gt;sig_flags);</span>
<span class='curline'><a href='../S/975.html#L3137'>phar_obj</a>         3137 ext/phar/phar_object.c 	RETURN_BOOL(phar_obj-&gt;arc.archive-&gt;is_modified);</span>
<span class='curline'><a href='../S/975.html#L3216'>phar_obj</a>         3216 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L3222'>phar_obj</a>         3222 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_zip) {</span>
<span class='curline'><a href='../S/975.html#L3255'>phar_obj</a>         3255 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_tar) {</span>
<span class='curline'><a href='../S/975.html#L3256'>phar_obj</a>         3256 ext/phar/phar_object.c 		ret = phar_convert_to_other(phar_obj-&gt;arc.archive, PHAR_FORMAT_TAR, ext, flags TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3258'>phar_obj</a>         3258 ext/phar/phar_object.c 		ret = phar_convert_to_other(phar_obj-&gt;arc.archive, PHAR_FORMAT_PHAR, ext, flags TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3283'>phar_obj</a>         3283 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L3289'>phar_obj</a>         3289 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_zip) {</span>
<span class='curline'><a href='../S/975.html#L3295'>phar_obj</a>         3295 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_tar) {</span>
<span class='curline'><a href='../S/975.html#L3296'>phar_obj</a>         3296 ext/phar/phar_object.c 		ret = phar_convert_to_other(phar_obj-&gt;arc.archive, PHAR_FORMAT_TAR, ext, PHAR_FILE_COMPRESSED_NONE TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3298'>phar_obj</a>         3298 ext/phar/phar_object.c 		ret = phar_convert_to_other(phar_obj-&gt;arc.archive, PHAR_FORMAT_PHAR, ext, PHAR_FILE_COMPRESSED_NONE TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3325'>phar_obj</a>         3325 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L3355'>phar_obj</a>         3355 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_tar) {</span>
<span class='curline'><a href='../S/975.html#L3361'>phar_obj</a>         3361 ext/phar/phar_object.c 	if (!pharobj_cancompress(&amp;phar_obj-&gt;arc.archive-&gt;manifest TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L3372'>phar_obj</a>         3372 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;arc.archive) TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L3373'>phar_obj</a>         3373 ext/phar/phar_object.c 		zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3376'>phar_obj</a>         3376 ext/phar/phar_object.c 	pharobj_set_compression(&amp;phar_obj-&gt;arc.archive-&gt;manifest, flags TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3377'>phar_obj</a>         3377 ext/phar/phar_object.c 	phar_obj-&gt;arc.archive-&gt;is_modified = 1;</span>
<span class='curline'><a href='../S/975.html#L3378'>phar_obj</a>         3378 ext/phar/phar_object.c 	phar_flush(phar_obj-&gt;arc.archive, 0, 0, 0, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3399'>phar_obj</a>         3399 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L3405'>phar_obj</a>         3405 ext/phar/phar_object.c 	if (!pharobj_cancompress(&amp;phar_obj-&gt;arc.archive-&gt;manifest TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L3411'>phar_obj</a>         3411 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_tar) {</span>
<span class='curline'><a href='../S/975.html#L3414'>phar_obj</a>         3414 ext/phar/phar_object.c 		if (phar_obj-&gt;arc.archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;arc.archive) TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L3415'>phar_obj</a>         3415 ext/phar/phar_object.c 			zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3418'>phar_obj</a>         3418 ext/phar/phar_object.c 		pharobj_set_compression(&amp;phar_obj-&gt;arc.archive-&gt;manifest, PHAR_ENT_COMPRESSED_NONE TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3421'>phar_obj</a>         3421 ext/phar/phar_object.c 	phar_obj-&gt;arc.archive-&gt;is_modified = 1;</span>
<span class='curline'><a href='../S/975.html#L3422'>phar_obj</a>         3422 ext/phar/phar_object.c 	phar_flush(phar_obj-&gt;arc.archive, 0, 0, 0, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3449'>phar_obj</a>         3449 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L3458'>phar_obj</a>         3458 ext/phar/phar_object.c 			"file \"%s\" cannot be copied to file \"%s\", cannot copy Phar meta-file in %s", oldfile, newfile, phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3465'>phar_obj</a>         3465 ext/phar/phar_object.c 			"file \"%s\" cannot be copied to file \"%s\", cannot copy to Phar meta-file in %s", oldfile, newfile, phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3469'>phar_obj</a>         3469 ext/phar/phar_object.c 	if (!zend_hash_exists(&amp;phar_obj-&gt;arc.archive-&gt;manifest, oldfile, (uint) oldfile_len) || SUCCESS != zend_hash_find(&amp;phar_obj-&gt;arc.archive-&gt;manifest, oldfile, (uint) oldfile_len, (void**)&amp;oldentry) || oldentry-&gt;is_deleted) {</span>
<span class='curline'><a href='../S/975.html#L3471'>phar_obj</a>         3471 ext/phar/phar_object.c 			"file \"%s\" cannot be copied to file \"%s\", file does not exist in %s", oldfile, newfile, phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3475'>phar_obj</a>         3475 ext/phar/phar_object.c 	if (zend_hash_exists(&amp;phar_obj-&gt;arc.archive-&gt;manifest, newfile, (uint) newfile_len)) {</span>
<span class='curline'><a href='../S/975.html#L3476'>phar_obj</a>         3476 ext/phar/phar_object.c 		if (SUCCESS == zend_hash_find(&amp;phar_obj-&gt;arc.archive-&gt;manifest, newfile, (uint) newfile_len, (void**)&amp;temp) || !temp-&gt;is_deleted) {</span>
<span class='curline'><a href='../S/975.html#L3478'>phar_obj</a>         3478 ext/phar/phar_object.c 				"file \"%s\" cannot be copied to file \"%s\", file must not already exist in phar %s", oldfile, newfile, phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3485'>phar_obj</a>         3485 ext/phar/phar_object.c 				"file \"%s\" contains invalid characters %s, cannot be copied from \"%s\" in phar %s", newfile, pcr_error, oldfile, phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3489'>phar_obj</a>         3489 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_persistent) {</span>
<span class='curline'><a href='../S/975.html#L3490'>phar_obj</a>         3490 ext/phar/phar_object.c 		if (FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;arc.archive) TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L3491'>phar_obj</a>         3491 ext/phar/phar_object.c 			zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3495'>phar_obj</a>         3495 ext/phar/phar_object.c 		zend_hash_find(&amp;phar_obj-&gt;arc.archive-&gt;manifest, oldfile, (uint) oldfile_len, (void**)&amp;oldentry);</span>
<span class='curline'><a href='../S/975.html#L3528'>phar_obj</a>         3528 ext/phar/phar_object.c 	phar_obj-&gt;arc.archive-&gt;is_modified = 1;</span>
<span class='curline'><a href='../S/975.html#L3529'>phar_obj</a>         3529 ext/phar/phar_object.c 	phar_flush(phar_obj-&gt;arc.archive, 0, 0, 0, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3555'>phar_obj</a>         3555 ext/phar/phar_object.c 	if (zend_hash_exists(&amp;phar_obj-&gt;arc.archive-&gt;manifest, fname, (uint) fname_len)) {</span>
<span class='curline'><a href='../S/975.html#L3556'>phar_obj</a>         3556 ext/phar/phar_object.c 		if (SUCCESS == zend_hash_find(&amp;phar_obj-&gt;arc.archive-&gt;manifest, fname, (uint) fname_len, (void**)&amp;entry)) {</span>
<span class='curline'><a href='../S/975.html#L3569'>phar_obj</a>         3569 ext/phar/phar_object.c 		if (zend_hash_exists(&amp;phar_obj-&gt;arc.archive-&gt;virtual_dirs, fname, (uint) fname_len)) {</span>
<span class='curline'><a href='../S/975.html#L3593'>phar_obj</a>         3593 ext/phar/phar_object.c 	if (!(entry = phar_get_entry_info_dir(phar_obj-&gt;arc.archive, fname, fname_len, 1, &amp;error, 0 TSRMLS_CC))) {</span>
<span class='curline'><a href='../S/975.html#L3597'>phar_obj</a>         3597 ext/phar/phar_object.c 			zend_throw_exception_ex(spl_ce_BadMethodCallException, 0 TSRMLS_CC, "Cannot get stub \".phar/stub.php\" directly in phar \"%s\", use getStub", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3602'>phar_obj</a>         3602 ext/phar/phar_object.c 			zend_throw_exception_ex(spl_ce_BadMethodCallException, 0 TSRMLS_CC, "Cannot get alias \".phar/alias.txt\" directly in phar \"%s\", use getAlias", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3607'>phar_obj</a>         3607 ext/phar/phar_object.c 			zend_throw_exception_ex(spl_ce_BadMethodCallException, 0 TSRMLS_CC, "Cannot directly get any files or directories in magic \".phar\" directory", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3616'>phar_obj</a>         3616 ext/phar/phar_object.c 		fname_len = spprintf(&amp;fname, 0, "phar://%s/%s", phar_obj-&gt;arc.archive-&gt;fname, fname);</span>
<span class='curline'><a href='../S/975.html#L3619'>phar_obj</a>         3619 ext/phar/phar_object.c 		spl_instantiate_arg_ex1(phar_obj-&gt;spl.info_class, &amp;return_value, 0, zfname TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3731'>phar_obj</a>         3731 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L3742'>phar_obj</a>         3742 ext/phar/phar_object.c 		zend_throw_exception_ex(spl_ce_BadMethodCallException, 0 TSRMLS_CC, "Cannot set stub \".phar/stub.php\" directly in phar \"%s\", use setStub", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3747'>phar_obj</a>         3747 ext/phar/phar_object.c 		zend_throw_exception_ex(spl_ce_BadMethodCallException, 0 TSRMLS_CC, "Cannot set alias \".phar/alias.txt\" directly in phar \"%s\", use setAlias", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3752'>phar_obj</a>         3752 ext/phar/phar_object.c 		zend_throw_exception_ex(spl_ce_BadMethodCallException, 0 TSRMLS_CC, "Cannot set any files or directories in magic \".phar\" directory", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3756'>phar_obj</a>         3756 ext/phar/phar_object.c 	phar_add_file(&amp;(phar_obj-&gt;arc.archive), fname, fname_len, cont_str, cont_len, zresource TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3770'>phar_obj</a>         3770 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L3779'>phar_obj</a>         3779 ext/phar/phar_object.c 	if (zend_hash_exists(&amp;phar_obj-&gt;arc.archive-&gt;manifest, fname, (uint) fname_len)) {</span>
<span class='curline'><a href='../S/975.html#L3780'>phar_obj</a>         3780 ext/phar/phar_object.c 		if (SUCCESS == zend_hash_find(&amp;phar_obj-&gt;arc.archive-&gt;manifest, fname, (uint) fname_len, (void**)&amp;entry)) {</span>
<span class='curline'><a href='../S/975.html#L3786'>phar_obj</a>         3786 ext/phar/phar_object.c 			if (phar_obj-&gt;arc.archive-&gt;is_persistent) {</span>
<span class='curline'><a href='../S/975.html#L3787'>phar_obj</a>         3787 ext/phar/phar_object.c 				if (FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;arc.archive) TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L3788'>phar_obj</a>         3788 ext/phar/phar_object.c 					zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3792'>phar_obj</a>         3792 ext/phar/phar_object.c 				zend_hash_find(&amp;phar_obj-&gt;arc.archive-&gt;manifest, fname, (uint) fname_len, (void **)&amp;entry);</span>
<span class='curline'><a href='../S/975.html#L3797'>phar_obj</a>         3797 ext/phar/phar_object.c 			phar_flush(phar_obj-&gt;arc.archive, 0, 0, 0, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3831'>phar_obj</a>         3831 ext/phar/phar_object.c 	phar_mkdir(&amp;phar_obj-&gt;arc.archive, dirname, dirname_len TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3875'>phar_obj</a>         3875 ext/phar/phar_object.c 	phar_add_file(&amp;(phar_obj-&gt;arc.archive), fname, fname_len, NULL, 0, zresource TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3895'>phar_obj</a>         3895 ext/phar/phar_object.c 	phar_add_file(&amp;(phar_obj-&gt;arc.archive), localname, localname_len, cont_str, cont_len, NULL TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L3916'>phar_obj</a>         3916 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_tar || phar_obj-&gt;arc.archive-&gt;is_zip) {</span>
<span class='curline'><a href='../S/975.html#L3918'>phar_obj</a>         3918 ext/phar/phar_object.c 		if (SUCCESS == zend_hash_find(&amp;(phar_obj-&gt;arc.archive-&gt;manifest), ".phar/stub.php", sizeof(".phar/stub.php")-1, (void **)&amp;stub)) {</span>
<span class='curline'><a href='../S/975.html#L3919'>phar_obj</a>         3919 ext/phar/phar_object.c 			if (phar_obj-&gt;arc.archive-&gt;fp &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_brandnew &amp;&amp; !(stub-&gt;flags &amp; PHAR_ENT_COMPRESSION_MASK)) {</span>
<span class='curline'><a href='../S/975.html#L3920'>phar_obj</a>         3920 ext/phar/phar_object.c 				fp = phar_obj-&gt;arc.archive-&gt;fp;</span>
<span class='curline'><a href='../S/975.html#L3922'>phar_obj</a>         3922 ext/phar/phar_object.c 				if (!(fp = php_stream_open_wrapper(phar_obj-&gt;arc.archive-&gt;fname, "rb", 0, NULL))) {</span>
<span class='curline'><a href='../S/975.html#L3923'>phar_obj</a>         3923 ext/phar/phar_object.c 					zend_throw_exception_ex(spl_ce_UnexpectedValueException, 0 TSRMLS_CC, "phar error: unable to open phar \"%s\"", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3935'>phar_obj</a>         3935 ext/phar/phar_object.c 						zend_throw_exception_ex(spl_ce_UnexpectedValueException, 0 TSRMLS_CC, "phar error: unable to read stub of phar \"%s\" (cannot create %s filter)", phar_obj-&gt;arc.archive-&gt;fname, phar_decompress_filter(stub, 1));</span>
<span class='curline'><a href='../S/975.html#L3955'>phar_obj</a>         3955 ext/phar/phar_object.c 	len = phar_obj-&gt;arc.archive-&gt;halt_offset;</span>
<span class='curline'><a href='../S/975.html#L3957'>phar_obj</a>         3957 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;fp &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_brandnew) {</span>
<span class='curline'><a href='../S/975.html#L3958'>phar_obj</a>         3958 ext/phar/phar_object.c 		fp = phar_obj-&gt;arc.archive-&gt;fp;</span>
<span class='curline'><a href='../S/975.html#L3960'>phar_obj</a>         3960 ext/phar/phar_object.c 		fp = php_stream_open_wrapper(phar_obj-&gt;arc.archive-&gt;fname, "rb", 0, NULL);</span>
<span class='curline'><a href='../S/975.html#L3974'>phar_obj</a>         3974 ext/phar/phar_object.c 		if (fp != phar_obj-&gt;arc.archive-&gt;fp) {</span>
<span class='curline'><a href='../S/975.html#L3988'>phar_obj</a>         3988 ext/phar/phar_object.c 	if (fp != phar_obj-&gt;arc.archive-&gt;fp) {</span>
<span class='curline'><a href='../S/975.html#L4004'>phar_obj</a>         4004 ext/phar/phar_object.c 	RETURN_BOOL(phar_obj-&gt;arc.archive-&gt;metadata != NULL);</span>
<span class='curline'><a href='../S/975.html#L4019'>phar_obj</a>         4019 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;metadata) {</span>
<span class='curline'><a href='../S/975.html#L4020'>phar_obj</a>         4020 ext/phar/phar_object.c 		if (phar_obj-&gt;arc.archive-&gt;is_persistent) {</span>
<span class='curline'><a href='../S/975.html#L4022'>phar_obj</a>         4022 ext/phar/phar_object.c 			char *buf = estrndup((char *) phar_obj-&gt;arc.archive-&gt;metadata, phar_obj-&gt;arc.archive-&gt;metadata_len);</span>
<span class='curline'><a href='../S/975.html#L4024'>phar_obj</a>         4024 ext/phar/phar_object.c 			phar_parse_metadata(&amp;buf, &amp;ret, phar_obj-&gt;arc.archive-&gt;metadata_len TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L4028'>phar_obj</a>         4028 ext/phar/phar_object.c 		RETURN_ZVAL(phar_obj-&gt;arc.archive-&gt;metadata, 1, 0);</span>
<span class='curline'><a href='../S/975.html#L4043'>phar_obj</a>         4043 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L4052'>phar_obj</a>         4052 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;arc.archive) TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L4053'>phar_obj</a>         4053 ext/phar/phar_object.c 		zend_throw_exception_ex(phar_ce_PharException, 0 TSRMLS_CC, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L4056'>phar_obj</a>         4056 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;metadata) {</span>
<span class='curline'><a href='../S/975.html#L4057'>phar_obj</a>         4057 ext/phar/phar_object.c 		zval_ptr_dtor(&amp;phar_obj-&gt;arc.archive-&gt;metadata);</span>
<span class='curline'><a href='../S/975.html#L4058'>phar_obj</a>         4058 ext/phar/phar_object.c 		phar_obj-&gt;arc.archive-&gt;metadata = NULL;</span>
<span class='curline'><a href='../S/975.html#L4061'>phar_obj</a>         4061 ext/phar/phar_object.c 	MAKE_STD_ZVAL(phar_obj-&gt;arc.archive-&gt;metadata);</span>
<span class='curline'><a href='../S/975.html#L4062'>phar_obj</a>         4062 ext/phar/phar_object.c 	ZVAL_ZVAL(phar_obj-&gt;arc.archive-&gt;metadata, metadata, 1, 0);</span>
<span class='curline'><a href='../S/975.html#L4063'>phar_obj</a>         4063 ext/phar/phar_object.c 	phar_obj-&gt;arc.archive-&gt;is_modified = 1;</span>
<span class='curline'><a href='../S/975.html#L4064'>phar_obj</a>         4064 ext/phar/phar_object.c 	phar_flush(phar_obj-&gt;arc.archive, 0, 0, 0, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L4082'>phar_obj</a>         4082 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;arc.archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/975.html#L4087'>phar_obj</a>         4087 ext/phar/phar_object.c 	if (phar_obj-&gt;arc.archive-&gt;metadata) {</span>
<span class='curline'><a href='../S/975.html#L4088'>phar_obj</a>         4088 ext/phar/phar_object.c 		zval_ptr_dtor(&amp;phar_obj-&gt;arc.archive-&gt;metadata);</span>
<span class='curline'><a href='../S/975.html#L4089'>phar_obj</a>         4089 ext/phar/phar_object.c 		phar_obj-&gt;arc.archive-&gt;metadata = NULL;</span>
<span class='curline'><a href='../S/975.html#L4090'>phar_obj</a>         4090 ext/phar/phar_object.c 		phar_obj-&gt;arc.archive-&gt;is_modified = 1;</span>
<span class='curline'><a href='../S/975.html#L4091'>phar_obj</a>         4091 ext/phar/phar_object.c 		phar_flush(phar_obj-&gt;arc.archive, 0, 0, 0, &amp;error TSRMLS_CC);</span>
<span class='curline'><a href='../S/975.html#L4322'>phar_obj</a>         4322 ext/phar/phar_object.c 	fp = php_stream_open_wrapper(phar_obj-&gt;arc.archive-&gt;fname, "rb", IGNORE_URL|STREAM_MUST_SEEK, &amp;actual);</span>
<span class='curline'><a href='../S/975.html#L4326'>phar_obj</a>         4326 ext/phar/phar_object.c 			"Invalid argument, %s cannot be found", phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L4384'>phar_obj</a>         4384 ext/phar/phar_object.c 						if (FAILURE == zend_hash_find(&amp;phar_obj-&gt;arc.archive-&gt;manifest, Z_STRVAL_PP(zval_file), Z_STRLEN_PP(zval_file), (void **)&amp;entry)) {</span>
<span class='curline'><a href='../S/975.html#L4386'>phar_obj</a>         4386 ext/phar/phar_object.c 								"Phar Error: attempted to extract non-existent file \"%s\" from phar \"%s\"", Z_STRVAL_PP(zval_file), phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L4390'>phar_obj</a>         4390 ext/phar/phar_object.c 								"Extraction from phar \"%s\" failed: %s", phar_obj-&gt;arc.archive-&gt;fname, error);</span>
<span class='curline'><a href='../S/975.html#L4403'>phar_obj</a>         4403 ext/phar/phar_object.c 		if (FAILURE == zend_hash_find(&amp;phar_obj-&gt;arc.archive-&gt;manifest, filename, filename_len, (void **)&amp;entry)) {</span>
<span class='curline'><a href='../S/975.html#L4405'>phar_obj</a>         4405 ext/phar/phar_object.c 				"Phar Error: attempted to extract non-existent file \"%s\" from phar \"%s\"", filename, phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L4411'>phar_obj</a>         4411 ext/phar/phar_object.c 				"Extraction from phar \"%s\" failed: %s", phar_obj-&gt;arc.archive-&gt;fname, error);</span>
<span class='curline'><a href='../S/975.html#L4418'>phar_obj</a>         4418 ext/phar/phar_object.c 		phar = phar_obj-&gt;arc.archive;</span>
</pre>
</body>
</html>
