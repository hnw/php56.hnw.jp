<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>shmop</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/1007.html#L27'>shmop</a>              27 ext/shmop/php_shmop.h PHP_MINIT_FUNCTION(shmop);</span>
<span class='curline'><a href='../S/1007.html#L28'>shmop</a>              28 ext/shmop/php_shmop.h PHP_MINFO_FUNCTION(shmop);</span>
<span class='curline'><a href='../S/1008.html#L100'>shmop</a>             100 ext/shmop/shmop.c 	PHP_MINIT(shmop),</span>
<span class='curline'><a href='../S/1008.html#L104'>shmop</a>             104 ext/shmop/shmop.c 	PHP_MINFO(shmop),</span>
<span class='curline'><a href='../S/1008.html#L111'>shmop</a>             111 ext/shmop/shmop.c ZEND_GET_MODULE(shmop)</span>
<span class='curline'><a href='../S/1008.html#L115'>shmop</a>             115 ext/shmop/shmop.c 	shmop = zend_list_find(shmid, &amp;type);	\</span>
<span class='curline'><a href='../S/1008.html#L116'>shmop</a>             116 ext/shmop/shmop.c 	if (!shmop) {	\</span>
<span class='curline'><a href='../S/1008.html#L128'>shmop</a>             128 ext/shmop/shmop.c 	struct php_shmop *shmop = (struct php_shmop *)rsrc-&gt;ptr;</span>
<span class='curline'><a href='../S/1008.html#L130'>shmop</a>             130 ext/shmop/shmop.c 	shmdt(shmop-&gt;addr);</span>
<span class='curline'><a href='../S/1008.html#L131'>shmop</a>             131 ext/shmop/shmop.c 	efree(shmop);</span>
<span class='curline'><a href='../S/1008.html#L137'>shmop</a>             137 ext/shmop/shmop.c PHP_MINIT_FUNCTION(shmop)</span>
<span class='curline'><a href='../S/1008.html#L147'>shmop</a>             147 ext/shmop/shmop.c PHP_MINFO_FUNCTION(shmop)</span>
<span class='curline'><a href='../S/1008.html#L160'>shmop</a>             160 ext/shmop/shmop.c 	struct php_shmop *shmop;	</span>
<span class='curline'><a href='../S/1008.html#L175'>shmop</a>             175 ext/shmop/shmop.c 	shmop = emalloc(sizeof(struct php_shmop));</span>
<span class='curline'><a href='../S/1008.html#L176'>shmop</a>             176 ext/shmop/shmop.c 	memset(shmop, 0, sizeof(struct php_shmop));</span>
<span class='curline'><a href='../S/1008.html#L178'>shmop</a>             178 ext/shmop/shmop.c 	shmop-&gt;key = key;</span>
<span class='curline'><a href='../S/1008.html#L179'>shmop</a>             179 ext/shmop/shmop.c 	shmop-&gt;shmflg |= mode;</span>
<span class='curline'><a href='../S/1008.html#L184'>shmop</a>             184 ext/shmop/shmop.c 			shmop-&gt;shmatflg |= SHM_RDONLY;</span>
<span class='curline'><a href='../S/1008.html#L187'>shmop</a>             187 ext/shmop/shmop.c 			shmop-&gt;shmflg |= IPC_CREAT;</span>
<span class='curline'><a href='../S/1008.html#L188'>shmop</a>             188 ext/shmop/shmop.c 			shmop-&gt;size = size;</span>
<span class='curline'><a href='../S/1008.html#L191'>shmop</a>             191 ext/shmop/shmop.c 			shmop-&gt;shmflg |= (IPC_CREAT | IPC_EXCL);</span>
<span class='curline'><a href='../S/1008.html#L192'>shmop</a>             192 ext/shmop/shmop.c 			shmop-&gt;size = size;</span>
<span class='curline'><a href='../S/1008.html#L205'>shmop</a>             205 ext/shmop/shmop.c 	if (shmop-&gt;shmflg &amp; IPC_CREAT &amp;&amp; shmop-&gt;size &lt; 1) {</span>
<span class='curline'><a href='../S/1008.html#L210'>shmop</a>             210 ext/shmop/shmop.c 	shmop-&gt;shmid = shmget(shmop-&gt;key, shmop-&gt;size, shmop-&gt;shmflg);</span>
<span class='curline'><a href='../S/1008.html#L211'>shmop</a>             211 ext/shmop/shmop.c 	if (shmop-&gt;shmid == -1) {</span>
<span class='curline'><a href='../S/1008.html#L216'>shmop</a>             216 ext/shmop/shmop.c 	if (shmctl(shmop-&gt;shmid, IPC_STAT, &amp;shm)) {</span>
<span class='curline'><a href='../S/1008.html#L221'>shmop</a>             221 ext/shmop/shmop.c 	shmop-&gt;addr = shmat(shmop-&gt;shmid, 0, shmop-&gt;shmatflg);</span>
<span class='curline'><a href='../S/1008.html#L222'>shmop</a>             222 ext/shmop/shmop.c 	if (shmop-&gt;addr == (char*) -1) {</span>
<span class='curline'><a href='../S/1008.html#L227'>shmop</a>             227 ext/shmop/shmop.c 	shmop-&gt;size = shm.shm_segsz;</span>
<span class='curline'><a href='../S/1008.html#L229'>shmop</a>             229 ext/shmop/shmop.c 	rsid = zend_list_insert(shmop, shm_type TSRMLS_CC);</span>
<span class='curline'><a href='../S/1008.html#L232'>shmop</a>             232 ext/shmop/shmop.c 	efree(shmop);</span>
<span class='curline'><a href='../S/1008.html#L242'>shmop</a>             242 ext/shmop/shmop.c 	struct php_shmop *shmop;</span>
<span class='curline'><a href='../S/1008.html#L254'>shmop</a>             254 ext/shmop/shmop.c 	if (start &lt; 0 || start &gt; shmop-&gt;size) {</span>
<span class='curline'><a href='../S/1008.html#L259'>shmop</a>             259 ext/shmop/shmop.c 	if (count &lt; 0 || start &gt; (INT_MAX - count) || start + count &gt; shmop-&gt;size) {</span>
<span class='curline'><a href='../S/1008.html#L264'>shmop</a>             264 ext/shmop/shmop.c 	startaddr = shmop-&gt;addr + start;</span>
<span class='curline'><a href='../S/1008.html#L265'>shmop</a>             265 ext/shmop/shmop.c 	bytes = count ? count : shmop-&gt;size - start;</span>
<span class='curline'><a href='../S/1008.html#L280'>shmop</a>             280 ext/shmop/shmop.c 	struct php_shmop *shmop;</span>
<span class='curline'><a href='../S/1008.html#L298'>shmop</a>             298 ext/shmop/shmop.c 	struct php_shmop *shmop;</span>
<span class='curline'><a href='../S/1008.html#L307'>shmop</a>             307 ext/shmop/shmop.c 	RETURN_LONG(shmop-&gt;size);</span>
<span class='curline'><a href='../S/1008.html#L315'>shmop</a>             315 ext/shmop/shmop.c 	struct php_shmop *shmop;</span>
<span class='curline'><a href='../S/1008.html#L328'>shmop</a>             328 ext/shmop/shmop.c 	if ((shmop-&gt;shmatflg &amp; SHM_RDONLY) == SHM_RDONLY) {</span>
<span class='curline'><a href='../S/1008.html#L333'>shmop</a>             333 ext/shmop/shmop.c 	if (offset &lt; 0 || offset &gt; shmop-&gt;size) {</span>
<span class='curline'><a href='../S/1008.html#L338'>shmop</a>             338 ext/shmop/shmop.c 	writesize = (data_len &lt; shmop-&gt;size - offset) ? data_len : shmop-&gt;size - offset;</span>
<span class='curline'><a href='../S/1008.html#L339'>shmop</a>             339 ext/shmop/shmop.c 	memcpy(shmop-&gt;addr + offset, data, writesize);</span>
<span class='curline'><a href='../S/1008.html#L350'>shmop</a>             350 ext/shmop/shmop.c 	struct php_shmop *shmop;</span>
<span class='curline'><a href='../S/1008.html#L359'>shmop</a>             359 ext/shmop/shmop.c 	if (shmctl(shmop-&gt;shmid, IPC_RMID, NULL)) {</span>
</pre>
</body>
</html>
