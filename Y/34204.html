<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>querystr</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/967.html#L2452'>querystr</a>         2452 ext/pgsql/pgsql.c 		smart_str querystr = {0};</span>
<span class='curline'><a href='../S/967.html#L2455'>querystr</a>         2455 ext/pgsql/pgsql.c 		smart_str_appends(&amp;querystr, "select relname from pg_class where oid=");</span>
<span class='curline'><a href='../S/967.html#L2456'>querystr</a>         2456 ext/pgsql/pgsql.c 		smart_str_append_unsigned(&amp;querystr, oid);</span>
<span class='curline'><a href='../S/967.html#L2457'>querystr</a>         2457 ext/pgsql/pgsql.c 		smart_str_0(&amp;querystr);</span>
<span class='curline'><a href='../S/967.html#L2459'>querystr</a>         2459 ext/pgsql/pgsql.c 		if ((tmp_res = PQexec(pg_result-&gt;conn, querystr.c)) == NULL || PQresultStatus(tmp_res) != PGRES_TUPLES_OK) {</span>
<span class='curline'><a href='../S/967.html#L2463'>querystr</a>         2463 ext/pgsql/pgsql.c 			smart_str_free(&amp;querystr);</span>
<span class='curline'><a href='../S/967.html#L2468'>querystr</a>         2468 ext/pgsql/pgsql.c 		smart_str_free(&amp;querystr);</span>
<span class='curline'><a href='../S/967.html#L5470'>querystr</a>         5470 ext/pgsql/pgsql.c 	smart_str querystr = {0};</span>
<span class='curline'><a href='../S/967.html#L5494'>querystr</a>         5494 ext/pgsql/pgsql.c 		smart_str_appends(&amp;querystr,</span>
<span class='curline'><a href='../S/967.html#L5504'>querystr</a>         5504 ext/pgsql/pgsql.c 		smart_str_appends(&amp;querystr,</span>
<span class='curline'><a href='../S/967.html#L5515'>querystr</a>         5515 ext/pgsql/pgsql.c 		smart_str_appendl(&amp;querystr, escaped, new_len);</span>
<span class='curline'><a href='../S/967.html#L5519'>querystr</a>         5519 ext/pgsql/pgsql.c 	smart_str_appends(&amp;querystr, "' AND n.nspname = '");</span>
<span class='curline'><a href='../S/967.html#L5523'>querystr</a>         5523 ext/pgsql/pgsql.c 		smart_str_appendl(&amp;querystr, escaped, new_len);</span>
<span class='curline'><a href='../S/967.html#L5527'>querystr</a>         5527 ext/pgsql/pgsql.c 	smart_str_appends(&amp;querystr, "' ORDER BY a.attnum;");</span>
<span class='curline'><a href='../S/967.html#L5528'>querystr</a>         5528 ext/pgsql/pgsql.c 	smart_str_0(&amp;querystr);</span>
<span class='curline'><a href='../S/967.html#L5531'>querystr</a>         5531 ext/pgsql/pgsql.c 	pg_result = PQexec(pg_link, querystr.c);</span>
<span class='curline'><a href='../S/967.html#L5534'>querystr</a>         5534 ext/pgsql/pgsql.c 		smart_str_free(&amp;querystr);</span>
<span class='curline'><a href='../S/967.html#L5538'>querystr</a>         5538 ext/pgsql/pgsql.c 	smart_str_free(&amp;querystr);</span>
<span class='curline'><a href='../S/967.html#L6478'>querystr</a>         6478 ext/pgsql/pgsql.c static int do_exec(smart_str *querystr, int expect, PGconn *pg_link, ulong opt TSRMLS_DC)</span>
<span class='curline'><a href='../S/967.html#L6481'>querystr</a>         6481 ext/pgsql/pgsql.c 		if (PQsendQuery(pg_link, querystr-&gt;c)) {</span>
<span class='curline'><a href='../S/967.html#L6488'>querystr</a>         6488 ext/pgsql/pgsql.c 		pg_result = PQexec(pg_link, querystr-&gt;c);</span>
<span class='curline'><a href='../S/967.html#L6501'>querystr</a>         6501 ext/pgsql/pgsql.c static inline void build_tablename(smart_str *querystr, PGconn *pg_link, const char *table)</span>
<span class='curline'><a href='../S/967.html#L6515'>querystr</a>         6515 ext/pgsql/pgsql.c 		smart_str_appendl(querystr, token, len);</span>
<span class='curline'><a href='../S/967.html#L6518'>querystr</a>         6518 ext/pgsql/pgsql.c 		smart_str_appends(querystr, escaped);</span>
<span class='curline'><a href='../S/967.html#L6525'>querystr</a>         6525 ext/pgsql/pgsql.c 			smart_str_appendc(querystr, '.');</span>
<span class='curline'><a href='../S/967.html#L6526'>querystr</a>         6526 ext/pgsql/pgsql.c 			smart_str_appendl(querystr, tmp, len);</span>
<span class='curline'><a href='../S/967.html#L6529'>querystr</a>         6529 ext/pgsql/pgsql.c 			smart_str_appendc(querystr, '.');</span>
<span class='curline'><a href='../S/967.html#L6530'>querystr</a>         6530 ext/pgsql/pgsql.c 			smart_str_appends(querystr, escaped);</span>
<span class='curline'><a href='../S/967.html#L6544'>querystr</a>         6544 ext/pgsql/pgsql.c 	smart_str querystr = {0};</span>
<span class='curline'><a href='../S/967.html#L6555'>querystr</a>         6555 ext/pgsql/pgsql.c 		smart_str_appends(&amp;querystr, "INSERT INTO ");</span>
<span class='curline'><a href='../S/967.html#L6556'>querystr</a>         6556 ext/pgsql/pgsql.c 		build_tablename(&amp;querystr, pg_link, table);</span>
<span class='curline'><a href='../S/967.html#L6557'>querystr</a>         6557 ext/pgsql/pgsql.c 		smart_str_appends(&amp;querystr, " DEFAULT VALUES");</span>
<span class='curline'><a href='../S/967.html#L6572'>querystr</a>         6572 ext/pgsql/pgsql.c 	smart_str_appends(&amp;querystr, "INSERT INTO ");</span>
<span class='curline'><a href='../S/967.html#L6573'>querystr</a>         6573 ext/pgsql/pgsql.c 	build_tablename(&amp;querystr, pg_link, table);</span>
<span class='curline'><a href='../S/967.html#L6574'>querystr</a>         6574 ext/pgsql/pgsql.c 	smart_str_appends(&amp;querystr, " (");</span>
<span class='curline'><a href='../S/967.html#L6585'>querystr</a>         6585 ext/pgsql/pgsql.c 			smart_str_appends(&amp;querystr, tmp);</span>
<span class='curline'><a href='../S/967.html#L6588'>querystr</a>         6588 ext/pgsql/pgsql.c 			smart_str_appendl(&amp;querystr, fld, fld_len - 1);</span>
<span class='curline'><a href='../S/967.html#L6590'>querystr</a>         6590 ext/pgsql/pgsql.c 		smart_str_appendc(&amp;querystr, ',');</span>
<span class='curline'><a href='../S/967.html#L6593'>querystr</a>         6593 ext/pgsql/pgsql.c 	querystr.len--;</span>
<span class='curline'><a href='../S/967.html#L6594'>querystr</a>         6594 ext/pgsql/pgsql.c 	smart_str_appends(&amp;querystr, ") VALUES (");</span>
<span class='curline'><a href='../S/967.html#L6609'>querystr</a>         6609 ext/pgsql/pgsql.c 					smart_str_appendc(&amp;querystr, '\'');</span>
<span class='curline'><a href='../S/967.html#L6610'>querystr</a>         6610 ext/pgsql/pgsql.c 					smart_str_appendl(&amp;querystr, tmp, new_len);</span>
<span class='curline'><a href='../S/967.html#L6611'>querystr</a>         6611 ext/pgsql/pgsql.c 					smart_str_appendc(&amp;querystr, '\'');</span>
<span class='curline'><a href='../S/967.html#L6614'>querystr</a>         6614 ext/pgsql/pgsql.c 					smart_str_appendl(&amp;querystr, Z_STRVAL_PP(val), Z_STRLEN_PP(val));</span>
<span class='curline'><a href='../S/967.html#L6618'>querystr</a>         6618 ext/pgsql/pgsql.c 				smart_str_append_long(&amp;querystr, Z_LVAL_PP(val));</span>
<span class='curline'><a href='../S/967.html#L6621'>querystr</a>         6621 ext/pgsql/pgsql.c 				smart_str_appendl(&amp;querystr, buf, snprintf(buf, sizeof(buf), "%F", Z_DVAL_PP(val)));</span>
<span class='curline'><a href='../S/967.html#L6624'>querystr</a>         6624 ext/pgsql/pgsql.c 				smart_str_appendl(&amp;querystr, "NULL", sizeof("NULL")-1);</span>
<span class='curline'><a href='../S/967.html#L6631'>querystr</a>         6631 ext/pgsql/pgsql.c 		smart_str_appendc(&amp;querystr, ',');</span>
<span class='curline'><a href='../S/967.html#L6634'>querystr</a>         6634 ext/pgsql/pgsql.c 	querystr.len--;</span>
<span class='curline'><a href='../S/967.html#L6635'>querystr</a>         6635 ext/pgsql/pgsql.c 	smart_str_appends(&amp;querystr, ");");</span>
<span class='curline'><a href='../S/967.html#L6639'>querystr</a>         6639 ext/pgsql/pgsql.c 	smart_str_0(&amp;querystr);</span>
<span class='curline'><a href='../S/967.html#L6642'>querystr</a>         6642 ext/pgsql/pgsql.c 		do_exec(&amp;querystr, PGRES_COMMAND_OK, pg_link, (opt &amp; PGSQL_CONV_OPTS) TSRMLS_CC) == 0) {</span>
<span class='curline'><a href='../S/967.html#L6655'>querystr</a>         6655 ext/pgsql/pgsql.c 		*sql = querystr.c;</span>
<span class='curline'><a href='../S/967.html#L6658'>querystr</a>         6658 ext/pgsql/pgsql.c 		smart_str_free(&amp;querystr);</span>
<span class='curline'><a href='../S/967.html#L6747'>querystr</a>         6747 ext/pgsql/pgsql.c static inline int build_assignment_string(PGconn *pg_link, smart_str *querystr, HashTable *ht, int where_cond, const char *pad, int pad_len, ulong opt TSRMLS_DC)</span>
<span class='curline'><a href='../S/967.html#L6767'>querystr</a>         6767 ext/pgsql/pgsql.c 			smart_str_appends(querystr, tmp);</span>
<span class='curline'><a href='../S/967.html#L6770'>querystr</a>         6770 ext/pgsql/pgsql.c 			smart_str_appendl(querystr, fld, fld_len - 1);</span>
<span class='curline'><a href='../S/967.html#L6773'>querystr</a>         6773 ext/pgsql/pgsql.c 			smart_str_appends(querystr, " IS ");</span>
<span class='curline'><a href='../S/967.html#L6775'>querystr</a>         6775 ext/pgsql/pgsql.c 			smart_str_appendc(querystr, '=');</span>
<span class='curline'><a href='../S/967.html#L6784'>querystr</a>         6784 ext/pgsql/pgsql.c 					smart_str_appendc(querystr, '\'');</span>
<span class='curline'><a href='../S/967.html#L6785'>querystr</a>         6785 ext/pgsql/pgsql.c 					smart_str_appendl(querystr, tmp, new_len);</span>
<span class='curline'><a href='../S/967.html#L6786'>querystr</a>         6786 ext/pgsql/pgsql.c 					smart_str_appendc(querystr, '\'');</span>
<span class='curline'><a href='../S/967.html#L6789'>querystr</a>         6789 ext/pgsql/pgsql.c 					smart_str_appendl(querystr, Z_STRVAL_PP(val), Z_STRLEN_PP(val));</span>
<span class='curline'><a href='../S/967.html#L6793'>querystr</a>         6793 ext/pgsql/pgsql.c 				smart_str_append_long(querystr, Z_LVAL_PP(val));</span>
<span class='curline'><a href='../S/967.html#L6796'>querystr</a>         6796 ext/pgsql/pgsql.c 				smart_str_appendl(querystr, buf, MIN(snprintf(buf, sizeof(buf), "%F", Z_DVAL_PP(val)), sizeof(buf)-1));</span>
<span class='curline'><a href='../S/967.html#L6799'>querystr</a>         6799 ext/pgsql/pgsql.c 				smart_str_appendl(querystr, "NULL", sizeof("NULL")-1);</span>
<span class='curline'><a href='../S/967.html#L6805'>querystr</a>         6805 ext/pgsql/pgsql.c 		smart_str_appendl(querystr, pad, pad_len);</span>
<span class='curline'><a href='../S/967.html#L6807'>querystr</a>         6807 ext/pgsql/pgsql.c 	querystr-&gt;len -= pad_len;</span>
<span class='curline'><a href='../S/967.html#L6817'>querystr</a>         6817 ext/pgsql/pgsql.c 	smart_str querystr = {0};</span>
<span class='curline'><a href='../S/967.html#L6846'>querystr</a>         6846 ext/pgsql/pgsql.c 	smart_str_appends(&amp;querystr, "UPDATE ");</span>
<span class='curline'><a href='../S/967.html#L6847'>querystr</a>         6847 ext/pgsql/pgsql.c 	build_tablename(&amp;querystr, pg_link, table);</span>
<span class='curline'><a href='../S/967.html#L6848'>querystr</a>         6848 ext/pgsql/pgsql.c 	smart_str_appends(&amp;querystr, " SET ");</span>
<span class='curline'><a href='../S/967.html#L6850'>querystr</a>         6850 ext/pgsql/pgsql.c 	if (build_assignment_string(pg_link, &amp;querystr, Z_ARRVAL_P(var_array), 0, ",", 1, opt TSRMLS_CC))</span>
<span class='curline'><a href='../S/967.html#L6853'>querystr</a>         6853 ext/pgsql/pgsql.c 	smart_str_appends(&amp;querystr, " WHERE ");</span>
<span class='curline'><a href='../S/967.html#L6855'>querystr</a>         6855 ext/pgsql/pgsql.c 	if (build_assignment_string(pg_link, &amp;querystr, Z_ARRVAL_P(ids_array), 1, " AND ", sizeof(" AND ")-1, opt TSRMLS_CC))</span>
<span class='curline'><a href='../S/967.html#L6858'>querystr</a>         6858 ext/pgsql/pgsql.c 	smart_str_appendc(&amp;querystr, ';');</span>
<span class='curline'><a href='../S/967.html#L6859'>querystr</a>         6859 ext/pgsql/pgsql.c 	smart_str_0(&amp;querystr);</span>
<span class='curline'><a href='../S/967.html#L6861'>querystr</a>         6861 ext/pgsql/pgsql.c 	if ((opt &amp; PGSQL_DML_EXEC) &amp;&amp; do_exec(&amp;querystr, PGRES_COMMAND_OK, pg_link, opt TSRMLS_CC) == 0) {</span>
<span class='curline'><a href='../S/967.html#L6877'>querystr</a>         6877 ext/pgsql/pgsql.c 		*sql = querystr.c;</span>
<span class='curline'><a href='../S/967.html#L6880'>querystr</a>         6880 ext/pgsql/pgsql.c 		smart_str_free(&amp;querystr);</span>
<span class='curline'><a href='../S/967.html#L6926'>querystr</a>         6926 ext/pgsql/pgsql.c 	smart_str querystr = {0};</span>
<span class='curline'><a href='../S/967.html#L6947'>querystr</a>         6947 ext/pgsql/pgsql.c 	smart_str_appends(&amp;querystr, "DELETE FROM ");</span>
<span class='curline'><a href='../S/967.html#L6948'>querystr</a>         6948 ext/pgsql/pgsql.c 	build_tablename(&amp;querystr, pg_link, table);</span>
<span class='curline'><a href='../S/967.html#L6949'>querystr</a>         6949 ext/pgsql/pgsql.c 	smart_str_appends(&amp;querystr, " WHERE ");</span>
<span class='curline'><a href='../S/967.html#L6951'>querystr</a>         6951 ext/pgsql/pgsql.c 	if (build_assignment_string(pg_link, &amp;querystr, Z_ARRVAL_P(ids_array), 1, " AND ", sizeof(" AND ")-1, opt TSRMLS_CC))</span>
<span class='curline'><a href='../S/967.html#L6954'>querystr</a>         6954 ext/pgsql/pgsql.c 	smart_str_appendc(&amp;querystr, ';');</span>
<span class='curline'><a href='../S/967.html#L6955'>querystr</a>         6955 ext/pgsql/pgsql.c 	smart_str_0(&amp;querystr);</span>
<span class='curline'><a href='../S/967.html#L6957'>querystr</a>         6957 ext/pgsql/pgsql.c 	if ((opt &amp; PGSQL_DML_EXEC) &amp;&amp; do_exec(&amp;querystr, PGRES_COMMAND_OK, pg_link, opt TSRMLS_CC) == 0) {</span>
<span class='curline'><a href='../S/967.html#L6969'>querystr</a>         6969 ext/pgsql/pgsql.c 		*sql = querystr.c;</span>
<span class='curline'><a href='../S/967.html#L6972'>querystr</a>         6972 ext/pgsql/pgsql.c 		smart_str_free(&amp;querystr);</span>
<span class='curline'><a href='../S/967.html#L7060'>querystr</a>         7060 ext/pgsql/pgsql.c 	smart_str querystr = {0};</span>
<span class='curline'><a href='../S/967.html#L7083'>querystr</a>         7083 ext/pgsql/pgsql.c 	smart_str_appends(&amp;querystr, "SELECT * FROM ");</span>
<span class='curline'><a href='../S/967.html#L7084'>querystr</a>         7084 ext/pgsql/pgsql.c 	build_tablename(&amp;querystr, pg_link, table);</span>
<span class='curline'><a href='../S/967.html#L7085'>querystr</a>         7085 ext/pgsql/pgsql.c 	smart_str_appends(&amp;querystr, " WHERE ");</span>
<span class='curline'><a href='../S/967.html#L7087'>querystr</a>         7087 ext/pgsql/pgsql.c 	if (build_assignment_string(pg_link, &amp;querystr, Z_ARRVAL_P(ids_array), 1, " AND ", sizeof(" AND ")-1, opt TSRMLS_CC))</span>
<span class='curline'><a href='../S/967.html#L7090'>querystr</a>         7090 ext/pgsql/pgsql.c 	smart_str_appendc(&amp;querystr, ';');</span>
<span class='curline'><a href='../S/967.html#L7091'>querystr</a>         7091 ext/pgsql/pgsql.c 	smart_str_0(&amp;querystr);</span>
<span class='curline'><a href='../S/967.html#L7093'>querystr</a>         7093 ext/pgsql/pgsql.c 	pg_result = PQexec(pg_link, querystr.c);</span>
<span class='curline'><a href='../S/967.html#L7097'>querystr</a>         7097 ext/pgsql/pgsql.c 		php_error_docref(NULL TSRMLS_CC, E_NOTICE, "Failed to execute '%s'", querystr.c);</span>
<span class='curline'><a href='../S/967.html#L7107'>querystr</a>         7107 ext/pgsql/pgsql.c 		*sql = querystr.c;</span>
<span class='curline'><a href='../S/967.html#L7110'>querystr</a>         7110 ext/pgsql/pgsql.c 		smart_str_free(&amp;querystr);</span>
</pre>
</body>
</html>
