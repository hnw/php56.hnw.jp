<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>internal_file</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/969.html#L306'>internal_file</a>     306 ext/phar/dirstream.c 	char *internal_file, *error, *str_key;</span>
<span class='curline'><a href='../S/969.html#L338'>internal_file</a>     338 ext/phar/dirstream.c 	internal_file = resource-&gt;path + 1; /* strip leading "/" */</span>
<span class='curline'><a href='../S/969.html#L355'>internal_file</a>     355 ext/phar/dirstream.c 	if (*internal_file == '\0') {</span>
<span class='curline'><a href='../S/969.html#L357'>internal_file</a>     357 ext/phar/dirstream.c 		internal_file = estrndup(internal_file - 1, 1);</span>
<span class='curline'><a href='../S/969.html#L358'>internal_file</a>     358 ext/phar/dirstream.c 		ret = phar_make_dirstream(internal_file, &amp;phar-&gt;manifest TSRMLS_CC);</span>
<span class='curline'><a href='../S/969.html#L368'>internal_file</a>     368 ext/phar/dirstream.c 	if (SUCCESS == zend_hash_find(&amp;phar-&gt;manifest, internal_file, strlen(internal_file), (void**)&amp;entry) &amp;&amp; !entry-&gt;is_dir) {</span>
<span class='curline'><a href='../S/969.html#L376'>internal_file</a>     376 ext/phar/dirstream.c 		internal_file = estrdup(internal_file);</span>
<span class='curline'><a href='../S/969.html#L378'>internal_file</a>     378 ext/phar/dirstream.c 		return phar_make_dirstream(internal_file, &amp;phar-&gt;manifest TSRMLS_CC);</span>
<span class='curline'><a href='../S/969.html#L380'>internal_file</a>     380 ext/phar/dirstream.c 		int i_len = strlen(internal_file);</span>
<span class='curline'><a href='../S/969.html#L388'>internal_file</a>     388 ext/phar/dirstream.c 				if (keylen &gt; (uint)i_len &amp;&amp; 0 == memcmp(str_key, internal_file, i_len)) {</span>
<span class='curline'><a href='../S/969.html#L390'>internal_file</a>     390 ext/phar/dirstream.c 					internal_file = estrndup(internal_file,</span>
<span class='curline'><a href='../S/969.html#L393'>internal_file</a>     393 ext/phar/dirstream.c 					return phar_make_dirstream(internal_file, &amp;phar-&gt;manifest TSRMLS_CC);</span>
<span class='curline'><a href='../S/973.html#L433'>internal_file</a>     433 ext/phar/phar.c 	if (idata-&gt;internal_file &amp;&amp; !idata-&gt;internal_file-&gt;is_persistent) {</span>
<span class='curline'><a href='../S/973.html#L434'>internal_file</a>     434 ext/phar/phar.c 		if (--idata-&gt;internal_file-&gt;fp_refcount &lt; 0) {</span>
<span class='curline'><a href='../S/973.html#L435'>internal_file</a>     435 ext/phar/phar.c 			idata-&gt;internal_file-&gt;fp_refcount = 0;</span>
<span class='curline'><a href='../S/973.html#L438'>internal_file</a>     438 ext/phar/phar.c 		if (idata-&gt;fp &amp;&amp; idata-&gt;fp != idata-&gt;phar-&gt;fp &amp;&amp; idata-&gt;fp != idata-&gt;phar-&gt;ufp &amp;&amp; idata-&gt;fp != idata-&gt;internal_file-&gt;fp) {</span>
<span class='curline'><a href='../S/973.html#L442'>internal_file</a>     442 ext/phar/phar.c 		if (idata-&gt;internal_file-&gt;is_temp_dir) {</span>
<span class='curline'><a href='../S/973.html#L443'>internal_file</a>     443 ext/phar/phar.c 			destroy_phar_manifest_entry((void *)idata-&gt;internal_file);</span>
<span class='curline'><a href='../S/973.html#L444'>internal_file</a>     444 ext/phar/phar.c 			efree(idata-&gt;internal_file);</span>
<span class='curline'><a href='../S/973.html#L463'>internal_file</a>     463 ext/phar/phar.c 	if (idata-&gt;internal_file-&gt;fp_refcount &lt; 2) {</span>
<span class='curline'><a href='../S/973.html#L464'>internal_file</a>     464 ext/phar/phar.c 		if (idata-&gt;fp &amp;&amp; idata-&gt;fp != idata-&gt;phar-&gt;fp &amp;&amp; idata-&gt;fp != idata-&gt;phar-&gt;ufp &amp;&amp; idata-&gt;fp != idata-&gt;internal_file-&gt;fp) {</span>
<span class='curline'><a href='../S/973.html#L467'>internal_file</a>     467 ext/phar/phar.c 		zend_hash_del(&amp;idata-&gt;phar-&gt;manifest, idata-&gt;internal_file-&gt;filename, idata-&gt;internal_file-&gt;filename_len);</span>
<span class='curline'><a href='../S/973.html#L471'>internal_file</a>     471 ext/phar/phar.c 		idata-&gt;internal_file-&gt;is_deleted = 1;</span>
<span class='curline'><a href='../S/973.html#L2390'>internal_file</a>    2390 ext/phar/phar.c 	int len = idata-&gt;internal_file-&gt;uncompressed_filesize;</span>
<span class='curline'><a href='../S/973.html#L2392'>internal_file</a>    2392 ext/phar/phar.c 	phar_entry_info *entry = idata-&gt;internal_file;</span>
<span class='curline'><a href='../S/973.html#L2407'>internal_file</a>    2407 ext/phar/phar.c 		php_stream_seek(phar_get_entrypfp(idata-&gt;internal_file TSRMLS_CC), entry-&gt;header_offset, SEEK_SET);</span>
<span class='curline'><a href='../S/973.html#L2409'>internal_file</a>    2409 ext/phar/phar.c 		if (sizeof(local) != php_stream_read(phar_get_entrypfp(idata-&gt;internal_file TSRMLS_CC), (char *) &amp;local, sizeof(local))) {</span>
<span class='curline'><a href='../S/973.html#L2417'>internal_file</a>    2417 ext/phar/phar.c 			php_stream_seek(phar_get_entrypfp(idata-&gt;internal_file TSRMLS_CC),</span>
<span class='curline'><a href='../S/973.html#L2422'>internal_file</a>    2422 ext/phar/phar.c 			if (sizeof(desc) != php_stream_read(phar_get_entrypfp(idata-&gt;internal_file TSRMLS_CC),</span>
<span class='curline'><a href='../S/974.html#L477'>internal_file</a>     477 ext/phar/phar_internal.h 	phar_entry_info          *internal_file;</span>
<span class='curline'><a href='../S/975.html#L1703'>internal_file</a>    1703 ext/phar/phar_object.c 		if (data-&gt;internal_file-&gt;fp_type == PHAR_MOD) {</span>
<span class='curline'><a href='../S/975.html#L1704'>internal_file</a>    1704 ext/phar/phar_object.c 			php_stream_close(data-&gt;internal_file-&gt;fp);</span>
<span class='curline'><a href='../S/975.html#L1707'>internal_file</a>    1707 ext/phar/phar_object.c 		data-&gt;internal_file-&gt;fp = NULL;</span>
<span class='curline'><a href='../S/975.html#L1708'>internal_file</a>    1708 ext/phar/phar_object.c 		data-&gt;internal_file-&gt;fp_type = PHAR_UFP;</span>
<span class='curline'><a href='../S/975.html#L1709'>internal_file</a>    1709 ext/phar/phar_object.c 		data-&gt;internal_file-&gt;offset_abs = data-&gt;internal_file-&gt;offset = php_stream_tell(p_obj-&gt;fp);</span>
<span class='curline'><a href='../S/975.html#L1712'>internal_file</a>    1712 ext/phar/phar_object.c 		data-&gt;internal_file-&gt;uncompressed_filesize = data-&gt;internal_file-&gt;compressed_filesize =</span>
<span class='curline'><a href='../S/975.html#L1713'>internal_file</a>    1713 ext/phar/phar_object.c 			php_stream_tell(p_obj-&gt;fp) - data-&gt;internal_file-&gt;offset;</span>
<span class='curline'><a href='../S/975.html#L1730'>internal_file</a>    1730 ext/phar/phar_object.c 	data-&gt;internal_file-&gt;compressed_filesize = data-&gt;internal_file-&gt;uncompressed_filesize = contents_len;</span>
<span class='curline'><a href='../S/975.html#L3652'>internal_file</a>    3652 ext/phar/phar_object.c 		if (!data-&gt;internal_file-&gt;is_dir) {</span>
<span class='curline'><a href='../S/975.html#L3667'>internal_file</a>    3667 ext/phar/phar_object.c 			data-&gt;internal_file-&gt;compressed_filesize = data-&gt;internal_file-&gt;uncompressed_filesize = contents_len;</span>
<span class='curline'><a href='../S/979.html#L162'>internal_file</a>     162 ext/phar/stream.c 	char *internal_file;</span>
<span class='curline'><a href='../S/979.html#L191'>internal_file</a>     191 ext/phar/stream.c 	internal_file = estrdup(resource-&gt;path + 1);</span>
<span class='curline'><a href='../S/979.html#L193'>internal_file</a>     193 ext/phar/stream.c 		if (NULL == (idata = phar_get_or_create_entry_data(resource-&gt;host, host_len, internal_file, strlen(internal_file), mode, 0, &amp;error, 1 TSRMLS_CC))) {</span>
<span class='curline'><a href='../S/979.html#L198'>internal_file</a>     198 ext/phar/stream.c 				php_stream_wrapper_log_error(wrapper, options TSRMLS_CC, "phar error: file \"%s\" could not be created in phar \"%s\"", internal_file, resource-&gt;host);</span>
<span class='curline'><a href='../S/979.html#L200'>internal_file</a>     200 ext/phar/stream.c 			efree(internal_file);</span>
<span class='curline'><a href='../S/979.html#L209'>internal_file</a>     209 ext/phar/stream.c 		efree(internal_file);</span>
<span class='curline'><a href='../S/979.html#L213'>internal_file</a>     213 ext/phar/stream.c 			if (idata-&gt;internal_file-&gt;uncompressed_filesize == 0</span>
<span class='curline'><a href='../S/979.html#L214'>internal_file</a>     214 ext/phar/stream.c 				&amp;&amp; idata-&gt;internal_file-&gt;compressed_filesize == 0</span>
<span class='curline'><a href='../S/979.html#L219'>internal_file</a>     219 ext/phar/stream.c 				idata-&gt;internal_file-&gt;flags &amp;= ~PHAR_ENT_COMPRESSION_MASK;</span>
<span class='curline'><a href='../S/979.html#L220'>internal_file</a>     220 ext/phar/stream.c 				idata-&gt;internal_file-&gt;flags |= Z_LVAL_PP(pzoption);</span>
<span class='curline'><a href='../S/979.html#L223'>internal_file</a>     223 ext/phar/stream.c 				if (idata-&gt;internal_file-&gt;metadata) {</span>
<span class='curline'><a href='../S/979.html#L224'>internal_file</a>     224 ext/phar/stream.c 					zval_ptr_dtor(&amp;idata-&gt;internal_file-&gt;metadata);</span>
<span class='curline'><a href='../S/979.html#L225'>internal_file</a>     225 ext/phar/stream.c 					idata-&gt;internal_file-&gt;metadata = NULL;</span>
<span class='curline'><a href='../S/979.html#L228'>internal_file</a>     228 ext/phar/stream.c 				MAKE_STD_ZVAL(idata-&gt;internal_file-&gt;metadata);</span>
<span class='curline'><a href='../S/979.html#L230'>internal_file</a>     230 ext/phar/stream.c 				ZVAL_ZVAL(idata-&gt;internal_file-&gt;metadata, metadata, 1, 0);</span>
<span class='curline'><a href='../S/979.html#L235'>internal_file</a>     235 ext/phar/stream.c 			spprintf(opened_path, MAXPATHLEN, "phar://%s/%s", idata-&gt;phar-&gt;fname, idata-&gt;internal_file-&gt;filename);</span>
<span class='curline'><a href='../S/979.html#L239'>internal_file</a>     239 ext/phar/stream.c 		if (!*internal_file &amp;&amp; (options &amp; STREAM_OPEN_FOR_INCLUDE)) {</span>
<span class='curline'><a href='../S/979.html#L243'>internal_file</a>     243 ext/phar/stream.c 				efree(internal_file);</span>
<span class='curline'><a href='../S/979.html#L251'>internal_file</a>     251 ext/phar/stream.c 				efree(internal_file);</span>
<span class='curline'><a href='../S/979.html#L272'>internal_file</a>     272 ext/phar/stream.c 				idata-&gt;internal_file = entry;</span>
<span class='curline'><a href='../S/979.html#L281'>internal_file</a>     281 ext/phar/stream.c 				efree(internal_file);</span>
<span class='curline'><a href='../S/979.html#L286'>internal_file</a>     286 ext/phar/stream.c 		if ((FAILURE == phar_get_entry_data(&amp;idata, resource-&gt;host, host_len, internal_file, strlen(internal_file), "r", 0, &amp;error, 0 TSRMLS_CC)) || !idata) {</span>
<span class='curline'><a href='../S/979.html#L292'>internal_file</a>     292 ext/phar/stream.c 				php_stream_wrapper_log_error(wrapper, options TSRMLS_CC, "phar error: \"%s\" is not a file in phar \"%s\"", internal_file, resource-&gt;host);</span>
<span class='curline'><a href='../S/979.html#L294'>internal_file</a>     294 ext/phar/stream.c 			efree(internal_file);</span>
<span class='curline'><a href='../S/979.html#L302'>internal_file</a>     302 ext/phar/stream.c 		fprintf(stderr, "Filename:   %s\n", internal_file);</span>
<span class='curline'><a href='../S/979.html#L303'>internal_file</a>     303 ext/phar/stream.c 		fprintf(stderr, "Entry:      %s\n", idata-&gt;internal_file-&gt;filename);</span>
<span class='curline'><a href='../S/979.html#L304'>internal_file</a>     304 ext/phar/stream.c 		fprintf(stderr, "Size:       %u\n", idata-&gt;internal_file-&gt;uncompressed_filesize);</span>
<span class='curline'><a href='../S/979.html#L305'>internal_file</a>     305 ext/phar/stream.c 		fprintf(stderr, "Compressed: %u\n", idata-&gt;internal_file-&gt;flags);</span>
<span class='curline'><a href='../S/979.html#L306'>internal_file</a>     306 ext/phar/stream.c 		fprintf(stderr, "Offset:     %u\n", idata-&gt;internal_file-&gt;offset_within_phar);</span>
<span class='curline'><a href='../S/979.html#L307'>internal_file</a>     307 ext/phar/stream.c 		fprintf(stderr, "Cached:     %s\n", idata-&gt;internal_file-&gt;filedata ? "yes" : "no");</span>
<span class='curline'><a href='../S/979.html#L311'>internal_file</a>     311 ext/phar/stream.c 	if (!idata-&gt;internal_file-&gt;is_crc_checked &amp;&amp; phar_postprocess_file(idata, idata-&gt;internal_file-&gt;crc32, &amp;error, 2 TSRMLS_CC) != SUCCESS) {</span>
<span class='curline'><a href='../S/979.html#L315'>internal_file</a>     315 ext/phar/stream.c 		efree(internal_file);</span>
<span class='curline'><a href='../S/979.html#L320'>internal_file</a>     320 ext/phar/stream.c 		char *entry = idata-&gt;internal_file-&gt;filename, *cwd;</span>
<span class='curline'><a href='../S/979.html#L323'>internal_file</a>     323 ext/phar/stream.c 		if ((idata-&gt;phar-&gt;is_tar || idata-&gt;phar-&gt;is_zip) &amp;&amp; idata-&gt;internal_file-&gt;filename_len == sizeof(".phar/stub.php")-1 &amp;&amp; !strncmp(idata-&gt;internal_file-&gt;filename, ".phar/stub.php", sizeof(".phar/stub.php")-1)) {</span>
<span class='curline'><a href='../S/979.html#L336'>internal_file</a>     336 ext/phar/stream.c 		spprintf(opened_path, MAXPATHLEN, "phar://%s/%s", idata-&gt;phar-&gt;fname, idata-&gt;internal_file-&gt;filename);</span>
<span class='curline'><a href='../S/979.html#L338'>internal_file</a>     338 ext/phar/stream.c 	efree(internal_file);</span>
<span class='curline'><a href='../S/979.html#L365'>internal_file</a>     365 ext/phar/stream.c 	if (data-&gt;internal_file-&gt;link) {</span>
<span class='curline'><a href='../S/979.html#L366'>internal_file</a>     366 ext/phar/stream.c 		entry = phar_get_link_source(data-&gt;internal_file TSRMLS_CC);</span>
<span class='curline'><a href='../S/979.html#L368'>internal_file</a>     368 ext/phar/stream.c 		entry = data-&gt;internal_file;</span>
<span class='curline'><a href='../S/979.html#L397'>internal_file</a>     397 ext/phar/stream.c 	if (data-&gt;internal_file-&gt;link) {</span>
<span class='curline'><a href='../S/979.html#L398'>internal_file</a>     398 ext/phar/stream.c 		entry = phar_get_link_source(data-&gt;internal_file TSRMLS_CC);</span>
<span class='curline'><a href='../S/979.html#L400'>internal_file</a>     400 ext/phar/stream.c 		entry = data-&gt;internal_file;</span>
<span class='curline'><a href='../S/979.html#L440'>internal_file</a>     440 ext/phar/stream.c 		php_stream_wrapper_log_error(stream-&gt;wrapper, stream-&gt;flags TSRMLS_CC, "phar error: Could not write %d characters to \"%s\" in phar \"%s\"", (int) count, data-&gt;internal_file-&gt;filename, data-&gt;phar-&gt;fname);</span>
<span class='curline'><a href='../S/979.html#L444'>internal_file</a>     444 ext/phar/stream.c 	if (data-&gt;position &gt; (off_t)data-&gt;internal_file-&gt;uncompressed_filesize) {</span>
<span class='curline'><a href='../S/979.html#L445'>internal_file</a>     445 ext/phar/stream.c 		data-&gt;internal_file-&gt;uncompressed_filesize = data-&gt;position;</span>
<span class='curline'><a href='../S/979.html#L447'>internal_file</a>     447 ext/phar/stream.c 	data-&gt;internal_file-&gt;compressed_filesize = data-&gt;internal_file-&gt;uncompressed_filesize;</span>
<span class='curline'><a href='../S/979.html#L448'>internal_file</a>     448 ext/phar/stream.c 	data-&gt;internal_file-&gt;old_flags = data-&gt;internal_file-&gt;flags;</span>
<span class='curline'><a href='../S/979.html#L449'>internal_file</a>     449 ext/phar/stream.c 	data-&gt;internal_file-&gt;is_modified = 1;</span>
<span class='curline'><a href='../S/979.html#L463'>internal_file</a>     463 ext/phar/stream.c 	if (data-&gt;internal_file-&gt;is_modified) {</span>
<span class='curline'><a href='../S/979.html#L464'>internal_file</a>     464 ext/phar/stream.c 		data-&gt;internal_file-&gt;timestamp = time(0);</span>
<span class='curline'><a href='../S/979.html#L558'>internal_file</a>     558 ext/phar/stream.c 	phar_dostat(data-&gt;phar, data-&gt;internal_file, ssb, 0 TSRMLS_CC);</span>
<span class='curline'><a href='../S/979.html#L570'>internal_file</a>     570 ext/phar/stream.c 	char *internal_file, *error;</span>
<span class='curline'><a href='../S/979.html#L594'>internal_file</a>     594 ext/phar/stream.c 	internal_file = resource-&gt;path + 1; /* strip leading "/" */</span>
<span class='curline'><a href='../S/979.html#L606'>internal_file</a>     606 ext/phar/stream.c 	if (*internal_file == '\0') {</span>
<span class='curline'><a href='../S/979.html#L616'>internal_file</a>     616 ext/phar/stream.c 	internal_file_len = strlen(internal_file);</span>
<span class='curline'><a href='../S/979.html#L618'>internal_file</a>     618 ext/phar/stream.c 	if (SUCCESS == zend_hash_find(&amp;phar-&gt;manifest, internal_file, internal_file_len, (void**)&amp;entry)) {</span>
<span class='curline'><a href='../S/979.html#L623'>internal_file</a>     623 ext/phar/stream.c 	if (zend_hash_exists(&amp;(phar-&gt;virtual_dirs), internal_file, internal_file_len)) {</span>
<span class='curline'><a href='../S/979.html#L639'>internal_file</a>     639 ext/phar/stream.c 			if ((int)keylen &gt;= internal_file_len || strncmp(str_key, internal_file, keylen)) {</span>
<span class='curline'><a href='../S/979.html#L652'>internal_file</a>     652 ext/phar/stream.c 				test_len = spprintf(&amp;test, MAXPATHLEN, "%s%s", entry-&gt;tmp, internal_file + keylen);</span>
<span class='curline'><a href='../S/979.html#L658'>internal_file</a>     658 ext/phar/stream.c 				if (SUCCESS != phar_mount_entry(phar, test, test_len, internal_file, internal_file_len TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/979.html#L663'>internal_file</a>     663 ext/phar/stream.c 				if (SUCCESS != zend_hash_find(&amp;phar-&gt;manifest, internal_file, internal_file_len, (void**)&amp;entry)) {</span>
<span class='curline'><a href='../S/979.html#L684'>internal_file</a>     684 ext/phar/stream.c 	char *internal_file, *error;</span>
<span class='curline'><a href='../S/979.html#L721'>internal_file</a>     721 ext/phar/stream.c 	internal_file = estrdup(resource-&gt;path + 1);</span>
<span class='curline'><a href='../S/979.html#L722'>internal_file</a>     722 ext/phar/stream.c 	internal_file_len = strlen(internal_file);</span>
<span class='curline'><a href='../S/979.html#L723'>internal_file</a>     723 ext/phar/stream.c 	if (FAILURE == phar_get_entry_data(&amp;idata, resource-&gt;host, host_len, internal_file, internal_file_len, "r", 0, &amp;error, 1 TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/979.html#L731'>internal_file</a>     731 ext/phar/stream.c 		efree(internal_file);</span>
<span class='curline'><a href='../S/979.html#L738'>internal_file</a>     738 ext/phar/stream.c 	if (idata-&gt;internal_file-&gt;fp_refcount &gt; 1) {</span>
<span class='curline'><a href='../S/979.html#L740'>internal_file</a>     740 ext/phar/stream.c 		php_stream_wrapper_log_error(wrapper, options TSRMLS_CC, "phar error: \"%s\" in phar \"%s\", has open file pointers, cannot unlink", internal_file, resource-&gt;host);</span>
<span class='curline'><a href='../S/979.html#L741'>internal_file</a>     741 ext/phar/stream.c 		efree(internal_file);</span>
<span class='curline'><a href='../S/979.html#L747'>internal_file</a>     747 ext/phar/stream.c 	efree(internal_file);</span>
<span class='curline'><a href='../S/984.html#L444'>internal_file</a>     444 ext/phar/util.c 		(*ret)-&gt;internal_file = entry;</span>
<span class='curline'><a href='../S/984.html#L492'>internal_file</a>     492 ext/phar/util.c 	(*ret)-&gt;internal_file = entry;</span>
<span class='curline'><a href='../S/984.html#L624'>internal_file</a>     624 ext/phar/util.c 	ret-&gt;internal_file = entry;</span>
<span class='curline'><a href='../S/984.html#L736'>internal_file</a>     736 ext/phar/util.c 		dummy.internal_file = entry;</span>
<span class='curline'><a href='../S/984.html#L754'>internal_file</a>     754 ext/phar/util.c 	dummy.internal_file = entry;</span>
</pre>
</body>
</html>
