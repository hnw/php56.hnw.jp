<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>persistent_script</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/863.html#L833'>persistent_script</a>  833 ext/opcache/ZendAccelerator.c static inline int do_validate_timestamps(zend_persistent_script *persistent_script, zend_file_handle *file_handle TSRMLS_DC)</span>
<span class='curline'><a href='../S/863.html#L843'>persistent_script</a>  843 ext/opcache/ZendAccelerator.c 		if (strcmp(persistent_script-&gt;full_path, file_handle-&gt;opened_path) != 0) {</span>
<span class='curline'><a href='../S/863.html#L852'>persistent_script</a>  852 ext/opcache/ZendAccelerator.c 		if (full_path_ptr &amp;&amp; strcmp(persistent_script-&gt;full_path, full_path_ptr) != 0) {</span>
<span class='curline'><a href='../S/863.html#L859'>persistent_script</a>  859 ext/opcache/ZendAccelerator.c 	if (persistent_script-&gt;timestamp == 0) {</span>
<span class='curline'><a href='../S/863.html#L867'>persistent_script</a>  867 ext/opcache/ZendAccelerator.c 	if (zend_get_file_handle_timestamp(file_handle, NULL TSRMLS_CC) == persistent_script-&gt;timestamp) {</span>
<span class='curline'><a href='../S/863.html#L880'>persistent_script</a>  880 ext/opcache/ZendAccelerator.c 	ps_handle.filename = persistent_script-&gt;full_path;</span>
<span class='curline'><a href='../S/863.html#L881'>persistent_script</a>  881 ext/opcache/ZendAccelerator.c 	ps_handle.opened_path = persistent_script-&gt;full_path;</span>
<span class='curline'><a href='../S/863.html#L883'>persistent_script</a>  883 ext/opcache/ZendAccelerator.c 	if (zend_get_file_handle_timestamp(&amp;ps_handle, NULL TSRMLS_CC) == persistent_script-&gt;timestamp) {</span>
<span class='curline'><a href='../S/863.html#L890'>persistent_script</a>  890 ext/opcache/ZendAccelerator.c int validate_timestamp_and_record(zend_persistent_script *persistent_script, zend_file_handle *file_handle TSRMLS_DC)</span>
<span class='curline'><a href='../S/863.html#L893'>persistent_script</a>  893 ext/opcache/ZendAccelerator.c 	    persistent_script-&gt;dynamic_members.revalidate &gt;= ZCG(request_time)) {</span>
<span class='curline'><a href='../S/863.html#L895'>persistent_script</a>  895 ext/opcache/ZendAccelerator.c 	} else if (do_validate_timestamps(persistent_script, file_handle TSRMLS_CC) == FAILURE) {</span>
<span class='curline'><a href='../S/863.html#L898'>persistent_script</a>  898 ext/opcache/ZendAccelerator.c 		persistent_script-&gt;dynamic_members.revalidate = ZCG(request_time) + ZCG(accel_directives).revalidate_freq;</span>
<span class='curline'><a href='../S/863.html#L903'>persistent_script</a>  903 ext/opcache/ZendAccelerator.c static unsigned int zend_accel_script_checksum(zend_persistent_script *persistent_script)</span>
<span class='curline'><a href='../S/863.html#L905'>persistent_script</a>  905 ext/opcache/ZendAccelerator.c 	signed char *mem = (signed char*)persistent_script-&gt;mem;</span>
<span class='curline'><a href='../S/863.html#L906'>persistent_script</a>  906 ext/opcache/ZendAccelerator.c 	size_t size = persistent_script-&gt;size;</span>
<span class='curline'><a href='../S/863.html#L907'>persistent_script</a>  907 ext/opcache/ZendAccelerator.c 	size_t persistent_script_check_block_size = ((char *)&amp;(persistent_script-&gt;dynamic_members)) - (char *)persistent_script;</span>
<span class='curline'><a href='../S/863.html#L910'>persistent_script</a>  910 ext/opcache/ZendAccelerator.c 	if (mem &lt; (signed char*)persistent_script) {</span>
<span class='curline'><a href='../S/863.html#L911'>persistent_script</a>  911 ext/opcache/ZendAccelerator.c 		checksum = zend_adler32(checksum, mem, (signed char*)persistent_script - mem);</span>
<span class='curline'><a href='../S/863.html#L912'>persistent_script</a>  912 ext/opcache/ZendAccelerator.c 		size -= (signed char*)persistent_script - mem;</span>
<span class='curline'><a href='../S/863.html#L913'>persistent_script</a>  913 ext/opcache/ZendAccelerator.c 		mem  += (signed char*)persistent_script - mem;</span>
<span class='curline'><a href='../S/863.html#L917'>persistent_script</a>  917 ext/opcache/ZendAccelerator.c 	mem  += sizeof(*persistent_script);</span>
<span class='curline'><a href='../S/863.html#L918'>persistent_script</a>  918 ext/opcache/ZendAccelerator.c 	size -= sizeof(*persistent_script);</span>
<span class='curline'><a href='../S/863.html#L1063'>persistent_script</a> 1063 ext/opcache/ZendAccelerator.c 	zend_persistent_script *persistent_script;</span>
<span class='curline'><a href='../S/863.html#L1079'>persistent_script</a> 1079 ext/opcache/ZendAccelerator.c 	persistent_script = zend_accel_hash_find(&amp;ZCSG(hash), realpath, strlen(realpath) + 1);</span>
<span class='curline'><a href='../S/863.html#L1080'>persistent_script</a> 1080 ext/opcache/ZendAccelerator.c 	if (persistent_script &amp;&amp; !persistent_script-&gt;corrupted) {</span>
<span class='curline'><a href='../S/863.html#L1089'>persistent_script</a> 1089 ext/opcache/ZendAccelerator.c 			do_validate_timestamps(persistent_script, &amp;file_handle TSRMLS_CC) == FAILURE) {</span>
<span class='curline'><a href='../S/863.html#L1092'>persistent_script</a> 1092 ext/opcache/ZendAccelerator.c 			if (!persistent_script-&gt;corrupted) {</span>
<span class='curline'><a href='../S/863.html#L1093'>persistent_script</a> 1093 ext/opcache/ZendAccelerator.c 				persistent_script-&gt;corrupted = 1;</span>
<span class='curline'><a href='../S/863.html#L1094'>persistent_script</a> 1094 ext/opcache/ZendAccelerator.c 				persistent_script-&gt;timestamp = 0;</span>
<span class='curline'><a href='../S/863.html#L1095'>persistent_script</a> 1095 ext/opcache/ZendAccelerator.c 				ZSMMG(wasted_shared_memory) += persistent_script-&gt;dynamic_members.memory_consumption;</span>
<span class='curline'><a href='../S/863.html#L1467'>persistent_script</a> 1467 ext/opcache/ZendAccelerator.c 	zend_persistent_script *persistent_script = NULL;</span>
<span class='curline'><a href='../S/863.html#L1514'>persistent_script</a> 1514 ext/opcache/ZendAccelerator.c 		persistent_script = ZCG(cache_persistent_script);</span>
<span class='curline'><a href='../S/863.html#L1522'>persistent_script</a> 1522 ext/opcache/ZendAccelerator.c 		persistent_script = zend_accel_hash_find(&amp;ZCSG(hash), key, key_length + 1);</span>
<span class='curline'><a href='../S/863.html#L1523'>persistent_script</a> 1523 ext/opcache/ZendAccelerator.c 		if (!persistent_script) {</span>
<span class='curline'><a href='../S/863.html#L1554'>persistent_script</a> 1554 ext/opcache/ZendAccelerator.c 				persistent_script = (zend_persistent_script *)bucket-&gt;data;</span>
<span class='curline'><a href='../S/863.html#L1556'>persistent_script</a> 1556 ext/opcache/ZendAccelerator.c 				    !persistent_script-&gt;corrupted) {</span>
<span class='curline'><a href='../S/863.html#L1571'>persistent_script</a> 1571 ext/opcache/ZendAccelerator.c 	if (persistent_script &amp;&amp; persistent_script-&gt;corrupted) {</span>
<span class='curline'><a href='../S/863.html#L1572'>persistent_script</a> 1572 ext/opcache/ZendAccelerator.c 		persistent_script = NULL;</span>
<span class='curline'><a href='../S/863.html#L1578'>persistent_script</a> 1578 ext/opcache/ZendAccelerator.c 	if (persistent_script &amp;&amp; ZCG(accel_directives).validate_timestamps) {</span>
<span class='curline'><a href='../S/863.html#L1579'>persistent_script</a> 1579 ext/opcache/ZendAccelerator.c 		if (validate_timestamp_and_record(persistent_script, file_handle TSRMLS_CC) == FAILURE) {</span>
<span class='curline'><a href='../S/863.html#L1581'>persistent_script</a> 1581 ext/opcache/ZendAccelerator.c 			if (!persistent_script-&gt;corrupted) {</span>
<span class='curline'><a href='../S/863.html#L1582'>persistent_script</a> 1582 ext/opcache/ZendAccelerator.c 				persistent_script-&gt;corrupted = 1;</span>
<span class='curline'><a href='../S/863.html#L1583'>persistent_script</a> 1583 ext/opcache/ZendAccelerator.c 				persistent_script-&gt;timestamp = 0;</span>
<span class='curline'><a href='../S/863.html#L1584'>persistent_script</a> 1584 ext/opcache/ZendAccelerator.c 				ZSMMG(wasted_shared_memory) += persistent_script-&gt;dynamic_members.memory_consumption;</span>
<span class='curline'><a href='../S/863.html#L1592'>persistent_script</a> 1592 ext/opcache/ZendAccelerator.c 			persistent_script = NULL;</span>
<span class='curline'><a href='../S/863.html#L1597'>persistent_script</a> 1597 ext/opcache/ZendAccelerator.c 	if (persistent_script &amp;&amp; ZCG(accel_directives).consistency_checks</span>
<span class='curline'><a href='../S/863.html#L1598'>persistent_script</a> 1598 ext/opcache/ZendAccelerator.c 		&amp;&amp; persistent_script-&gt;dynamic_members.hits % ZCG(accel_directives).consistency_checks == 0) {</span>
<span class='curline'><a href='../S/863.html#L1600'>persistent_script</a> 1600 ext/opcache/ZendAccelerator.c 		unsigned int checksum = zend_accel_script_checksum(persistent_script);</span>
<span class='curline'><a href='../S/863.html#L1601'>persistent_script</a> 1601 ext/opcache/ZendAccelerator.c 		if (checksum != persistent_script-&gt;dynamic_members.checksum ) {</span>
<span class='curline'><a href='../S/863.html#L1604'>persistent_script</a> 1604 ext/opcache/ZendAccelerator.c 							 persistent_script-&gt;full_path, persistent_script-&gt;dynamic_members.checksum, checksum);</span>
<span class='curline'><a href='../S/863.html#L1606'>persistent_script</a> 1606 ext/opcache/ZendAccelerator.c 			if (!persistent_script-&gt;corrupted) {</span>
<span class='curline'><a href='../S/863.html#L1607'>persistent_script</a> 1607 ext/opcache/ZendAccelerator.c 				persistent_script-&gt;corrupted = 1;</span>
<span class='curline'><a href='../S/863.html#L1608'>persistent_script</a> 1608 ext/opcache/ZendAccelerator.c 				persistent_script-&gt;timestamp = 0;</span>
<span class='curline'><a href='../S/863.html#L1609'>persistent_script</a> 1609 ext/opcache/ZendAccelerator.c 				ZSMMG(wasted_shared_memory) += persistent_script-&gt;dynamic_members.memory_consumption;</span>
<span class='curline'><a href='../S/863.html#L1617'>persistent_script</a> 1617 ext/opcache/ZendAccelerator.c 			persistent_script = NULL;</span>
<span class='curline'><a href='../S/863.html#L1622'>persistent_script</a> 1622 ext/opcache/ZendAccelerator.c 	if (!persistent_script) {</span>
<span class='curline'><a href='../S/863.html#L1638'>persistent_script</a> 1638 ext/opcache/ZendAccelerator.c 		persistent_script = compile_and_cache_file(file_handle, type, key, key_length, &amp;op_array, &amp;from_shared_memory TSRMLS_CC);</span>
<span class='curline'><a href='../S/863.html#L1643'>persistent_script</a> 1643 ext/opcache/ZendAccelerator.c 		if (!persistent_script) {</span>
<span class='curline'><a href='../S/863.html#L1651'>persistent_script</a> 1651 ext/opcache/ZendAccelerator.c 		persistent_script-&gt;dynamic_members.hits++; /* see above */</span>
<span class='curline'><a href='../S/863.html#L1654'>persistent_script</a> 1654 ext/opcache/ZendAccelerator.c 		InterlockedIncrement(&amp;persistent_script-&gt;dynamic_members.hits);</span>
<span class='curline'><a href='../S/863.html#L1658'>persistent_script</a> 1658 ext/opcache/ZendAccelerator.c 		if (persistent_script-&gt;full_path) {</span>
<span class='curline'><a href='../S/863.html#L1670'>persistent_script</a> 1670 ext/opcache/ZendAccelerator.c 				if (zend_hash_quick_add(&amp;EG(included_files), persistent_script-&gt;full_path, persistent_script-&gt;full_path_len + 1, persistent_script-&gt;hash_value, &amp;dummy, sizeof(void *), NULL) == SUCCESS) {</span>
<span class='curline'><a href='../S/863.html#L1672'>persistent_script</a> 1672 ext/opcache/ZendAccelerator.c 					if (strstr(persistent_script-&gt;full_path, ".phar") &amp;&amp; !strstr(persistent_script-&gt;full_path, "://")) {</span>
<span class='curline'><a href='../S/863.html#L1674'>persistent_script</a> 1674 ext/opcache/ZendAccelerator.c 						char *fname = emalloc(sizeof("phar://") + persistent_script-&gt;full_path_len);</span>
<span class='curline'><a href='../S/863.html#L1677'>persistent_script</a> 1677 ext/opcache/ZendAccelerator.c 						memcpy(fname + sizeof("phar://") - 1, persistent_script-&gt;full_path, persistent_script-&gt;full_path_len + 1);</span>
<span class='curline'><a href='../S/863.html#L1692'>persistent_script</a> 1692 ext/opcache/ZendAccelerator.c 	persistent_script-&gt;dynamic_members.last_used = ZCG(request_time);</span>
<span class='curline'><a href='../S/863.html#L1697'>persistent_script</a> 1697 ext/opcache/ZendAccelerator.c     if (persistent_script-&gt;ping_auto_globals_mask) {</span>
<span class='curline'><a href='../S/863.html#L1698'>persistent_script</a> 1698 ext/opcache/ZendAccelerator.c 		zend_accel_set_auto_globals(persistent_script-&gt;ping_auto_globals_mask TSRMLS_CC);</span>
<span class='curline'><a href='../S/863.html#L1701'>persistent_script</a> 1701 ext/opcache/ZendAccelerator.c 	return zend_accel_load_script(persistent_script, from_shared_memory TSRMLS_CC);</span>
<span class='curline'><a href='../S/863.html#L1854'>persistent_script</a> 1854 ext/opcache/ZendAccelerator.c 				zend_persistent_script *persistent_script;</span>
<span class='curline'><a href='../S/863.html#L1868'>persistent_script</a> 1868 ext/opcache/ZendAccelerator.c 				    (persistent_script = zend_accel_hash_find(&amp;ZCSG(hash), (char*)filename, filename_len + 1)) != NULL &amp;&amp;</span>
<span class='curline'><a href='../S/863.html#L1869'>persistent_script</a> 1869 ext/opcache/ZendAccelerator.c 				    !persistent_script-&gt;corrupted) {</span>
<span class='curline'><a href='../S/863.html#L1871'>persistent_script</a> 1871 ext/opcache/ZendAccelerator.c 					handle-&gt;opened_path = estrndup(persistent_script-&gt;full_path, persistent_script-&gt;full_path_len);</span>
<span class='curline'><a href='../S/863.html#L1873'>persistent_script</a> 1873 ext/opcache/ZendAccelerator.c 					memcpy(ZCG(key), persistent_script-&gt;full_path, persistent_script-&gt;full_path_len + 1);</span>
<span class='curline'><a href='../S/863.html#L1874'>persistent_script</a> 1874 ext/opcache/ZendAccelerator.c 					ZCG(key_len) = persistent_script-&gt;full_path_len;</span>
<span class='curline'><a href='../S/863.html#L1876'>persistent_script</a> 1876 ext/opcache/ZendAccelerator.c 					ZCG(cache_persistent_script) = persistent_script;</span>
<span class='curline'><a href='../S/863.html#L1884'>persistent_script</a> 1884 ext/opcache/ZendAccelerator.c 					(persistent_script = zend_accel_hash_find(&amp;ZCSG(hash), key, key_length + 1)) != NULL &amp;&amp;</span>
<span class='curline'><a href='../S/863.html#L1885'>persistent_script</a> 1885 ext/opcache/ZendAccelerator.c 				    !persistent_script-&gt;corrupted) {</span>
<span class='curline'><a href='../S/863.html#L1887'>persistent_script</a> 1887 ext/opcache/ZendAccelerator.c 					handle-&gt;opened_path = estrndup(persistent_script-&gt;full_path, persistent_script-&gt;full_path_len);</span>
<span class='curline'><a href='../S/863.html#L1890'>persistent_script</a> 1890 ext/opcache/ZendAccelerator.c 					ZCG(cache_persistent_script) = persistent_script;</span>
<span class='curline'><a href='../S/863.html#L1901'>persistent_script</a> 1901 ext/opcache/ZendAccelerator.c 					persistent_script = (zend_persistent_script *)bucket-&gt;data;</span>
<span class='curline'><a href='../S/863.html#L1902'>persistent_script</a> 1902 ext/opcache/ZendAccelerator.c 					if (persistent_script &amp;&amp; !persistent_script-&gt;corrupted) {</span>
<span class='curline'><a href='../S/863.html#L1914'>persistent_script</a> 1914 ext/opcache/ZendAccelerator.c 						ZCG(cache_persistent_script) = persistent_script;</span>
<span class='curline'><a href='../S/863.html#L1954'>persistent_script</a> 1954 ext/opcache/ZendAccelerator.c 			zend_persistent_script *persistent_script;</span>
<span class='curline'><a href='../S/863.html#L1965'>persistent_script</a> 1965 ext/opcache/ZendAccelerator.c 				persistent_script = ZCG(cache_persistent_script);</span>
<span class='curline'><a href='../S/863.html#L1966'>persistent_script</a> 1966 ext/opcache/ZendAccelerator.c 				handle-&gt;opened_path = estrndup(persistent_script-&gt;full_path, persistent_script-&gt;full_path_len);</span>
<span class='curline'><a href='../S/863.html#L1976'>persistent_script</a> 1976 ext/opcache/ZendAccelerator.c 				    (persistent_script = zend_accel_hash_find(&amp;ZCSG(hash), (char*)filename, filename_len + 1)) != NULL &amp;&amp;</span>
<span class='curline'><a href='../S/863.html#L1977'>persistent_script</a> 1977 ext/opcache/ZendAccelerator.c 				    !persistent_script-&gt;corrupted) {</span>
<span class='curline'><a href='../S/863.html#L1979'>persistent_script</a> 1979 ext/opcache/ZendAccelerator.c 					handle-&gt;opened_path = estrndup(persistent_script-&gt;full_path, persistent_script-&gt;full_path_len);</span>
<span class='curline'><a href='../S/863.html#L1981'>persistent_script</a> 1981 ext/opcache/ZendAccelerator.c 					memcpy(ZCG(key), persistent_script-&gt;full_path, persistent_script-&gt;full_path_len + 1);</span>
<span class='curline'><a href='../S/863.html#L1982'>persistent_script</a> 1982 ext/opcache/ZendAccelerator.c 					ZCG(key_len) = persistent_script-&gt;full_path_len;</span>
<span class='curline'><a href='../S/863.html#L1984'>persistent_script</a> 1984 ext/opcache/ZendAccelerator.c 					ZCG(cache_persistent_script) = EG(opline_ptr) ? persistent_script : NULL;</span>
<span class='curline'><a href='../S/863.html#L2024'>persistent_script</a> 2024 ext/opcache/ZendAccelerator.c 			zend_persistent_script *persistent_script;</span>
<span class='curline'><a href='../S/863.html#L2030'>persistent_script</a> 2030 ext/opcache/ZendAccelerator.c 				persistent_script = (zend_persistent_script *)bucket-&gt;data;</span>
<span class='curline'><a href='../S/863.html#L2031'>persistent_script</a> 2031 ext/opcache/ZendAccelerator.c 				if (persistent_script &amp;&amp; !persistent_script-&gt;corrupted) {</span>
<span class='curline'><a href='../S/863.html#L2032'>persistent_script</a> 2032 ext/opcache/ZendAccelerator.c 					memcpy(ZCG(key), persistent_script-&gt;full_path, persistent_script-&gt;full_path_len + 1);</span>
<span class='curline'><a href='../S/863.html#L2033'>persistent_script</a> 2033 ext/opcache/ZendAccelerator.c 					ZCG(key_len) = persistent_script-&gt;full_path_len;</span>
<span class='curline'><a href='../S/863.html#L2035'>persistent_script</a> 2035 ext/opcache/ZendAccelerator.c 					ZCG(cache_persistent_script) = persistent_script;</span>
<span class='curline'><a href='../S/863.html#L2036'>persistent_script</a> 2036 ext/opcache/ZendAccelerator.c 					return estrndup(persistent_script-&gt;full_path, persistent_script-&gt;full_path_len);</span>
<span class='curline'><a href='../S/863.html#L2047'>persistent_script</a> 2047 ext/opcache/ZendAccelerator.c 				(persistent_script = zend_accel_hash_find(&amp;ZCSG(hash), key, key_length + 1)) != NULL &amp;&amp;</span>
<span class='curline'><a href='../S/863.html#L2048'>persistent_script</a> 2048 ext/opcache/ZendAccelerator.c 			    !persistent_script-&gt;corrupted) {</span>
<span class='curline'><a href='../S/863.html#L2052'>persistent_script</a> 2052 ext/opcache/ZendAccelerator.c 				ZCG(cache_persistent_script) = persistent_script;</span>
<span class='curline'><a href='../S/863.html#L2053'>persistent_script</a> 2053 ext/opcache/ZendAccelerator.c 				return estrndup(persistent_script-&gt;full_path, persistent_script-&gt;full_path_len);</span>
<span class='curline'><a href='../S/863.html#L2062'>persistent_script</a> 2062 ext/opcache/ZendAccelerator.c 				persistent_script = (zend_persistent_script *)bucket-&gt;data;</span>
<span class='curline'><a href='../S/863.html#L2064'>persistent_script</a> 2064 ext/opcache/ZendAccelerator.c 				if (persistent_script &amp;&amp; !persistent_script-&gt;corrupted) {</span>
<span class='curline'><a href='../S/863.html#L2074'>persistent_script</a> 2074 ext/opcache/ZendAccelerator.c 					ZCG(cache_persistent_script) = key ? persistent_script : NULL;</span>
<span class='curline'><a href='../S/864.html#L334'>persistent_script</a>  334 ext/opcache/ZendAccelerator.h int  validate_timestamp_and_record(zend_persistent_script *persistent_script, zend_file_handle *file_handle TSRMLS_DC);</span>
<span class='curline'><a href='../S/864.html#L336'>persistent_script</a>  336 ext/opcache/ZendAccelerator.h int  zend_accel_script_optimize(zend_persistent_script *persistent_script TSRMLS_DC);</span>
<span class='curline'><a href='../S/854.html#L318'>persistent_script</a>  318 ext/opcache/zend_accelerator_module.c 	zend_persistent_script *persistent_script;</span>
<span class='curline'><a href='../S/854.html#L324'>persistent_script</a>  324 ext/opcache/zend_accelerator_module.c 		persistent_script = zend_accel_hash_find(&amp;ZCSG(hash), filename, filename_len + 1);</span>
<span class='curline'><a href='../S/854.html#L325'>persistent_script</a>  325 ext/opcache/zend_accelerator_module.c 		if (persistent_script) {</span>
<span class='curline'><a href='../S/854.html#L326'>persistent_script</a>  326 ext/opcache/zend_accelerator_module.c 			return !persistent_script-&gt;corrupted &amp;&amp;</span>
<span class='curline'><a href='../S/854.html#L328'>persistent_script</a>  328 ext/opcache/zend_accelerator_module.c 				validate_timestamp_and_record(persistent_script, &amp;handle TSRMLS_CC) == SUCCESS);</span>
<span class='curline'><a href='../S/854.html#L333'>persistent_script</a>  333 ext/opcache/zend_accelerator_module.c 		persistent_script = zend_accel_hash_find(&amp;ZCSG(hash), key, key_length + 1);</span>
<span class='curline'><a href='../S/854.html#L334'>persistent_script</a>  334 ext/opcache/zend_accelerator_module.c 		return persistent_script &amp;&amp; !persistent_script-&gt;corrupted &amp;&amp;</span>
<span class='curline'><a href='../S/854.html#L336'>persistent_script</a>  336 ext/opcache/zend_accelerator_module.c 			validate_timestamp_and_record(persistent_script, &amp;handle TSRMLS_CC) == SUCCESS);</span>
<span class='curline'><a href='../S/856.html#L76'>persistent_script</a>   76 ext/opcache/zend_accelerator_util_funcs.c 	zend_persistent_script *persistent_script = (zend_persistent_script *) emalloc(sizeof(zend_persistent_script));</span>
<span class='curline'><a href='../S/856.html#L77'>persistent_script</a>   77 ext/opcache/zend_accelerator_util_funcs.c 	memset(persistent_script, 0, sizeof(zend_persistent_script));</span>
<span class='curline'><a href='../S/856.html#L79'>persistent_script</a>   79 ext/opcache/zend_accelerator_util_funcs.c 	zend_hash_init(&amp;persistent_script-&gt;function_table, 100, NULL, (dtor_func_t) zend_accel_destroy_zend_function, 0);</span>
<span class='curline'><a href='../S/856.html#L84'>persistent_script</a>   84 ext/opcache/zend_accelerator_util_funcs.c 	zend_hash_init(&amp;persistent_script-&gt;class_table, 10, NULL, ZEND_CLASS_DTOR, 0);</span>
<span class='curline'><a href='../S/856.html#L86'>persistent_script</a>   86 ext/opcache/zend_accelerator_util_funcs.c 	return persistent_script;</span>
<span class='curline'><a href='../S/856.html#L130'>persistent_script</a>  130 ext/opcache/zend_accelerator_util_funcs.c int compact_persistent_script(zend_persistent_script *persistent_script)</span>
<span class='curline'><a href='../S/856.html#L132'>persistent_script</a>  132 ext/opcache/zend_accelerator_util_funcs.c 	return compact_hash_table(&amp;persistent_script-&gt;function_table) &amp;&amp;</span>
<span class='curline'><a href='../S/856.html#L133'>persistent_script</a>  133 ext/opcache/zend_accelerator_util_funcs.c 	       compact_hash_table(&amp;persistent_script-&gt;class_table);</span>
<span class='curline'><a href='../S/856.html#L136'>persistent_script</a>  136 ext/opcache/zend_accelerator_util_funcs.c void free_persistent_script(zend_persistent_script *persistent_script, int destroy_elements)</span>
<span class='curline'><a href='../S/856.html#L139'>persistent_script</a>  139 ext/opcache/zend_accelerator_util_funcs.c 		persistent_script-&gt;function_table.pDestructor = (dtor_func_t)zend_accel_destroy_zend_function;</span>
<span class='curline'><a href='../S/856.html#L140'>persistent_script</a>  140 ext/opcache/zend_accelerator_util_funcs.c 		persistent_script-&gt;class_table.pDestructor = (dtor_func_t)zend_accel_destroy_zend_class;</span>
<span class='curline'><a href='../S/856.html#L142'>persistent_script</a>  142 ext/opcache/zend_accelerator_util_funcs.c 		persistent_script-&gt;function_table.pDestructor = NULL;</span>
<span class='curline'><a href='../S/856.html#L143'>persistent_script</a>  143 ext/opcache/zend_accelerator_util_funcs.c 		persistent_script-&gt;class_table.pDestructor = NULL;</span>
<span class='curline'><a href='../S/856.html#L146'>persistent_script</a>  146 ext/opcache/zend_accelerator_util_funcs.c 	zend_hash_destroy(&amp;persistent_script-&gt;function_table);</span>
<span class='curline'><a href='../S/856.html#L147'>persistent_script</a>  147 ext/opcache/zend_accelerator_util_funcs.c 	zend_hash_destroy(&amp;persistent_script-&gt;class_table);</span>
<span class='curline'><a href='../S/856.html#L149'>persistent_script</a>  149 ext/opcache/zend_accelerator_util_funcs.c 	if (persistent_script-&gt;full_path) {</span>
<span class='curline'><a href='../S/856.html#L150'>persistent_script</a>  150 ext/opcache/zend_accelerator_util_funcs.c 		efree(persistent_script-&gt;full_path);</span>
<span class='curline'><a href='../S/856.html#L153'>persistent_script</a>  153 ext/opcache/zend_accelerator_util_funcs.c 	efree(persistent_script);</span>
<span class='curline'><a href='../S/856.html#L998'>persistent_script</a>  998 ext/opcache/zend_accelerator_util_funcs.c zend_op_array* zend_accel_load_script(zend_persistent_script *persistent_script, int from_shared_memory TSRMLS_DC)</span>
<span class='curline'><a href='../S/856.html#L1003'>persistent_script</a> 1003 ext/opcache/zend_accelerator_util_funcs.c 	*op_array = persistent_script-&gt;main_op_array;</span>
<span class='curline'><a href='../S/856.html#L1007'>persistent_script</a> 1007 ext/opcache/zend_accelerator_util_funcs.c 		if (zend_hash_num_elements(&amp;persistent_script-&gt;class_table) &gt; 0) {</span>
<span class='curline'><a href='../S/856.html#L1009'>persistent_script</a> 1009 ext/opcache/zend_accelerator_util_funcs.c 			zend_accel_class_hash_copy(CG(class_table), &amp;persistent_script-&gt;class_table, (unique_copy_ctor_func_t) zend_class_copy_ctor TSRMLS_CC);</span>
<span class='curline'><a href='../S/856.html#L1014'>persistent_script</a> 1014 ext/opcache/zend_accelerator_util_funcs.c 		if (zend_hash_num_elements(&amp;persistent_script-&gt;function_table) &gt; 0) {</span>
<span class='curline'><a href='../S/856.html#L1015'>persistent_script</a> 1015 ext/opcache/zend_accelerator_util_funcs.c 			zend_accel_function_hash_copy(CG(function_table), &amp;persistent_script-&gt;function_table, (unique_copy_ctor_func_t)zend_prepare_function_for_execution);</span>
<span class='curline'><a href='../S/856.html#L1021'>persistent_script</a> 1021 ext/opcache/zend_accelerator_util_funcs.c 		if (persistent_script-&gt;compiler_halt_offset != 0 &amp;&amp;</span>
<span class='curline'><a href='../S/856.html#L1022'>persistent_script</a> 1022 ext/opcache/zend_accelerator_util_funcs.c 		    persistent_script-&gt;full_path) {</span>
<span class='curline'><a href='../S/856.html#L1027'>persistent_script</a> 1027 ext/opcache/zend_accelerator_util_funcs.c 			cfilename = persistent_script-&gt;full_path;</span>
<span class='curline'><a href='../S/856.html#L1031'>persistent_script</a> 1031 ext/opcache/zend_accelerator_util_funcs.c 				zend_register_long_constant(name, len + 1, persistent_script-&gt;compiler_halt_offset, CONST_CS, 0 TSRMLS_CC);</span>
<span class='curline'><a href='../S/856.html#L1037'>persistent_script</a> 1037 ext/opcache/zend_accelerator_util_funcs.c 		if ((int)persistent_script-&gt;early_binding != -1) {</span>
<span class='curline'><a href='../S/856.html#L1038'>persistent_script</a> 1038 ext/opcache/zend_accelerator_util_funcs.c 			zend_do_delayed_early_binding(op_array, persistent_script-&gt;early_binding TSRMLS_CC);</span>
<span class='curline'><a href='../S/856.html#L1043'>persistent_script</a> 1043 ext/opcache/zend_accelerator_util_funcs.c 		if (zend_hash_num_elements(&amp;persistent_script-&gt;function_table) &gt; 0) {</span>
<span class='curline'><a href='../S/856.html#L1044'>persistent_script</a> 1044 ext/opcache/zend_accelerator_util_funcs.c 			zend_accel_function_hash_copy(CG(function_table), &amp;persistent_script-&gt;function_table, NULL);</span>
<span class='curline'><a href='../S/856.html#L1046'>persistent_script</a> 1046 ext/opcache/zend_accelerator_util_funcs.c 		if (zend_hash_num_elements(&amp;persistent_script-&gt;class_table) &gt; 0) {</span>
<span class='curline'><a href='../S/856.html#L1047'>persistent_script</a> 1047 ext/opcache/zend_accelerator_util_funcs.c 			zend_accel_class_hash_copy(CG(class_table), &amp;persistent_script-&gt;class_table, NULL TSRMLS_CC);</span>
<span class='curline'><a href='../S/856.html#L1054'>persistent_script</a> 1054 ext/opcache/zend_accelerator_util_funcs.c 		CG(compiled_filename) = persistent_script-&gt;full_path;</span>
<span class='curline'><a href='../S/856.html#L1061'>persistent_script</a> 1061 ext/opcache/zend_accelerator_util_funcs.c 		free_persistent_script(persistent_script, 0); /* free only hashes */</span>
<span class='curline'><a href='../S/857.html#L32'>persistent_script</a>   32 ext/opcache/zend_accelerator_util_funcs.h void free_persistent_script(zend_persistent_script *persistent_script, int destroy_elements);</span>
<span class='curline'><a href='../S/857.html#L37'>persistent_script</a>   37 ext/opcache/zend_accelerator_util_funcs.h zend_op_array* zend_accel_load_script(zend_persistent_script *persistent_script, int from_shared_memory TSRMLS_DC);</span>
</pre>
</body>
</html>
