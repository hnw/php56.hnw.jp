<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>newpath</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/973.html#L2125'>newpath</a>          2125 ext/phar/phar.c 	char *newpath;</span>
<span class='curline'><a href='../S/973.html#L2133'>newpath</a>          2133 ext/phar/phar.c 		newpath = emalloc(strlen(path) + newpath_len + 1);</span>
<span class='curline'><a href='../S/973.html#L2134'>newpath</a>          2134 ext/phar/phar.c 		memcpy(newpath, PHAR_G(cwd), newpath_len);</span>
<span class='curline'><a href='../S/973.html#L2136'>newpath</a>          2136 ext/phar/phar.c 		newpath = emalloc(strlen(path) + 2);</span>
<span class='curline'><a href='../S/973.html#L2137'>newpath</a>          2137 ext/phar/phar.c 		newpath[0] = '/';</span>
<span class='curline'><a href='../S/973.html#L2159'>newpath</a>          2159 ext/phar/phar.c 					efree(newpath);</span>
<span class='curline'><a href='../S/973.html#L2167'>newpath</a>          2167 ext/phar/phar.c 					efree(newpath);</span>
<span class='curline'><a href='../S/973.html#L2171'>newpath</a>          2171 ext/phar/phar.c 		efree(newpath);</span>
<span class='curline'><a href='../S/973.html#L2179'>newpath</a>          2179 ext/phar/phar.c #define PREVIOUS newpath[newpath_len - 1]</span>
<span class='curline'><a href='../S/973.html#L2185'>newpath</a>          2185 ext/phar/phar.c 			if (newpath[0] != '/') {</span>
<span class='curline'><a href='../S/973.html#L2186'>newpath</a>          2186 ext/phar/phar.c 				newpath[newpath_len] = '\0';</span>
<span class='curline'><a href='../S/973.html#L2192'>newpath</a>          2192 ext/phar/phar.c 				newpath[newpath_len++] = '/';</span>
<span class='curline'><a href='../S/973.html#L2193'>newpath</a>          2193 ext/phar/phar.c 				memcpy(newpath + newpath_len, tok, ptr_length+1);</span>
<span class='curline'><a href='../S/973.html#L2195'>newpath</a>          2195 ext/phar/phar.c 				memcpy(newpath + newpath_len, tok, ptr_length+1);</span>
<span class='curline'><a href='../S/973.html#L2220'>newpath</a>          2220 ext/phar/phar.c 	newpath[newpath_len] = '\0';</span>
<span class='curline'><a href='../S/973.html#L2221'>newpath</a>          2221 ext/phar/phar.c 	return erealloc(newpath, newpath_len + 1);</span>
<span class='curline'><a href='../S/975.html#L2028'>newpath</a>          2028 ext/phar/phar_object.c 	char *newname = NULL, *newpath = NULL;</span>
<span class='curline'><a href='../S/975.html#L2110'>newpath</a>          2110 ext/phar/phar_object.c 	phar-&gt;fname_len = spprintf(&amp;newpath, 0, "%s%s", basepath, newname);</span>
<span class='curline'><a href='../S/975.html#L2111'>newpath</a>          2111 ext/phar/phar_object.c 	phar-&gt;fname = newpath;</span>
<span class='curline'><a href='../S/975.html#L2112'>newpath</a>          2112 ext/phar/phar_object.c 	phar-&gt;ext = newpath + phar-&gt;fname_len - strlen(ext) - 1;</span>
<span class='curline'><a href='../S/975.html#L2116'>newpath</a>          2116 ext/phar/phar_object.c 	if (PHAR_G(manifest_cached) &amp;&amp; SUCCESS == zend_hash_find(&amp;cached_phars, newpath, phar-&gt;fname_len, (void **) &amp;pphar)) {</span>
<span class='curline'><a href='../S/975.html#L2122'>newpath</a>          2122 ext/phar/phar_object.c 	if (SUCCESS == zend_hash_find(&amp;(PHAR_GLOBALS-&gt;phar_fname_map), newpath, phar-&gt;fname_len, (void **) &amp;pphar)) {</span>
<span class='curline'><a href='../S/975.html#L2136'>newpath</a>          2136 ext/phar/phar_object.c 				newpath = oldpath;</span>
<span class='curline'><a href='../S/975.html#L2146'>newpath</a>          2146 ext/phar/phar_object.c 	if (SUCCESS == php_stream_stat_path(newpath, &amp;ssb)) {</span>
<span class='curline'><a href='../S/975.html#L2147'>newpath</a>          2147 ext/phar/phar_object.c 		zend_throw_exception_ex(spl_ce_BadMethodCallException, 0 TSRMLS_CC, "phar \"%s\" exists and must be unlinked prior to conversion", newpath);</span>
<span class='curline'><a href='../S/975.html#L2152'>newpath</a>          2152 ext/phar/phar_object.c 		if (SUCCESS != phar_detect_phar_fname_ext(newpath, phar-&gt;fname_len, (const char **) &amp;(phar-&gt;ext), &amp;(phar-&gt;ext_len), 1, 1, 1 TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L2163'>newpath</a>          2163 ext/phar/phar_object.c 				phar-&gt;alias = estrndup(newpath, strlen(newpath));</span>
<span class='curline'><a href='../S/975.html#L2164'>newpath</a>          2164 ext/phar/phar_object.c 				phar-&gt;alias_len = strlen(newpath);</span>
<span class='curline'><a href='../S/975.html#L2166'>newpath</a>          2166 ext/phar/phar_object.c 				zend_hash_update(&amp;(PHAR_GLOBALS-&gt;phar_alias_map), newpath, phar-&gt;fname_len, (void*)&amp;phar, sizeof(phar_archive_data*), NULL);</span>
<span class='curline'><a href='../S/975.html#L2172'>newpath</a>          2172 ext/phar/phar_object.c 		if (SUCCESS != phar_detect_phar_fname_ext(newpath, phar-&gt;fname_len, (const char **) &amp;(phar-&gt;ext), &amp;(phar-&gt;ext_len), 0, 1, 1 TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/975.html#L2182'>newpath</a>          2182 ext/phar/phar_object.c 	if ((!pphar || phar == *pphar) &amp;&amp; SUCCESS != zend_hash_update(&amp;(PHAR_GLOBALS-&gt;phar_fname_map), newpath, phar-&gt;fname_len, (void*)&amp;phar, sizeof(phar_archive_data*), NULL)) {</span>
</pre>
</body>
</html>
