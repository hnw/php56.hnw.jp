<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>newfile</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/973.html#L2562'>newfile</a>          2562 ext/phar/phar.c 	php_stream *file, *oldfile, *newfile, *stubfile;</span>
<span class='curline'><a href='../S/973.html#L2606'>newfile</a>          2606 ext/phar/phar.c 	newfile = php_stream_fopen_tmpfile();</span>
<span class='curline'><a href='../S/973.html#L2607'>newfile</a>          2607 ext/phar/phar.c 	if (!newfile) {</span>
<span class='curline'><a href='../S/973.html#L2624'>newfile</a>          2624 ext/phar/phar.c 				php_stream_close(newfile);</span>
<span class='curline'><a href='../S/973.html#L2641'>newfile</a>          2641 ext/phar/phar.c 				php_stream_close(newfile);</span>
<span class='curline'><a href='../S/973.html#L2657'>newfile</a>          2657 ext/phar/phar.c 			php_stream_close(newfile);</span>
<span class='curline'><a href='../S/973.html#L2669'>newfile</a>          2669 ext/phar/phar.c 		if ((size_t)len != php_stream_write(newfile, user_stub, len)</span>
<span class='curline'><a href='../S/973.html#L2670'>newfile</a>          2670 ext/phar/phar.c 		||			  5 != php_stream_write(newfile, " ?&gt;\r\n", 5)) {</span>
<span class='curline'><a href='../S/973.html#L2674'>newfile</a>          2674 ext/phar/phar.c 			php_stream_close(newfile);</span>
<span class='curline'><a href='../S/973.html#L2691'>newfile</a>          2691 ext/phar/phar.c 			php_stream_copy_to_stream_ex(oldfile, newfile, phar-&gt;halt_offset, &amp;written);</span>
<span class='curline'><a href='../S/973.html#L2696'>newfile</a>          2696 ext/phar/phar.c 			written = php_stream_write(newfile, newstub, phar-&gt;halt_offset);</span>
<span class='curline'><a href='../S/973.html#L2702'>newfile</a>          2702 ext/phar/phar.c 			php_stream_close(newfile);</span>
<span class='curline'><a href='../S/973.html#L2719'>newfile</a>          2719 ext/phar/phar.c 	manifest_ftell = php_stream_tell(newfile);</span>
<span class='curline'><a href='../S/973.html#L2817'>newfile</a>          2817 ext/phar/phar.c 			php_stream_close(newfile);</span>
<span class='curline'><a href='../S/973.html#L2840'>newfile</a>          2840 ext/phar/phar.c 			php_stream_close(newfile);</span>
<span class='curline'><a href='../S/973.html#L2864'>newfile</a>          2864 ext/phar/phar.c 			php_stream_close(newfile);</span>
<span class='curline'><a href='../S/973.html#L2872'>newfile</a>          2872 ext/phar/phar.c 			php_stream_close(newfile);</span>
<span class='curline'><a href='../S/973.html#L2883'>newfile</a>          2883 ext/phar/phar.c 			php_stream_close(newfile);</span>
<span class='curline'><a href='../S/973.html#L2937'>newfile</a>          2937 ext/phar/phar.c 	if (sizeof(manifest) != php_stream_write(newfile, manifest, sizeof(manifest))</span>
<span class='curline'><a href='../S/973.html#L2938'>newfile</a>          2938 ext/phar/phar.c 	|| (size_t)phar-&gt;alias_len != php_stream_write(newfile, phar-&gt;alias, phar-&gt;alias_len)) {</span>
<span class='curline'><a href='../S/973.html#L2944'>newfile</a>          2944 ext/phar/phar.c 		php_stream_close(newfile);</span>
<span class='curline'><a href='../S/973.html#L2957'>newfile</a>          2957 ext/phar/phar.c 	if (4 != php_stream_write(newfile, manifest, 4) || (main_metadata_str.len</span>
<span class='curline'><a href='../S/973.html#L2958'>newfile</a>          2958 ext/phar/phar.c 	&amp;&amp; main_metadata_str.len != php_stream_write(newfile, main_metadata_str.c, main_metadata_str.len))) {</span>
<span class='curline'><a href='../S/973.html#L2965'>newfile</a>          2965 ext/phar/phar.c 		php_stream_close(newfile);</span>
<span class='curline'><a href='../S/973.html#L2977'>newfile</a>          2977 ext/phar/phar.c 	manifest_ftell = php_stream_tell(newfile);</span>
<span class='curline'><a href='../S/973.html#L3000'>newfile</a>          3000 ext/phar/phar.c 		if (4 != php_stream_write(newfile, entry_buffer, 4)</span>
<span class='curline'><a href='../S/973.html#L3001'>newfile</a>          3001 ext/phar/phar.c 		|| entry-&gt;filename_len != php_stream_write(newfile, entry-&gt;filename, entry-&gt;filename_len)</span>
<span class='curline'><a href='../S/973.html#L3002'>newfile</a>          3002 ext/phar/phar.c 		|| (entry-&gt;is_dir &amp;&amp; 1 != php_stream_write(newfile, "/", 1))) {</span>
<span class='curline'><a href='../S/973.html#L3006'>newfile</a>          3006 ext/phar/phar.c 			php_stream_close(newfile);</span>
<span class='curline'><a href='../S/973.html#L3034'>newfile</a>          3034 ext/phar/phar.c 		if (sizeof(entry_buffer) != php_stream_write(newfile, entry_buffer, sizeof(entry_buffer))</span>
<span class='curline'><a href='../S/973.html#L3035'>newfile</a>          3035 ext/phar/phar.c 		|| entry-&gt;metadata_str.len != php_stream_write(newfile, entry-&gt;metadata_str.c, entry-&gt;metadata_str.len)) {</span>
<span class='curline'><a href='../S/973.html#L3040'>newfile</a>          3040 ext/phar/phar.c 			php_stream_close(newfile);</span>
<span class='curline'><a href='../S/973.html#L3051'>newfile</a>          3051 ext/phar/phar.c 		if(1 != php_stream_write(newfile, manifest, 1)) {</span>
<span class='curline'><a href='../S/973.html#L3056'>newfile</a>          3056 ext/phar/phar.c 			php_stream_close(newfile);</span>
<span class='curline'><a href='../S/973.html#L3067'>newfile</a>          3067 ext/phar/phar.c 	offset = php_stream_tell(newfile);</span>
<span class='curline'><a href='../S/973.html#L3089'>newfile</a>          3089 ext/phar/phar.c 				php_stream_close(newfile);</span>
<span class='curline'><a href='../S/973.html#L3101'>newfile</a>          3101 ext/phar/phar.c 			php_stream_close(newfile);</span>
<span class='curline'><a href='../S/973.html#L3111'>newfile</a>          3111 ext/phar/phar.c 		if (php_stream_copy_to_stream_ex(file, newfile, entry-&gt;compressed_filesize, &amp;wrote) == FAILURE) {</span>
<span class='curline'><a href='../S/973.html#L3116'>newfile</a>          3116 ext/phar/phar.c 			php_stream_close(newfile);</span>
<span class='curline'><a href='../S/973.html#L3149'>newfile</a>          3149 ext/phar/phar.c 		php_stream_rewind(newfile);</span>
<span class='curline'><a href='../S/973.html#L3163'>newfile</a>          3163 ext/phar/phar.c 				php_stream_close(newfile);</span>
<span class='curline'><a href='../S/973.html#L3173'>newfile</a>          3173 ext/phar/phar.c 				if (FAILURE == phar_create_signature(phar, newfile, &amp;digest, &amp;digest_len, error TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/973.html#L3185'>newfile</a>          3185 ext/phar/phar.c 					php_stream_close(newfile);</span>
<span class='curline'><a href='../S/973.html#L3189'>newfile</a>          3189 ext/phar/phar.c 				php_stream_write(newfile, digest, digest_len);</span>
<span class='curline'><a href='../S/973.html#L3193'>newfile</a>          3193 ext/phar/phar.c 					php_stream_write(newfile, sig_buf, 4);</span>
<span class='curline'><a href='../S/973.html#L3199'>newfile</a>          3199 ext/phar/phar.c 		php_stream_write(newfile, sig_buf, 4);</span>
<span class='curline'><a href='../S/973.html#L3200'>newfile</a>          3200 ext/phar/phar.c 		php_stream_write(newfile, "GBMB", 4);</span>
<span class='curline'><a href='../S/973.html#L3225'>newfile</a>          3225 ext/phar/phar.c 	php_stream_rewind(newfile);</span>
<span class='curline'><a href='../S/973.html#L3229'>newfile</a>          3229 ext/phar/phar.c 		phar-&gt;fp = newfile;</span>
<span class='curline'><a href='../S/973.html#L3233'>newfile</a>          3233 ext/phar/phar.c 			phar-&gt;fp = newfile;</span>
<span class='curline'><a href='../S/973.html#L3257'>newfile</a>          3257 ext/phar/phar.c 			php_stream_copy_to_stream_ex(newfile, phar-&gt;fp, PHP_STREAM_COPY_ALL, NULL);</span>
<span class='curline'><a href='../S/973.html#L3262'>newfile</a>          3262 ext/phar/phar.c 			phar-&gt;fp = newfile;</span>
<span class='curline'><a href='../S/973.html#L3266'>newfile</a>          3266 ext/phar/phar.c 			php_stream_copy_to_stream_ex(newfile, phar-&gt;fp, PHP_STREAM_COPY_ALL, NULL);</span>
<span class='curline'><a href='../S/973.html#L3271'>newfile</a>          3271 ext/phar/phar.c 			phar-&gt;fp = newfile;</span>
<span class='curline'><a href='../S/973.html#L3273'>newfile</a>          3273 ext/phar/phar.c 			php_stream_copy_to_stream_ex(newfile, phar-&gt;fp, PHP_STREAM_COPY_ALL, NULL);</span>
<span class='curline'><a href='../S/973.html#L3275'>newfile</a>          3275 ext/phar/phar.c 			php_stream_close(newfile);</span>
<span class='curline'><a href='../S/975.html#L3438'>newfile</a>          3438 ext/phar/phar_object.c 	char *oldfile, *newfile, *error;</span>
<span class='curline'><a href='../S/975.html#L3445'>newfile</a>          3445 ext/phar/phar_object.c 	if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, "pp", &amp;oldfile, &amp;oldfile_len, &amp;newfile, &amp;newfile_len) == FAILURE) {</span>
<span class='curline'><a href='../S/975.html#L3451'>newfile</a>          3451 ext/phar/phar_object.c 			"Cannot copy \"%s\" to \"%s\", phar is read-only", oldfile, newfile);</span>
<span class='curline'><a href='../S/975.html#L3458'>newfile</a>          3458 ext/phar/phar_object.c 			"file \"%s\" cannot be copied to file \"%s\", cannot copy Phar meta-file in %s", oldfile, newfile, phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3462'>newfile</a>          3462 ext/phar/phar_object.c 	if (newfile_len &gt;= sizeof(".phar")-1 &amp;&amp; !memcmp(newfile, ".phar", sizeof(".phar")-1)) {</span>
<span class='curline'><a href='../S/975.html#L3465'>newfile</a>          3465 ext/phar/phar_object.c 			"file \"%s\" cannot be copied to file \"%s\", cannot copy to Phar meta-file in %s", oldfile, newfile, phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3471'>newfile</a>          3471 ext/phar/phar_object.c 			"file \"%s\" cannot be copied to file \"%s\", file does not exist in %s", oldfile, newfile, phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3475'>newfile</a>          3475 ext/phar/phar_object.c 	if (zend_hash_exists(&amp;phar_obj-&gt;arc.archive-&gt;manifest, newfile, (uint) newfile_len)) {</span>
<span class='curline'><a href='../S/975.html#L3476'>newfile</a>          3476 ext/phar/phar_object.c 		if (SUCCESS == zend_hash_find(&amp;phar_obj-&gt;arc.archive-&gt;manifest, newfile, (uint) newfile_len, (void**)&amp;temp) || !temp-&gt;is_deleted) {</span>
<span class='curline'><a href='../S/975.html#L3478'>newfile</a>          3478 ext/phar/phar_object.c 				"file \"%s\" cannot be copied to file \"%s\", file must not already exist in phar %s", oldfile, newfile, phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3483'>newfile</a>          3483 ext/phar/phar_object.c 	if (phar_path_check(&amp;newfile, &amp;newfile_len, &amp;pcr_error) &gt; pcr_is_ok) {</span>
<span class='curline'><a href='../S/975.html#L3485'>newfile</a>          3485 ext/phar/phar_object.c 				"file \"%s\" contains invalid characters %s, cannot be copied from \"%s\" in phar %s", newfile, pcr_error, oldfile, phar_obj-&gt;arc.archive-&gt;fname);</span>
<span class='curline'><a href='../S/975.html#L3513'>newfile</a>          3513 ext/phar/phar_object.c 	newentry.filename = estrndup(newfile, newfile_len);</span>
<span class='curline'><a href='../S/975.html#L3527'>newfile</a>          3527 ext/phar/phar_object.c 	zend_hash_add(&amp;oldentry-&gt;phar-&gt;manifest, newfile, newfile_len, (void*)&amp;newentry, sizeof(phar_entry_info), NULL);</span>
<span class='curline'><a href='../S/975.html#L5210'>newfile</a>          5210 ext/phar/phar_object.c 	ZEND_ARG_INFO(0, newfile)</span>
<span class='curline'><a href='../S/982.html#L949'>newfile</a>           949 ext/phar/tar.c 	php_stream *oldfile, *newfile, *stubfile;</span>
<span class='curline'><a href='../S/982.html#L1127'>newfile</a>          1127 ext/phar/tar.c 	newfile = php_stream_fopen_tmpfile();</span>
<span class='curline'><a href='../S/982.html#L1128'>newfile</a>          1128 ext/phar/tar.c 	if (!newfile) {</span>
<span class='curline'><a href='../S/982.html#L1139'>newfile</a>          1139 ext/phar/tar.c 	pass.new = newfile;</span>
<span class='curline'><a href='../S/982.html#L1188'>newfile</a>          1188 ext/phar/tar.c 		php_stream_close(newfile);</span>
<span class='curline'><a href='../S/982.html#L1196'>newfile</a>          1196 ext/phar/tar.c 		if (FAILURE == phar_create_signature(phar, newfile, &amp;signature, &amp;signature_length, error TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/982.html#L1207'>newfile</a>          1207 ext/phar/tar.c 			php_stream_close(newfile);</span>
<span class='curline'><a href='../S/982.html#L1239'>newfile</a>          1239 ext/phar/tar.c 			php_stream_close(newfile);</span>
<span class='curline'><a href='../S/982.html#L1253'>newfile</a>          1253 ext/phar/tar.c 			php_stream_close(newfile);</span>
<span class='curline'><a href='../S/982.html#L1260'>newfile</a>          1260 ext/phar/tar.c 	php_stream_write(newfile, buf, 1024);</span>
<span class='curline'><a href='../S/982.html#L1269'>newfile</a>          1269 ext/phar/tar.c 		php_stream_close(newfile);</span>
<span class='curline'><a href='../S/982.html#L1285'>newfile</a>          1285 ext/phar/tar.c 	php_stream_rewind(newfile);</span>
<span class='curline'><a href='../S/982.html#L1289'>newfile</a>          1289 ext/phar/tar.c 		phar-&gt;fp = newfile;</span>
<span class='curline'><a href='../S/982.html#L1293'>newfile</a>          1293 ext/phar/tar.c 			phar-&gt;fp = newfile;</span>
<span class='curline'><a href='../S/982.html#L1316'>newfile</a>          1316 ext/phar/tar.c 				php_stream_copy_to_stream_ex(newfile, phar-&gt;fp, PHP_STREAM_COPY_ALL, NULL);</span>
<span class='curline'><a href='../S/982.html#L1317'>newfile</a>          1317 ext/phar/tar.c 				php_stream_close(newfile);</span>
<span class='curline'><a href='../S/982.html#L1325'>newfile</a>          1325 ext/phar/tar.c 			php_stream_copy_to_stream_ex(newfile, phar-&gt;fp, PHP_STREAM_COPY_ALL, NULL);</span>
<span class='curline'><a href='../S/982.html#L1330'>newfile</a>          1330 ext/phar/tar.c 			phar-&gt;fp = newfile;</span>
<span class='curline'><a href='../S/982.html#L1336'>newfile</a>          1336 ext/phar/tar.c 			php_stream_copy_to_stream_ex(newfile, phar-&gt;fp, PHP_STREAM_COPY_ALL, NULL);</span>
<span class='curline'><a href='../S/982.html#L1341'>newfile</a>          1341 ext/phar/tar.c 			phar-&gt;fp = newfile;</span>
<span class='curline'><a href='../S/982.html#L1343'>newfile</a>          1343 ext/phar/tar.c 			php_stream_copy_to_stream_ex(newfile, phar-&gt;fp, PHP_STREAM_COPY_ALL, NULL);</span>
<span class='curline'><a href='../S/982.html#L1345'>newfile</a>          1345 ext/phar/tar.c 			php_stream_close(newfile);</span>
<span class='curline'><a href='../S/985.html#L1087'>newfile</a>          1087 ext/phar/zip.c 		php_stream *newfile;</span>
<span class='curline'><a href='../S/985.html#L1090'>newfile</a>          1090 ext/phar/zip.c 		newfile = php_stream_fopen_tmpfile();</span>
<span class='curline'><a href='../S/985.html#L1091'>newfile</a>          1091 ext/phar/zip.c 		if (newfile == NULL) {</span>
<span class='curline'><a href='../S/985.html#L1098'>newfile</a>          1098 ext/phar/zip.c 		php_stream_copy_to_stream_ex(pass-&gt;filefp, newfile, tell, NULL);</span>
<span class='curline'><a href='../S/985.html#L1101'>newfile</a>          1101 ext/phar/zip.c 		php_stream_copy_to_stream_ex(pass-&gt;centralfp, newfile, tell, NULL);</span>
<span class='curline'><a href='../S/985.html#L1103'>newfile</a>          1103 ext/phar/zip.c 			php_stream_write(newfile, metadata-&gt;c, metadata-&gt;len);</span>
<span class='curline'><a href='../S/985.html#L1106'>newfile</a>          1106 ext/phar/zip.c 		if (FAILURE == phar_create_signature(phar, newfile, &amp;signature, &amp;signature_length, pass-&gt;error TSRMLS_CC)) {</span>
<span class='curline'><a href='../S/985.html#L1113'>newfile</a>          1113 ext/phar/zip.c 			php_stream_close(newfile);</span>
<span class='curline'><a href='../S/985.html#L1136'>newfile</a>          1136 ext/phar/zip.c 			php_stream_close(newfile);</span>
<span class='curline'><a href='../S/985.html#L1145'>newfile</a>          1145 ext/phar/zip.c 		php_stream_close(newfile);</span>
<span class='curline'><a href='../S/985.html#L1149'>newfile</a>          1149 ext/phar/zip.c 			php_stream_close(newfile);</span>
</pre>
</body>
</html>
